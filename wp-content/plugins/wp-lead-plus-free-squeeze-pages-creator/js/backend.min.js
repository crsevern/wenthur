function getModelDefaults(){return{action:{},hidden:{desktop:!1,tablet:!1,phone:!1},cssStyle:{desktop:{"box-shadow":{},"background-color":{},"background-overlay":{}},phone:{},tablet:{},customCSS:"",extraClasses:"",innerSelector:"",videoBg:{type:"youtube",src:{mp4:"",webm:"",ogv:"",yt:""}}}}}function generateCSSFromObject(object){console.log("passing onbject is",object);var string="";console.log("object is: ",object);for(var key in object)if(object.hasOwnProperty(key))if("object"==typeof object[key])for(var childKey in object[key])"undefined"!=typeof object[key]&&0!=object[key][childKey]&&(string+=key+"-"+childKey+": "+object[key][childKey]+"px; ");else"undefined"!=typeof object[key]&&0!=object[key]&&""!=object[key]&&(string+=key+": "+object[key]+"px; ");return console.log("result string is: ",string),string}function hideTopDropDownMenu(){setTimeout(function(){jQuery(".c37-drop-down-menu").hide("slide",{direction:"up"},500)},200)}function backgroundTabs(){jQuery("#c37-bg-options").tabs({active:0,activate:function(event,ui){ui.oldTab.find("a").removeClass("active-tab"),ui.newTab.find("a").addClass("active-tab")},create:function(event,ui){ui.tab.find("a").addClass("active-tab")}})}function responsiveTabs(){jQuery(".responsive-tabs").tabs({active:0,activate:function(event,ui){ui.oldTab.find("a").removeClass("active-tab"),ui.newTab.find("a").addClass("active-tab")},create:function(event,ui){ui.tab.find("a").addClass("active-tab")}})}function boxSizeTab(){jQuery("#box-size").tabs({active:0,activate:function(event,ui){ui.oldTab.find("a").removeClass("active-tab"),ui.newTab.find("a").addClass("active-tab")},create:function(event,ui){ui.tab.find("a").addClass("active-tab")}})}function paddingTabs(){jQuery("#padding-tab").tabs({active:0,activate:function(event,ui){ui.oldTab.find("a").removeClass("active-tab"),ui.newTab.find("a").addClass("active-tab")},create:function(event,ui){ui.tab.find("a").addClass("active-tab")}})}function textSizeTabs(){jQuery("#text-size").tabs({active:0,activate:function(event,ui){ui.oldTab.find("a").removeClass("active-tab"),ui.newTab.find("a").addClass("active-tab")},create:function(event,ui){ui.tab.find("a").addClass("active-tab")}})}function getIntAttribute(object,attributesArray){for(var currentBranch=object,i=0;i<attributesArray.length;i++){if("undefined"==typeof currentBranch[attributesArray[i]])return 0;console.log("attribute css: ",currentBranch[attributesArray[i]]),currentBranch=currentBranch[attributesArray[i]]}return"undefined"!=typeof currentBranch?currentBranch:0}function getStringAttribute(object,attributesArray){for(var currentBranch=object,i=0;i<attributesArray.length;i++){if("undefined"==typeof currentBranch[attributesArray[i]])return"";console.log("attribute css: ",currentBranch[attributesArray[i]]),currentBranch=currentBranch[attributesArray[i]]}return"undefined"!=typeof currentBranch?currentBranch:""}function elementSettingsTab(){jQuery("#setting-tabs").tabs({active:0,activate:function(event,ui){ui.oldTab.find("a").removeClass("active-tab"),ui.newTab.find("a").addClass("active-tab")},create:function(event,ui){ui.tab.find("a").addClass("active-tab")}})}function c37GetElementModel(elementID,elementType){if(elementID===!1)return console.log("model templates",ModelTemplates),console.log("return fresh model"),new ModelTemplates[elementType];if("undefined"!=typeof modelsList[elementID])return console.log("model exists in modelsList"),modelsList[elementID];if("undefined"!=typeof core37Page.pageSettings.modelsJSON[elementID])return console.log("get model form json object"),new C37ElementModel(core37Page.pageSettings.modelsJSON[elementID]);console.log("return new model model"),console.log("element type is: ",elementType);var newModel=new ModelTemplates[elementType],element=jQuery("#"+elementID);return element.attr("id",newModel.getElementID()),newModel}function c37CleanForm(rawFormCode){var formElement=jQuery.parseHTML(decodeURIComponent(rawFormCode)),elements=[],radio=[],checkbox=[];_.each(jQuery(formElement).find("input,button,textarea,select"),function(child){child=jQuery(child),(child.is("input")||child.is("button")||child.is("textarea")||child.is("select"))&&elements.push(child)});var formMethod=void 0===jQuery(formElement).attr("method")?"":jQuery(formElement).attr("method"),formAction=void 0===jQuery(formElement).attr("action")?"":jQuery(formElement).attr("action"),appendCode="";return _.each(elements,function(e){if(e.is("input")||e.is("button"))if(("button"===e.attr("type")||"image"===e.attr("type")||e.is("button"))&&(e.is("button")?e=jQuery('<input type="submit" name="'+e.attr("name")+'" value="'+e.text()+'" />'):(e.attr("type","submit"),"undefined"==typeof e.attr("value")&&e.attr("value","submit"))),"submit"===e.attr("type")){var submitButtonModel=new SubmitButtonModel,submitButton=new Button({model:submitButtonModel});submitButton.render(),appendCode+='<div data-original="false" data-c37-type="button" class="c37-lp-element c37-lp-form-child c37-item-element" id="'+submitButtonModel.get("editingElementID")+'">'+submitButton.$el.html()+"</div>"}else if("hidden"===e.attr("type")){var value="undefined"==typeof e.val()?"":e.val();appendCode+='<input type="hidden" name="'+e.attr("name")+'" value="'+value+'" />'}else if("radio"===e.attr("type"))radio[e.attr("name")]=radio[e.attr("name")]||{},radio[e.attr("name")].options=radio[e.attr("name")].options||[],radio[e.attr("name")].options.push({value:e.attr("value"),id:"radio_"+Math.floor(30020*Math.random())}),radio[e.attr("name")].name=e.attr("name");else if("checkbox"===e.attr("type"))checkbox[e.attr("name")]=checkbox[e.attr("name")]||{},checkbox[e.attr("name")].options=checkbox[e.attr("name")].options||[],checkbox[e.attr("name")].options.push({value:e.attr("value"),id:"checkbox_"+Math.floor(30320*Math.random())}),checkbox[e.attr("name")].name=e.attr("name");else if(void 0!==e.attr("name")&&e.attr("name").length>30&&void 0!==e.attr("tabindex"))appendCode+="";else{var model=new TextInputModel;model.set("name",e.attr("name")),model.set("placeholder",e.attr("name"));var ti=new TextInput({model:model});ti.render(),appendCode+='<div  data-original="false" data-c37-type="text" class="c37-lp-element c37-lp-form-child c37-item-element" id="'+model.get("editingElementID")+'">'+ti.$el.html()+"</div>"}else if(e.is("textarea")){var taModel=new TextAreaModel,ta=new TextArea({model:taModel});ta.render(),appendCode+='<div  data-original="false" data-c37-type="textarea" class="c37-lp-element c37-lp-form-child c37-item-element" id="'+taModel.get("editingElementID")+'">'+ta.$el.html()+"</div>"}else if(e.is("select")){console.log("have select element");var selectModel=new SelectModel,sel=new Select({model:selectModel});sel.render(),appendCode+='<div  data-original="false" data-c37-type="select" class="c37-lp-element c37-lp-form-child c37-item-element" id="'+selectModel.get("editingElementID")+'">'+sel.$el.html()+"</div>"}}),_.each(_.keys(radio),function(r){var radioModel=new RadioModel;radioModel.set("name",radio[r].name),radioModel.set("options",radio[r].options);var radioElement=new Radio({model:radioModel});radioElement.render(),appendCode+='<div  data-original="false" data-c37-type="radio" class="c37-lp-element c37-lp-form-child c37-item-element" id="'+radioModel.get("editingElementID")+'">'+radioElement.$el.html()+"</div>"}),_.each(_.keys(checkbox),function(c){var checkboxModel=new CheckBoxModel;checkboxModel.set("name",checkbox[c].name),checkboxModel.set("options",checkbox[c].options);var checkboxElement=new CheckBox({model:checkboxModel});checkboxElement.render(),appendCode+='<div  data-original="false" data-c37-type="checkbox" class="c37-lp-element c37-lp-form-child c37-item-element" id="'+checkboxModel.get("editingElementID")+'">'+checkboxElement.$el.html()+"</div>"}),{method:formMethod,action:formAction,code:appendCode}}function c37GetPageCSSID(){return jQuery(".c37-lp").attr("id")}function makeFormDroppable(jQuery){var stepContainer=jQuery(".c37-step-container");stepContainer.droppable({accept:".c37-lp-multi-element",activeClass:"active-zone",hoverClass:"drop-zone",drop:function(event,ui){if("false"!=ui.draggable.attr("data-original")){var elementType=ui.draggable.attr("data-c37-type"),elementClass=Templates[elementType],htmlElement=new elementClass;htmlElement.render(),ui.draggable.html(htmlElement.$el);var randomID="c37-step-id-"+Math.floor(1e4*Math.random());ui.draggable.attr("id",randomID),ui.draggable.attr("data-original","false"),makeC37StepDroppable(jQuery),makeC37BoxDroppable(jQuery)}}})}function showLoadingScreen(){var element=document.getElementById("loading-screen");element.classList.remove("hidden")}function hideLoadingScreen(){var element=document.getElementById("loading-screen");element.classList.add("hidden")}function makeC37BoxDroppable(jQuery){var c37Box=jQuery(".c37-box");c37Box.sortable({revert:!0,connectWith:[".c37-box"],handle:".cm-move, .cm-wall-move",start:function(event,ui){"false"===ui.item.attr("data-original")&&ui.item.addClass("c37-sorting-element")},stop:function(event,ui){ui.item.css("width",""),ui.item.css("height",""),jQuery(ui.item).removeAttr("style"),ui.item.removeClass("c37-sorting-element"),makeC37BoxDroppable(jQuery)},out:function(e,u){jQuery(u.sender).removeClass("box-hover-zone")}}),c37Box.droppable({accept:".c37-item-element, .c37-wall-element",activeClass:"box-active-zone",hoverClass:"box-hover-zone",tolerance:"pointer",drop:function(event,ui){if("false"!==ui.draggable.attr("data-original")){if(ui.draggable.hasClass("c37-premium-element")&&!versionNangCap)return void showUpgradeDialog();var elementType=ui.draggable.attr("data-c37-type"),elementClass=Templates[elementType];console.log("typeof elemet model: ",ModelTemplates),console.log("element : ",typeof Templates);var elementModel=c37GetElementModel(!1,elementType),htmlElement=new elementClass({model:elementModel});htmlElement.render(),"wall"===elementType&&ui.draggable.replaceWith(htmlElement.$el.html()),ui.draggable.html(htmlElement.$el);var elementID=elementModel.get("editingElementID");ui.draggable.attr("id",elementID),console.log("elementID: ",elementID),console.log("element type: ",elementType),ui.draggable.attr("data-original","false"),ui.draggable.removeAttr("style")}},out:function(){console.log(jQuery(this))}})}function makeFormSortable(jQuery){var c37LPForm=jQuery(".c37-lp-form");c37LPForm.sortable({handle:".cm-move",revert:!0,connectWith:["form .c37-box"],stop:function(event,ui){ui.item.css("width",""),ui.item.css("height","")}})}function makeC37SectionDroppable(jQuery){var c37Section=jQuery(".c37-section");c37Section.sortable({revert:!0,handle:".cm-row-move",connectWith:[".c37-section"],stop:function(event,ui){ui.item.css("width",""),ui.item.css("height","")}}),c37Section.droppable({accept:".c37-row-element",activeClass:"section-active-zone",hoverClass:"section-drop-zone",drop:function(event,ui){if(console.log("all classes are: ",jQuery(event.srcElement).attr("class")),"false"===ui.draggable.attr("data-original"))return void console.log("no parsing HTML content, already parsed");var rowModel=new RowModel,htmlElement=new Row({model:rowModel});htmlElement.render();var htmlContent=htmlElement.$el.html();console.log("row rendred!!!"),console.log("html content is: ",htmlContent),ui.draggable.replaceWith(htmlContent),ui.draggable.attr("data-original","false"),makeC37BoxDroppable(jQuery)},out:function(){console.log("seciont aout")}})}function makeC37StepDroppable(jQuery){var c37Step=jQuery(".c37-step");c37Step.sortable({revert:!0,handle:".cm-section-move",connectWith:[".c37-step"],stop:function(event,ui){ui.item.css("width",""),ui.item.css("height","")}}),c37Step.droppable({accept:".c37-container-element",activeClass:"step-active-zone",hoverClass:"step-drop-zone",greedy:!0,tolerance:"pointer",drop:function(event,ui){if("false"!==ui.draggable.attr("data-original")){var elementType=ui.draggable.attr("data-c37-type"),elementClass=Templates[elementType],elementModel=new ModelTemplates[elementType],htmlElement=new elementClass({model:elementModel});htmlElement.render(),htmlElement.render();var htmlContent=htmlElement.$el.html();"section"===elementModel.get("etype")?ui.draggable.replaceWith(htmlContent):ui.draggable.html(htmlContent),ui.draggable.attr("id",elementModel.get("editingElementID")),ui.draggable.attr("data-original","false"),makeC37SectionDroppable(jQuery),makeC37BoxDroppable(jQuery)}},out:function(){console.log("out on step")}})}function rgb2hex(rgb){return rgb=rgb.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),rgb&&4===rgb.length?"#"+("0"+parseInt(rgb[1],10).toString(16)).slice(-2)+("0"+parseInt(rgb[2],10).toString(16)).slice(-2)+("0"+parseInt(rgb[3],10).toString(16)).slice(-2):""}function restoreStarsRating(jQuery){jQuery(function(){_.each(jQuery(".c37-lp .c37-star-rating"),function(singleStar){var star=jQuery(singleStar);star.siblings(".br-widget").remove(),console.log(star.find(".br-wrapper").length),console.log("star rendered");var theme=star.attr("data-theme"),showSelectedRating="true"==star.attr("data-show-selected"),showValues="true"==star.attr("data-show-values"),initialRating=star.attr("data-initial-rating"),id=star.attr("id"),starSettings={theme:theme,showSelectedRating:showSelectedRating,showValues:showValues,initialRating:initialRating,allowEmpty:!0};console.log(starSettings),jQuery("#"+id).barrating(starSettings)})})}function renderFontAwesome(){var icons=["fa-address-book","fa-address-book-o","fa-address-card","fa-address-card-o","fa-bandcamp","fa-bath","fa-bathtub","fa-drivers-license","fa-drivers-license-o","fa-eercast","fa-envelope-open","fa-envelope-open-o","fa-etsy","fa-free-code-camp","fa-grav","fa-handshake-o","fa-id-badge","fa-id-card","fa-id-card-o","fa-imdb","fa-linode","fa-meetup","fa-microchip","fa-podcast","fa-quora","fa-ravelry","fa-s15","fa-shower","fa-snowflake-o","fa-superpowers","fa-telegram","fa-thermometer","fa-thermometer-0","fa-thermometer-1","fa-thermometer-2","fa-thermometer-3","fa-thermometer-4","fa-thermometer-empty","fa-thermometer-full","fa-thermometer-half","fa-thermometer-quarter","fa-thermometer-three-quarters","fa-times-rectangle","fa-times-rectangle-o","fa-user-circle","fa-user-circle-o","fa-user-o","fa-vcard","fa-vcard-o","fa-window-close","fa-window-close-o","fa-window-maximize","fa-window-minimize","fa-window-restore","fa-wpexplorer","fa-address-book","fa-address-book-o","fa-address-card","fa-address-card-o","fa-adjust","fa-american-sign-language-interpreting","fa-anchor","fa-archive","fa-area-chart","fa-arrows","fa-arrows-h","fa-arrows-v","fa-asl-interpreting","fa-assistive-listening-systems","fa-asterisk","fa-at","fa-audio-description","fa-automobile","fa-balance-scale","fa-ban","fa-bank","fa-bar-chart","fa-bar-chart-o","fa-barcode","fa-bars","fa-bath","fa-bathtub","fa-battery","fa-battery-0","fa-battery-1","fa-battery-2","fa-battery-3","fa-battery-4","fa-battery-empty","fa-battery-full","fa-battery-half","fa-battery-quarter","fa-battery-three-quarters","fa-bed","fa-beer","fa-bell","fa-bell-o","fa-bell-slash","fa-bell-slash-o","fa-bicycle","fa-binoculars","fa-birthday-cake","fa-blind","fa-bluetooth","fa-bluetooth-b","fa-bolt","fa-bomb","fa-book","fa-bookmark","fa-bookmark-o","fa-braille","fa-briefcase","fa-bug","fa-building","fa-building-o","fa-bullhorn","fa-bullseye","fa-bus","fa-cab","fa-calculator","fa-calendar","fa-calendar-check-o","fa-calendar-minus-o","fa-calendar-o","fa-calendar-plus-o","fa-calendar-times-o","fa-camera","fa-camera-retro","fa-car","fa-caret-square-o-down","fa-caret-square-o-left","fa-caret-square-o-right","fa-caret-square-o-up","fa-cart-arrow-down","fa-cart-plus","fa-cc","fa-certificate","fa-check","fa-check-circle","fa-check-circle-o","fa-check-square","fa-check-square-o","fa-child","fa-circle","fa-circle-o","fa-circle-o-notch","fa-circle-thin","fa-clock-o","fa-clone","fa-close","fa-cloud","fa-cloud-download","fa-cloud-upload","fa-code","fa-code-fork","fa-coffee","fa-cog","fa-cogs","fa-comment","fa-comment-o","fa-commenting","fa-commenting-o","fa-comments","fa-comments-o","fa-compass","fa-copyright","fa-creative-commons","fa-credit-card","fa-credit-card-alt","fa-crop","fa-crosshairs","fa-cube","fa-cubes","fa-cutlery","fa-dashboard","fa-database","fa-deaf","fa-deafness","fa-desktop","fa-diamond","fa-dot-circle-o","fa-download","fa-drivers-license","fa-drivers-license-o","fa-edit","fa-ellipsis-h","fa-ellipsis-v","fa-envelope","fa-envelope-o","fa-envelope-open","fa-envelope-open-o","fa-envelope-square","fa-eraser","fa-exchange","fa-exclamation","fa-exclamation-circle","fa-exclamation-triangle","fa-external-link","fa-external-link-square","fa-eye","fa-eye-slash","fa-eyedropper","fa-fax","fa-feed","fa-female","fa-fighter-jet","fa-file-archive-o","fa-file-audio-o","fa-file-code-o","fa-file-excel-o","fa-file-image-o","fa-file-movie-o","fa-file-pdf-o","fa-file-photo-o","fa-file-picture-o","fa-file-powerpoint-o","fa-file-sound-o","fa-file-video-o","fa-file-word-o","fa-file-zip-o","fa-film","fa-filter","fa-fire","fa-fire-extinguisher","fa-flag","fa-flag-checkered","fa-flag-o","fa-flash","fa-flask","fa-folder","fa-folder-o","fa-folder-open","fa-folder-open-o","fa-frown-o","fa-futbol-o","fa-gamepad","fa-gavel","fa-gear","fa-gears","fa-gift","fa-glass","fa-globe","fa-graduation-cap","fa-group","fa-hand-grab-o","fa-hand-lizard-o","fa-hand-paper-o","fa-hand-peace-o","fa-hand-pointer-o","fa-hand-rock-o","fa-hand-scissors-o","fa-hand-spock-o","fa-hand-stop-o","fa-handshake-o","fa-hard-of-hearing","fa-hashtag","fa-hdd-o","fa-headphones","fa-heart","fa-heart-o","fa-heartbeat","fa-history","fa-home","fa-hotel","fa-hourglass","fa-hourglass-1","fa-hourglass-2","fa-hourglass-3","fa-hourglass-end","fa-hourglass-half","fa-hourglass-o","fa-hourglass-start","fa-i-cursor","fa-id-badge","fa-id-card","fa-id-card-o","fa-image","fa-inbox","fa-industry","fa-info","fa-info-circle","fa-institution","fa-key","fa-keyboard-o","fa-language","fa-laptop","fa-leaf","fa-legal","fa-lemon-o","fa-level-down","fa-level-up","fa-life-bouy","fa-life-buoy","fa-life-ring","fa-life-saver","fa-lightbulb-o","fa-line-chart","fa-location-arrow","fa-lock","fa-low-vision","fa-magic","fa-magnet","fa-mail-forward","fa-mail-reply","fa-mail-reply-all","fa-male","fa-map","fa-map-marker","fa-map-o","fa-map-pin","fa-map-signs","fa-meh-o","fa-microchip","fa-microphone","fa-microphone-slash","fa-minus","fa-minus-circle","fa-minus-square","fa-minus-square-o","fa-mobile","fa-mobile-phone","fa-money","fa-moon-o","fa-mortar-board","fa-motorcycle","fa-mouse-pointer","fa-music","fa-navicon","fa-newspaper-o","fa-object-group","fa-object-ungroup","fa-paint-brush","fa-paper-plane","fa-paper-plane-o","fa-paw","fa-pencil","fa-pencil-square","fa-pencil-square-o","fa-percent","fa-phone","fa-phone-square","fa-photo","fa-picture-o","fa-pie-chart","fa-plane","fa-plug","fa-plus","fa-plus-circle","fa-plus-square","fa-plus-square-o","fa-podcast","fa-power-off","fa-print","fa-puzzle-piece","fa-qrcode","fa-question","fa-question-circle","fa-question-circle-o","fa-quote-left","fa-quote-right","fa-random","fa-recycle","fa-refresh","fa-registered","fa-remove","fa-reorder","fa-reply","fa-reply-all","fa-retweet","fa-road","fa-rocket","fa-rss","fa-rss-square","fa-s15","fa-search","fa-search-minus","fa-search-plus","fa-send","fa-send-o","fa-server","fa-share","fa-share-alt","fa-share-alt-square","fa-share-square","fa-share-square-o","fa-shield","fa-ship","fa-shopping-bag","fa-shopping-basket","fa-shopping-cart","fa-shower","fa-sign-in","fa-sign-language","fa-sign-out","fa-signal","fa-signing","fa-sitemap","fa-sliders","fa-smile-o","fa-snowflake-o","fa-soccer-ball-o","fa-sort","fa-sort-alpha-asc","fa-sort-alpha-desc","fa-sort-amount-asc","fa-sort-amount-desc","fa-sort-asc","fa-sort-desc","fa-sort-down","fa-sort-numeric-asc","fa-sort-numeric-desc","fa-sort-up","fa-space-shuttle","fa-spinner","fa-spoon","fa-square","fa-square-o","fa-star","fa-star-half","fa-star-half-empty","fa-star-half-full","fa-star-half-o","fa-star-o","fa-sticky-note","fa-sticky-note-o","fa-street-view","fa-suitcase","fa-sun-o","fa-support","fa-tablet","fa-tachometer","fa-tag","fa-tags","fa-tasks","fa-taxi","fa-television","fa-terminal","fa-thermometer","fa-thermometer-0","fa-thermometer-1","fa-thermometer-2","fa-thermometer-3","fa-thermometer-4","fa-thermometer-empty","fa-thermometer-full","fa-thermometer-half","fa-thermometer-quarter","fa-thermometer-three-quarters","fa-thumb-tack","fa-thumbs-down","fa-thumbs-o-down","fa-thumbs-o-up","fa-thumbs-up","fa-ticket","fa-times","fa-times-circle","fa-times-circle-o","fa-times-rectangle","fa-times-rectangle-o","fa-tint","fa-toggle-down","fa-toggle-left","fa-toggle-off","fa-toggle-on","fa-toggle-right","fa-toggle-up","fa-trademark","fa-trash","fa-trash-o","fa-tree","fa-trophy","fa-truck","fa-tty","fa-tv","fa-umbrella","fa-universal-access","fa-university","fa-unlock","fa-unlock-alt","fa-unsorted","fa-upload","fa-user","fa-user-circle","fa-user-circle-o","fa-user-o","fa-user-plus","fa-user-secret","fa-user-times","fa-users","fa-vcard","fa-vcard-o","fa-video-camera","fa-volume-control-phone","fa-volume-down","fa-volume-off","fa-volume-up","fa-warning","fa-wheelchair","fa-wheelchair-alt","fa-wifi","fa-window-close","fa-window-close-o","fa-window-maximize","fa-window-minimize","fa-window-restore","fa-wrench","fa-american-sign-language-interpreting","fa-asl-interpreting","fa-assistive-listening-systems","fa-audio-description","fa-blind","fa-braille","fa-cc","fa-deaf","fa-deafness","fa-hard-of-hearing","fa-low-vision","fa-question-circle-o","fa-sign-language","fa-signing","fa-tty","fa-universal-access","fa-volume-control-phone","fa-wheelchair","fa-wheelchair-alt","fa-hand-grab-o","fa-hand-lizard-o","fa-hand-o-down","fa-hand-o-left","fa-hand-o-right","fa-hand-o-up","fa-hand-paper-o","fa-hand-peace-o","fa-hand-pointer-o","fa-hand-rock-o","fa-hand-scissors-o","fa-hand-spock-o","fa-hand-stop-o","fa-thumbs-down","fa-thumbs-o-down","fa-thumbs-o-up","fa-thumbs-up","fa-ambulance","fa-automobile","fa-bicycle","fa-bus","fa-cab","fa-car","fa-fighter-jet","fa-motorcycle","fa-plane","fa-rocket","fa-ship","fa-space-shuttle","fa-subway","fa-taxi","fa-train","fa-truck","fa-wheelchair","fa-wheelchair-alt","fa-genderless","fa-intersex","fa-mars","fa-mars-double","fa-mars-stroke","fa-mars-stroke-h","fa-mars-stroke-v","fa-mercury","fa-neuter","fa-transgender","fa-transgender-alt","fa-venus","fa-venus-double","fa-venus-mars","fa-file","fa-file-archive-o","fa-file-audio-o","fa-file-code-o","fa-file-excel-o","fa-file-image-o","fa-file-movie-o","fa-file-o","fa-file-pdf-o","fa-file-photo-o","fa-file-picture-o","fa-file-powerpoint-o","fa-file-sound-o","fa-file-text","fa-file-text-o","fa-file-video-o","fa-file-word-o","fa-file-zip-o","fa-circle-o-notch","fa-cog","fa-gear","fa-refresh","fa-spinner","fa-check-square","fa-check-square-o","fa-circle","fa-circle-o","fa-dot-circle-o","fa-minus-square","fa-minus-square-o","fa-plus-square","fa-plus-square-o","fa-square","fa-square-o","fa-cc-amex","fa-cc-diners-club","fa-cc-discover","fa-cc-jcb","fa-cc-mastercard","fa-cc-paypal","fa-cc-stripe","fa-cc-visa","fa-credit-card","fa-credit-card-alt","fa-google-wallet","fa-paypal","fa-area-chart","fa-bar-chart","fa-bar-chart-o","fa-line-chart","fa-pie-chart","fa-bitcoin","fa-btc","fa-cny","fa-dollar","fa-eur","fa-euro","fa-gbp","fa-gg","fa-gg-circle","fa-ils","fa-inr","fa-jpy","fa-krw","fa-money","fa-rmb","fa-rouble","fa-rub","fa-ruble","fa-rupee","fa-shekel","fa-sheqel","fa-try","fa-turkish-lira","fa-usd","fa-won","fa-yen","fa-align-center","fa-align-justify","fa-align-left","fa-align-right","fa-bold","fa-chain","fa-chain-broken","fa-clipboard","fa-columns","fa-copy","fa-cut","fa-dedent","fa-eraser","fa-file","fa-file-o","fa-file-text","fa-file-text-o","fa-files-o","fa-floppy-o","fa-font","fa-header","fa-indent","fa-italic","fa-link","fa-list","fa-list-alt","fa-list-ol","fa-list-ul","fa-outdent","fa-paperclip","fa-paragraph","fa-paste","fa-repeat","fa-rotate-left","fa-rotate-right","fa-save","fa-scissors","fa-strikethrough","fa-subscript","fa-superscript","fa-table","fa-text-height","fa-text-width","fa-th","fa-th-large","fa-th-list","fa-underline","fa-undo","fa-unlink","fa-angle-double-down","fa-angle-double-left","fa-angle-double-right","fa-angle-double-up","fa-angle-down","fa-angle-left","fa-angle-right","fa-angle-up","fa-arrow-circle-down","fa-arrow-circle-left","fa-arrow-circle-o-down","fa-arrow-circle-o-left","fa-arrow-circle-o-right","fa-arrow-circle-o-up","fa-arrow-circle-right","fa-arrow-circle-up","fa-arrow-down","fa-arrow-left","fa-arrow-right","fa-arrow-up","fa-arrows","fa-arrows-alt","fa-arrows-h","fa-arrows-v","fa-caret-down","fa-caret-left","fa-caret-right","fa-caret-square-o-down","fa-caret-square-o-left","fa-caret-square-o-right","fa-caret-square-o-up","fa-caret-up","fa-chevron-circle-down","fa-chevron-circle-left","fa-chevron-circle-right","fa-chevron-circle-up","fa-chevron-down","fa-chevron-left","fa-chevron-right","fa-chevron-up","fa-exchange","fa-hand-o-down","fa-hand-o-left","fa-hand-o-right","fa-hand-o-up","fa-long-arrow-down","fa-long-arrow-left","fa-long-arrow-right","fa-long-arrow-up","fa-toggle-down","fa-toggle-left","fa-toggle-right","fa-toggle-up","fa-arrows-alt","fa-backward","fa-compress","fa-eject","fa-expand","fa-fast-backward","fa-fast-forward","fa-forward","fa-pause","fa-pause-circle","fa-pause-circle-o","fa-play","fa-play-circle","fa-play-circle-o","fa-random","fa-step-backward","fa-step-forward","fa-stop","fa-stop-circle","fa-stop-circle-o","fa-youtube-play","fa-500px","fa-adn","fa-amazon","fa-android","fa-angellist","fa-apple","fa-bandcamp","fa-behance","fa-behance-square","fa-bitbucket","fa-bitbucket-square","fa-bitcoin","fa-black-tie","fa-bluetooth","fa-bluetooth-b","fa-btc","fa-buysellads","fa-cc-amex","fa-cc-diners-club","fa-cc-discover","fa-cc-jcb","fa-cc-mastercard","fa-cc-paypal","fa-cc-stripe","fa-cc-visa","fa-chrome","fa-codepen","fa-codiepie","fa-connectdevelop","fa-contao","fa-css3","fa-dashcube","fa-delicious","fa-deviantart","fa-digg","fa-dribbble","fa-dropbox","fa-drupal","fa-edge","fa-eercast","fa-empire","fa-envira","fa-etsy","fa-expeditedssl","fa-fa","fa-facebook","fa-facebook-f","fa-facebook-official","fa-facebook-square","fa-firefox","fa-first-order","fa-flickr","fa-font-awesome","fa-fonticons","fa-fort-awesome","fa-forumbee","fa-foursquare","fa-free-code-camp","fa-ge","fa-get-pocket","fa-gg","fa-gg-circle","fa-git","fa-git-square","fa-github","fa-github-alt","fa-github-square","fa-gitlab","fa-gittip","fa-glide","fa-glide-g","fa-google","fa-google-plus","fa-google-plus-circle","fa-google-plus-official","fa-google-plus-square","fa-google-wallet","fa-gratipay","fa-grav","fa-hacker-news","fa-houzz","fa-html5","fa-imdb","fa-instagram","fa-internet-explorer","fa-ioxhost","fa-joomla","fa-jsfiddle","fa-lastfm","fa-lastfm-square","fa-leanpub","fa-linkedin","fa-linkedin-square","fa-linode","fa-linux","fa-maxcdn","fa-meanpath","fa-medium","fa-meetup","fa-mixcloud","fa-modx","fa-odnoklassniki","fa-odnoklassniki-square","fa-opencart","fa-openid","fa-opera","fa-optin-monster","fa-pagelines","fa-paypal","fa-pied-piper","fa-pied-piper-alt","fa-pied-piper-pp","fa-pinterest","fa-pinterest-p","fa-pinterest-square","fa-product-hunt","fa-qq","fa-quora","fa-ra","fa-ravelry","fa-rebel","fa-reddit","fa-reddit-alien","fa-reddit-square","fa-renren","fa-resistance","fa-safari","fa-scribd","fa-sellsy","fa-share-alt","fa-share-alt-square","fa-shirtsinbulk","fa-simplybuilt","fa-skyatlas","fa-skype","fa-slack","fa-slideshare","fa-snapchat","fa-snapchat-ghost","fa-snapchat-square","fa-soundcloud","fa-spotify","fa-stack-exchange","fa-stack-overflow","fa-steam","fa-steam-square","fa-stumbleupon","fa-stumbleupon-circle","fa-superpowers","fa-telegram","fa-tencent-weibo","fa-themeisle","fa-trello","fa-tripadvisor","fa-tumblr","fa-tumblr-square","fa-twitch","fa-twitter","fa-twitter-square","fa-usb","fa-viacoin","fa-viadeo","fa-viadeo-square","fa-vimeo","fa-vimeo-square","fa-vine","fa-vk","fa-wechat","fa-weibo","fa-weixin","fa-whatsapp","fa-wikipedia-w","fa-windows","fa-wordpress","fa-wpbeginner","fa-wpexplorer","fa-wpforms","fa-xing","fa-xing-square","fa-y-combinator","fa-y-combinator-square","fa-yahoo","fa-yc","fa-yc-square","fa-yelp","fa-yoast","fa-youtube","fa-youtube-play","fa-youtube-square","fa-ambulance","fa-h-square","fa-heart","fa-heart-o","fa-heartbeat","fa-hospital-o","fa-medkit","fa-plus-square","fa-stethoscope","fa-user-md","fa-wheelchair","fa-wheelchair-alt"];0!=jQuery("[data-for=icon]").length&&(jQuery("[data-for=icon]").autocomplete({source:icons,html:!0,select:function(event,ui){jQuery(this).siblings("i").first().attr("class","fa "+ui.item.value)}}).data("ui-autocomplete")._renderItem=function(ul,item){var content='<li><i class="fa '+item.value+'"></i> '+item.value+"</li>";return jQuery(content).appendTo(ul)})}function c37ShadeColor(color,percent){var R=parseInt(color.substring(1,3),16),G=parseInt(color.substring(3,5),16),B=parseInt(color.substring(5,7),16);R=parseInt(R*(100+percent)/100),G=parseInt(G*(100+percent)/100),B=parseInt(B*(100+percent)/100),R=R<255?R:255,G=G<255?G:255,B=B<255?B:255;var RR=1==R.toString(16).length?"0"+R.toString(16):R.toString(16),GG=1==G.toString(16).length?"0"+G.toString(16):G.toString(16),BB=1==B.toString(16).length?"0"+B.toString(16):B.toString(16);return"#"+RR+GG+BB}function getYouTubeID(url){if("undefined"==typeof url||""===url)return"";var regExp=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,match=url.match(regExp);return match&&11==match[2].length?match[2]:url}function enableAccordionStyleTab(){console.log("accord"),jQuery("#style-tab").accordion({header:".section-header",heightStyle:"content",collapsible:!0})}function hideEditPanel(){var editPanel=jQuery("#options-window");editPanel.html(""),editPanel.addClass("c37-hidden")}function c37Hex2rgb(hex){var r=hex.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);return r?r.slice(1,4).map(function(x){return parseInt(x,16)}):(r=hex.match(/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i),r?r.slice(1,4).map(function(x){return 17*parseInt(x,16)}):null)}function c37Hex2rgba(hex,opacity){var o=opacity/100;return"rgba("+c37Hex2rgb(hex).join(",")+","+o+")"}function toggleOptionsWindowSize(){var optionWindow=jQuery("#options-window");optionWindow.toggleClass("options-window-big")}function findIconClass(classString){var faIconPattern=/fa[\-\S]{2,30}/i,faRegex=new RegExp(faIconPattern),resultArray=[];return resultArray=faRegex.exec(classString),null==resultArray?"":resultArray[0]}function populateDataList(selectBox,values,selectedValue){selectBox.append('<option value=""></option>');for(var i=0;i<values.length;i++)selectBox.append('<option value="'+values[i].id+'">'+values[i].text+"</option>");return selectBox.val(selectedValue),selectBox}function showUpgradeDialog(){versionNangCap?swal({title:"One more step...",text:"It seems you haven't activated the plugin. Please go to your site's dasboard, click on WP Lead Plus X to start activating the plugin.",type:"info",showCancelButton:!1,confirmButtonColor:"#F37C39",confirmButtonText:"Got it!",closeOnConfirm:!0,closeOnCancel:!0},function(){}):swal({title:"One more step...",text:"This feature is available in the PRO version only. Upgrade now to unlock it and ALL other features",type:"info",showCancelButton:!0,confirmButtonColor:"#F37C39",confirmButtonText:"Upgrade now!",cancelButtonText:"Maybe later...",closeOnConfirm:!0,closeOnCancel:!0},function(){window.open("http://wpleadplus.com/?src=up_dialog","_blank")})}function c37RenderWebFonts(fontCode){core37Page.pageSettings.webFonts=core37Page.pageSettings.webFonts||[];var encodedFont=encodeURIComponent(fontCode);_.contains(core37Page.pageSettings.webFonts,encodedFont)||(core37Page.pageSettings.webFonts.push(encodedFont),jQuery("head").append(fontCode))}function c37LoadWebFontsForPage(){console.log("loading web fonts..."),jQuery("link[href^='https://fonts.googleapis']").remove(),"undefined"!=typeof core37Page.pageSettings.webFonts&&_.each(core37Page.pageSettings.webFonts,function(f){
jQuery("head").append(decodeURIComponent(f))})}function c37ApplyFontsToEditor(editor){"undefined"!=typeof core37Page.pageSettings.webFonts&&_.each(core37Page.pageSettings.webFonts,function(f){var linkElement=jQuery.parseHTML(decodeURIComponent(f));console.log(jQuery(linkElement).attr("href")),editor.addContentsCss(jQuery(linkElement).attr("href"))})}function c37MakeTabs(element){console.log("creating tabs"),element.tabs({active:0,activate:function(event,ui){ui.oldTab.find("a").removeClass("active-tab"),ui.newTab.find("a").addClass("active-tab")},create:function(event,ui){ui.tab.find("a").addClass("active-tab")}})}function c37CompareEqual(_variable,_value){return"undefined"!=typeof _variable&&_variable===_value}function c37GetValue(varName,type,defaultValue){return"undefined"==typeof varName?defaultValue:"number"===type?isNaN(parseInt(varName))?defaultValue:parseInt(varName):"string"===type?varName:void 0}function c37GetNumber(varName,defaultValue){return"undefined"!=typeof varName?isNaN(parseInt(varName))?defaultValue:parseInt(varName):defaultValue}function c37HasVideoBG(cssStyle){return"undefined"!=typeof cssStyle&&("undefined"!=typeof cssStyle.videoBg&&("undefined"!=typeof cssStyle.videoBg.src&&("youtube"===cssStyle.videoBg.type&&""!==cssStyle.videoBg.src.yt?"youtube":"self-hosted"===cssStyle.videoBg.type&&(""!==cssStyle.videoBg.src.mp4||""!==cssStyle.videoBg.src.webm||""!==cssStyle.videoBg.src.ogv)&&"self-hosted")))}function c37GetValue(input){return isNaN(parseInt(input))?"":(console.log("returning input value: ",input),input)}function getEditForm(name){var element=Forms[name];console.log("getting editing form for ",name);var content=[];if(""!==element.general){var data;data={tab:'<li class="col"><a class="active-tab" href="#general-tab">General</a></li>',tabContent:'<div id="general-tab">'+element.general+jQuery("#wplx-edit-visibility").html()+"</div>"},content.push(data)}"undefined"!=typeof element.advanced&&""!==element.advanced&&content.push({tab:'<li class="col"><a href="#advanced-tab">Advanced</a></li>',tabContent:'<div id="advanced-tab">'+element.advanced+"</div>"}),"undefined"!=typeof element.style&&""!==element.style&&content.push({tab:'<li class="col"><a href="#style-tab">Styles</a></li>',tabContent:'<div id="style-tab">'+element.style+"</div>"}),"undefined"!=typeof element.action&&""!==element.action&&content.push({tab:'<li class="col"><a href="#action-tab">Action</a></li>',tabContent:'<div id="action-tab">'+element.action+"</div>"});var head="",body="";return _.each(content,function(c){head+=c.tab,body+=c.tabContent}),'<div id="settings-micro-panel"><span data-balloon="close the panel" data-balloon-pos="right" id="close-panel"><i class="fa fa-close"></i> </span><span data-balloon="drag to move this panel" data-balloon-pos="right" id="move-panel"><i class="fa fa-arrows"></i> </span><span data-balloon="click to toggle window size" data-balloon-pos="right" id="maximize-panel"><i class="fa fa-window-restore"></i> </span></div><div class="'+element.parentClass+'" id="setting-tabs"><ul id="settings-tab-header" class="d-flex flex-row justify-content-around flex-grow">'+head+"</ul>"+body+'</div><div class="clear"></div>'}function removeElement(){console.log("start removing"),this.editingElement().remove(),jQuery("#element-settings").html("")}function removeSizeClass(element){return element.attr("class",function(i,c){return c.replace(/(^|\s)c37-col-md\S+/g,"")}),element}function renderCSS(){}function prepareOptionWindows(optionsWindow){optionsWindow.removeClass("c37-hidden"),optionsWindow.resizable({handles:"n, e, s, w"}).draggable({stop:function(event,ui){jQuery(ui.helper).css({width:""})}})}!function(e){e(["jquery"],function(e){return function(){function t(e,t,n){return g({type:O.error,iconClass:m().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=m()),v=e("#"+t.containerId),v.length?v:(n&&(v=d(t)),v)}function o(e,t,n){return g({type:O.info,iconClass:m().iconClasses.info,message:e,optionsOverride:n,title:t})}function s(e){C=e}function i(e,t,n){return g({type:O.success,iconClass:m().iconClasses.success,message:e,optionsOverride:n,title:t})}function a(e,t,n){return g({type:O.warning,iconClass:m().iconClasses.warning,message:e,optionsOverride:n,title:t})}function r(e,t){var o=m();v||n(o),u(e,o,t)||l(o)}function c(t){var o=m();return v||n(o),t&&0===e(":focus",t).length?void h(t):void(v.children().length&&v.remove())}function l(t){for(var n=v.children(),o=n.length-1;o>=0;o--)u(e(n[o]),t)}function u(t,n,o){var s=!(!o||!o.force)&&o.force;return!(!t||!s&&0!==e(":focus",t).length||(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){h(t)}}),0))}function d(t){return v=e("<div/>").attr("id",t.containerId).addClass(t.positionClass),v.appendTo(e(t.target)),v}function p(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function f(e){C&&C(e)}function g(t){function o(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(){c(),u(),d(),p(),g(),C(),l(),i()}function i(){var e="";switch(t.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}I.attr("aria-live",e)}function a(){E.closeOnHover&&I.hover(H,D),!E.onclick&&E.tapToDismiss&&I.click(b),E.closeButton&&j&&j.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),E.onCloseClick&&E.onCloseClick(e),b(!0)}),E.onclick&&I.click(function(e){E.onclick(e),b()})}function r(){I.hide(),I[E.showMethod]({duration:E.showDuration,easing:E.showEasing,complete:E.onShown}),E.timeOut>0&&(k=setTimeout(b,E.timeOut),F.maxHideTime=parseFloat(E.timeOut),F.hideEta=(new Date).getTime()+F.maxHideTime,E.progressBar&&(F.intervalId=setInterval(x,10)))}function c(){t.iconClass&&I.addClass(E.toastClass).addClass(y)}function l(){E.newestOnTop?v.prepend(I):v.append(I)}function u(){if(t.title){var e=t.title;E.escapeHtml&&(e=o(t.title)),M.append(e).addClass(E.titleClass),I.append(M)}}function d(){if(t.message){var e=t.message;E.escapeHtml&&(e=o(t.message)),B.append(e).addClass(E.messageClass),I.append(B)}}function p(){E.closeButton&&(j.addClass(E.closeClass).attr("role","button"),I.prepend(j))}function g(){E.progressBar&&(q.addClass(E.progressClass),I.prepend(q))}function C(){E.rtl&&I.addClass("rtl")}function O(e,t){if(e.preventDuplicates){if(t.message===w)return!0;w=t.message}return!1}function b(t){var n=t&&E.closeMethod!==!1?E.closeMethod:E.hideMethod,o=t&&E.closeDuration!==!1?E.closeDuration:E.hideDuration,s=t&&E.closeEasing!==!1?E.closeEasing:E.hideEasing;if(!e(":focus",I).length||t)return clearTimeout(F.intervalId),I[n]({duration:o,easing:s,complete:function(){h(I),clearTimeout(k),E.onHidden&&"hidden"!==P.state&&E.onHidden(),P.state="hidden",P.endTime=new Date,f(P)}})}function D(){(E.timeOut>0||E.extendedTimeOut>0)&&(k=setTimeout(b,E.extendedTimeOut),F.maxHideTime=parseFloat(E.extendedTimeOut),F.hideEta=(new Date).getTime()+F.maxHideTime)}function H(){clearTimeout(k),F.hideEta=0,I.stop(!0,!0)[E.showMethod]({duration:E.showDuration,easing:E.showEasing})}function x(){var e=(F.hideEta-(new Date).getTime())/F.maxHideTime*100;q.width(e+"%")}var E=m(),y=t.iconClass||E.iconClass;if("undefined"!=typeof t.optionsOverride&&(E=e.extend(E,t.optionsOverride),y=t.optionsOverride.iconClass||y),!O(E,t)){T++,v=n(E,!0);var k=null,I=e("<div/>"),M=e("<div/>"),B=e("<div/>"),q=e("<div/>"),j=e(E.closeHtml),F={intervalId:null,hideEta:null,maxHideTime:null},P={toastId:T,state:"visible",startTime:new Date,options:E,map:t};return s(),r(),a(),f(P),E.debug&&console&&console.log(P),I}}function m(){return e.extend({},p(),b.options)}function h(e){v||(v=n()),e.is(":visible")||(e.remove(),e=null,0===v.children().length&&(v.remove(),w=void 0))}var v,C,w,T=0,O={error:"error",info:"info",success:"success",warning:"warning"},b={clear:r,remove:c,error:t,getContainer:n,info:o,options:{},subscribe:s,success:i,version:"2.1.3",warning:a};return b}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)}),function(window,factory){"function"==typeof define&&define.amd?define(["jquery"],function($){return factory(window,$)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=factory(window,require("jquery")):window.lity=factory(window,window.jQuery||window.Zepto)}("undefined"!=typeof window?window:this,function(window,$){"use strict";function transitionEnd(element){var deferred=_deferred();return _transitionEndEvent&&element.length?(element.one(_transitionEndEvent,deferred.resolve),setTimeout(deferred.resolve,500)):deferred.resolve(),deferred.promise()}function settings(currSettings,key,value){if(1===arguments.length)return $.extend({},currSettings);if("string"==typeof key){if("undefined"==typeof value)return"undefined"==typeof currSettings[key]?null:currSettings[key];currSettings[key]=value}else $.extend(currSettings,key);return this}function parseQueryParams(params){for(var p,pairs=decodeURI(params.split("#")[0]).split("&"),obj={},i=0,n=pairs.length;i<n;i++)pairs[i]&&(p=pairs[i].split("="),obj[p[0]]=p[1]);return obj}function appendQueryParams(url,params){return url+(url.indexOf("?")>-1?"&":"?")+$.param(params)}function transferHash(originalUrl,newUrl){var pos=originalUrl.indexOf("#");return-1===pos?newUrl:(pos>0&&(originalUrl=originalUrl.substr(pos)),newUrl+originalUrl)}function error(msg){return $('<span class="lity-error"/>').append(msg)}function imageHandler(target,instance){var desc=instance.opener()&&instance.opener().data("lity-desc")||"Image with no description",img=$('<img src="'+target+'" alt="'+desc+'"/>'),deferred=_deferred(),failed=function(){deferred.reject(error("Failed loading image"))};return img.on("load",function(){return 0===this.naturalWidth?failed():void deferred.resolve(img)}).on("error",failed),deferred.promise()}function inlineHandler(target,instance){var el,placeholder,hasHideClass;try{el=$(target)}catch(e){return!1}return!!el.length&&(placeholder=$('<i style="display:none !important"/>'),hasHideClass=el.hasClass("lity-hide"),instance.element().one("lity:remove",function(){placeholder.before(el).remove(),hasHideClass&&!el.closest(".lity-content").length&&el.addClass("lity-hide")}),el.removeClass("lity-hide").after(placeholder))}function youtubeHandler(target){var matches=_youtubeRegex.exec(target);return!!matches&&iframeHandler(transferHash(target,appendQueryParams("https://www.youtube"+(matches[2]||"")+".com/embed/"+matches[4],$.extend({autoplay:1},parseQueryParams(matches[5]||"")))))}function vimeoHandler(target){var matches=_vimeoRegex.exec(target);return!!matches&&iframeHandler(transferHash(target,appendQueryParams("https://player.vimeo.com/video/"+matches[3],$.extend({autoplay:1},parseQueryParams(matches[4]||"")))))}function facebookvideoHandler(target){var matches=_facebookvideoRegex.exec(target);return!!matches&&(0!==target.indexOf("http")&&(target="https:"+target),iframeHandler(transferHash(target,appendQueryParams("https://www.facebook.com/plugins/video.php?href="+target,$.extend({autoplay:1},parseQueryParams(matches[4]||""))))))}function googlemapsHandler(target){var matches=_googlemapsRegex.exec(target);return!!matches&&iframeHandler(transferHash(target,appendQueryParams("https://www.google."+matches[3]+"/maps?"+matches[6],{output:matches[6].indexOf("layer=c")>0?"svembed":"embed"})))}function iframeHandler(target){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+target+'"/></div>'}function winHeight(){return document.documentElement.clientHeight?document.documentElement.clientHeight:Math.round(_win.height())}function keydown(e){var current=currentInstance();current&&(27===e.keyCode&&current.close(),9===e.keyCode&&handleTabKey(e,current))}function handleTabKey(e,instance){var focusableElements=instance.element().find(_focusableElementsSelector),focusedIndex=focusableElements.index(document.activeElement);e.shiftKey&&focusedIndex<=0?(focusableElements.get(focusableElements.length-1).focus(),e.preventDefault()):e.shiftKey||focusedIndex!==focusableElements.length-1||(focusableElements.get(0).focus(),e.preventDefault())}function resize(){$.each(_instances,function(i,instance){instance.resize()})}function registerInstance(instanceToRegister){1===_instances.unshift(instanceToRegister)&&(_html.addClass("lity-active"),_win.on({resize:resize,keydown:keydown})),$("body > *").not(instanceToRegister.element()).addClass("lity-hidden").each(function(){var el=$(this);void 0===el.data(_dataAriaHidden)&&el.data(_dataAriaHidden,el.attr(_attrAriaHidden)||null)}).attr(_attrAriaHidden,"true")}function removeInstance(instanceToRemove){var show;instanceToRemove.element().attr(_attrAriaHidden,"true"),1===_instances.length&&(_html.removeClass("lity-active"),_win.off({resize:resize,keydown:keydown})),_instances=$.grep(_instances,function(instance){return instanceToRemove!==instance}),show=_instances.length?_instances[0].element():$(".lity-hidden"),show.removeClass("lity-hidden").each(function(){var el=$(this),oldAttr=el.data(_dataAriaHidden);oldAttr?el.attr(_attrAriaHidden,oldAttr):el.removeAttr(_attrAriaHidden),el.removeData(_dataAriaHidden)})}function currentInstance(){return 0===_instances.length?null:_instances[0]}function factory(target,instance,handlers,preferredHandler){var content,handler="inline",currentHandlers=$.extend({},handlers);return preferredHandler&&currentHandlers[preferredHandler]?(content=currentHandlers[preferredHandler](target,instance),handler=preferredHandler):($.each(["inline","iframe"],function(i,name){delete currentHandlers[name],currentHandlers[name]=handlers[name]}),$.each(currentHandlers,function(name,currentHandler){return!currentHandler||(!(!currentHandler.test||currentHandler.test(target,instance))||(content=currentHandler(target,instance),!1!==content?(handler=name,!1):void 0))})),{handler:handler,content:content||""}}function Lity(target,options,opener,activeElement){function ready(result){content=$(result).css("max-height",winHeight()+"px"),element.find(".lity-loader").each(function(){var loader=$(this);transitionEnd(loader).always(function(){loader.remove()})}),element.removeClass("lity-loading").find(".lity-content").empty().append(content),isReady=!0,content.trigger("lity:ready",[self])}var result,element,content,self=this,isReady=!1,isClosed=!1;options=$.extend({},_defaultOptions,options),element=$(options.template),self.element=function(){return element},self.opener=function(){return opener},self.options=$.proxy(settings,self,options),self.handlers=$.proxy(settings,self,options.handlers),self.resize=function(){isReady&&!isClosed&&content.css("max-height",winHeight()+"px").trigger("lity:resize",[self])},self.close=function(){if(isReady&&!isClosed){isClosed=!0,removeInstance(self);var deferred=_deferred();if(activeElement&&(document.activeElement===element[0]||$.contains(element[0],document.activeElement)))try{activeElement.focus()}catch(e){}return content.trigger("lity:close",[self]),element.removeClass("lity-opened").addClass("lity-closed"),transitionEnd(content.add(element)).always(function(){content.trigger("lity:remove",[self]),element.remove(),element=void 0,deferred.resolve()}),deferred.promise()}},result=factory(target,self,options.handlers,options.handler),element.attr(_attrAriaHidden,"false").addClass("lity-loading lity-opened lity-"+result.handler).appendTo("body").focus().on("click","[data-lity-close]",function(e){$(e.target).is("[data-lity-close]")&&self.close()}).trigger("lity:open",[self]),registerInstance(self),$.when(result.content).always(ready)}function lity(target,options,opener){target.preventDefault?(target.preventDefault(),opener=$(this),target=opener.data("lity-target")||opener.attr("href")||opener.attr("src")):opener=$(opener);var instance=new Lity(target,$.extend({},opener.data("lity-options")||opener.data("lity"),options),opener,document.activeElement);if(!target.preventDefault)return instance}var document=window.document,_win=$(window),_deferred=$.Deferred,_html=$("html"),_instances=[],_attrAriaHidden="aria-hidden",_dataAriaHidden="lity-"+_attrAriaHidden,_focusableElementsSelector='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',_defaultOptions={handler:null,handlers:{image:imageHandler,inline:inlineHandler,youtube:youtubeHandler,vimeo:vimeoHandler,googlemaps:googlemapsHandler,facebookvideo:facebookvideoHandler,iframe:iframeHandler},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},_imageRegexp=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,_youtubeRegex=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,_vimeoRegex=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,_googlemapsRegex=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,_facebookvideoRegex=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i,_transitionEndEvent=function(){var el=document.createElement("div"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return transEndEventNames[name];return!1}();return imageHandler.test=function(target){return _imageRegexp.test(target)},lity.version="2.2.2",lity.options=$.proxy(settings,lity,_defaultOptions),lity.handlers=$.proxy(settings,lity,_defaultOptions.handlers),lity.current=currentInstance,$(document).on("click.lity","[data-lity]",lity),lity}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("jquery")):factory(jQuery)}(function($){var BarRating=function(){function BarRating(){var self=this,wrapElement=function(){var classes=["br-wrapper"];""!==self.options.theme&&classes.push("br-theme-"+self.options.theme),self.$elem.wrap($("<div />",{class:classes.join(" ")}))},unwrapElement=function(){self.$elem.unwrap()},findOption=function(value){return $.isNumeric(value)&&(value=Math.floor(value)),$('option[value="'+value+'"]',self.$elem)},getInitialOption=function(){var initialRating=self.options.initialRating;return initialRating?findOption(initialRating):$("option:selected",self.$elem)},getEmptyOption=function(){var $emptyOpt=self.$elem.find('option[value="'+self.options.emptyValue+'"]');return!$emptyOpt.length&&self.options.allowEmpty?($emptyOpt=$("<option />",{value:self.options.emptyValue}),$emptyOpt.prependTo(self.$elem)):$emptyOpt},getData=function(key){var data=self.$elem.data("barrating");return"undefined"!=typeof key?data[key]:data},setData=function(key,value){null!==value&&"object"==typeof value?self.$elem.data("barrating",value):self.$elem.data("barrating")[key]=value},saveDataOnElement=function(){var $opt=getInitialOption(),$emptyOpt=getEmptyOption(),value=$opt.val(),text=$opt.data("html")?$opt.data("html"):$opt.text(),allowEmpty=null!==self.options.allowEmpty?self.options.allowEmpty:!!$emptyOpt.length,emptyValue=$emptyOpt.length?$emptyOpt.val():null,emptyText=$emptyOpt.length?$emptyOpt.text():null;setData(null,{userOptions:self.options,ratingValue:value,ratingText:text,originalRatingValue:value,originalRatingText:text,allowEmpty:allowEmpty,emptyRatingValue:emptyValue,emptyRatingText:emptyText,readOnly:self.options.readonly,ratingMade:!1})},removeDataOnElement=function(){self.$elem.removeData("barrating")},ratingText=function(){return getData("ratingText")},ratingValue=function(){return getData("ratingValue")},buildWidget=function(){var $w=$("<div />",{class:"br-widget"});return self.$elem.find("option").each(function(){var val,text,html,$a;val=$(this).val(),val!==getData("emptyRatingValue")&&(text=$(this).text(),html=$(this).data("html"),html&&(text=html),$a=$("<a />",{href:"#","data-rating-value":val,"data-rating-text":text,html:self.options.showValues?text:""}),$w.append($a))}),self.options.showSelectedRating&&$w.append($("<div />",{text:"",class:"br-current-rating"})),self.options.reverse&&$w.addClass("br-reverse"),self.options.readonly&&$w.addClass("br-readonly"),$w},nextAllorPreviousAll=function(){return getData("userOptions").reverse?"nextAll":"prevAll"},setSelectFieldValue=function(value){findOption(value).prop("selected",!0),self.$elem.change()},resetSelectField=function(){$("option",self.$elem).prop("selected",function(){return this.defaultSelected}),self.$elem.change()},showSelectedRating=function(text){text=text?text:ratingText(),text==getData("emptyRatingText")&&(text=""),self.options.showSelectedRating&&self.$elem.parent().find(".br-current-rating").text(text)},fraction=function(value){return Math.round(Math.floor(10*value)/10%1*100)},resetStyle=function(){self.$widget.find("a").removeClass(function(index,classes){return(classes.match(/(^|\s)br-\S+/g)||[]).join(" ")})},applyStyle=function(){var $all,$fractional,$a=self.$widget.find('a[data-rating-value="'+ratingValue()+'"]'),initialRating=getData("userOptions").initialRating,baseValue=$.isNumeric(ratingValue())?ratingValue():0,f=fraction(initialRating);if(resetStyle(),$a.addClass("br-selected br-current")[nextAllorPreviousAll()]().addClass("br-selected"),!getData("ratingMade")&&$.isNumeric(initialRating)){if(initialRating<=baseValue||!f)return;$all=self.$widget.find("a"),$fractional=$a.length?$a[getData("userOptions").reverse?"prev":"next"]():$all[getData("userOptions").reverse?"last":"first"](),$fractional.addClass("br-fractional"),$fractional.addClass("br-fractional-"+f)}},isDeselectable=function($element){return!(!getData("allowEmpty")||!getData("userOptions").deselectable)&&ratingValue()==$element.attr("data-rating-value")},attachClickHandler=function($elements){$elements.on("click.barrating",function(event){var value,text,$a=$(this),options=getData("userOptions");return event.preventDefault(),value=$a.attr("data-rating-value"),text=$a.attr("data-rating-text"),isDeselectable($a)&&(value=getData("emptyRatingValue"),text=getData("emptyRatingText")),setData("ratingValue",value),setData("ratingText",text),setData("ratingMade",!0),setSelectFieldValue(value),showSelectedRating(text),applyStyle(),options.onSelect.call(self,ratingValue(),ratingText(),event),!1})},attachMouseEnterHandler=function($elements){$elements.on("mouseenter.barrating",function(){var $a=$(this);resetStyle(),$a.addClass("br-active")[nextAllorPreviousAll()]().addClass("br-active"),showSelectedRating($a.attr("data-rating-text"))})},attachMouseLeaveHandler=function($elements){self.$widget.on("mouseleave.barrating blur.barrating",function(){showSelectedRating(),applyStyle()})},fastClicks=function($elements){$elements.on("touchstart.barrating",function(event){event.preventDefault(),event.stopPropagation(),$(this).click()})},disableClicks=function($elements){$elements.on("click.barrating",function(event){event.preventDefault()})},attachHandlers=function($elements){attachClickHandler($elements),self.options.hoverState&&(attachMouseEnterHandler($elements),attachMouseLeaveHandler($elements))},detachHandlers=function($elements){$elements.off(".barrating")},setupHandlers=function(readonly){var $elements=self.$widget.find("a");fastClicks&&fastClicks($elements),readonly?(detachHandlers($elements),disableClicks($elements)):attachHandlers($elements)};this.show=function(){getData()||(wrapElement(),saveDataOnElement(),self.$widget=buildWidget(),self.$widget.insertAfter(self.$elem),applyStyle(),showSelectedRating(),setupHandlers(self.options.readonly),self.$elem.hide())},this.readonly=function(state){"boolean"==typeof state&&getData("readOnly")!=state&&(setupHandlers(state),setData("readOnly",state),self.$widget.toggleClass("br-readonly"))},this.set=function(value){var options=getData("userOptions");self.$elem.find('option[value="'+value+'"]').val()&&(setData("ratingValue",value),setData("ratingText",self.$elem.find('option[value="'+value+'"]').text()),setData("ratingMade",!0),setSelectFieldValue(ratingValue()),showSelectedRating(ratingText()),applyStyle(),options.silent||options.onSelect.call(this,ratingValue(),ratingText()))},this.clear=function(){var options=getData("userOptions");setData("ratingValue",getData("originalRatingValue")),setData("ratingText",getData("originalRatingText")),setData("ratingMade",!1),resetSelectField(),showSelectedRating(ratingText()),applyStyle(),options.onClear.call(this,ratingValue(),ratingText())},this.destroy=function(){var value=ratingValue(),text=ratingText(),options=getData("userOptions");detachHandlers(self.$widget.find("a")),self.$widget.remove(),removeDataOnElement(),unwrapElement(),self.$elem.show(),options.onDestroy.call(this,value,text)}}return BarRating.prototype.init=function(options,elem){return this.$elem=$(elem),this.options=$.extend({},$.fn.barrating.defaults,options),this.options},BarRating}();$.fn.barrating=function(method,options){return this.each(function(){var plugin=new BarRating;if($(this).is("select")||$.error("Sorry, this plugin only works with select fields."),plugin.hasOwnProperty(method)){if(plugin.init(options,this),"show"===method)return plugin.show(options);if(plugin.$elem.data("barrating"))return plugin.$widget=$(this).next(".br-widget"),plugin[method](options)}else{if("object"==typeof method||!method)return options=method,plugin.init(options,this),plugin.show();$.error("Method "+method+" does not exist on jQuery.barrating")}})},$.fn.barrating.defaults={theme:"",initialRating:null,allowEmpty:null,emptyValue:"",showValues:!1,showSelectedRating:!0,deselectable:!0,reverse:!1,readonly:!1,fastClicks:!0,hoverState:!0,silent:!1,onSelect:function(value,text,event){},onClear:function(value,text){},onDestroy:function(value,text){}},$.fn.barrating.BarRating=BarRating});var UPGRADE_TO_UNLOCK_TEMPLATE="It seems you have not activated the PRO version. Please activate it to use this feature",UPGRADE_TO_USE_TEMPLATES="It seems you have not activated the PRO version. Please activate it to use this feature",UPGRADE_TO_USE_IMAGE="Either you have not activated the PRO version or you are using the free version. Please upgrade to use image in your page",UPGRADE_TO_USE_IMAGE_BG="Either you have not activated the PRO version or you are using the free version. Please upgrade to use image as background",UPGRADE_TO_USE_SHORTCODE="Shortcode only available in PRO version. Please upgrade to use this function.",UPGRADE_TO_USE_RATING="Stars rating is available in the PRO version only. Please upgrade to use ratings in your form",UPGRADE_TO_USE_PREMIUM_ELEMENT="This is a premium element. Please upgrade to PRO version to use it",ERROR_MISSING_PAGE_NAME="Please enter a title for your page",SUCCESS_FORM_SAVED="Page saved!",SUCCESS_CODE_SAVED="Code saved!",SUCCESS_EMAIL_SAVED="Email saved!",SUCCESS_SUBSCRIBER_DATA_CLEARED="Subscribers data for currently selected form cleared!",INFO_LOADING_SUBSCRIBERS_DATA="Loading subscribers data",ERROR_PLEASE_SOLVE_CAPTCHA="Please solve the captcha",ERROR_INPUT_NOT_VALID="Your input is not valid! ",INFO_CLEAR_SUBSCRIBERS="Clear subscribers data?",INFO_CLEAR_SUBSCRIBERS_EXPLAIN="You are going to clear subscribers data for currently selected form. This cannot be undone",INFO_SUBSCRIBERS_CLEARED="Subscribers data cleared!",INFO_PLEASE_ACTIVATE="The plugin has not been activated. Please go to the main page and activate it to use all the PRO features",POPUP_OPTION_NAME_MISSING="Popup name is missing",POPUP_OPTION_WHERE_TO_DISPLAY_MISSING="Where to display option is missing",POPUP_OPTION_POPUP_CONTENT_MISSING="Popup content is missing",POPUP_OPTION_CATEGORY_MISSING="Category is missing",POPUP_OPTION_POST_MISSING="Post/page is missing",POPUP_OPTION_POSITION_ON_PAGE_MISSING="Position on page is missing",POPUP_OPTION_HOW_TO_SHOWUP_MISSING="How to show up is missing",POPUP_OPTION_SHOW_UP_DELAY_MISSING="Show up delay (seconds) is missing",POPUP_OPTION_SCROLL_PERCENTAGE_MISSING="Scroll percentage is missing",POPUP_OPTION_AFTER_CLOSE_MISSING="After close/submit is missing",POPUP_OPTION_DAYS_TO_HIDE_MISSING="Days to hide is missing",POPUP_OPTION_SAVED="Popup option saved!",POPUP_OPTION_DELETED="Popup option deleted!",POPUP_OPTION_UPGRADE="Popup is a PRO only feature. Either you haven't activated the plugin or you are using the free version. Upgrade now to PRO version to use it.",WIDGET_OPTION_NAME_MISSING="Widget option's name is missing",WIDGET_OPTION_CONTENT_MISSING="Widget option's content is missing",WIDGET_OPTION_ALIGNMENT_MISSING="Widget option's alignment is missing",WIDGET_OPTION_POSITION_MISSING="Widget option's position is missing",WIDGET_OPTION_WHERE_TO_DISPLAY_MISSING="Widget option's where to display is missing",WIDGET_OPTION_SAVED="Popup option saved!";!function(e,t,n){"use strict";!function o(e,t,n){function a(s,l){if(!t[s]){if(!e[s]){var i="function"==typeof require&&require;if(!l&&i)return i(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return a(n?n:t)},c,c.exports,o,e,t,n)}return t[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)a(n[s]);return a}({1:[function(o,a,r){var s=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var l,i,u,c,d=o("./modules/handle-dom"),f=o("./modules/utils"),p=o("./modules/handle-swal-dom"),m=o("./modules/handle-click"),v=o("./modules/handle-key"),y=s(v),h=o("./modules/default-params"),b=s(h),g=o("./modules/set-params"),w=s(g);r.default=u=c=function(){function o(e){var t=a;return t[e]===n?b.default[e]:t[e]}var a=arguments[0];if(d.addClass(t.body,"stop-scrolling"),p.resetInput(),a===n)return f.logStr("SweetAlert expects at least 1 attribute!"),!1;var r=f.extend({},b.default);switch(typeof a){case"string":r.title=a,r.text=arguments[1]||"",r.type=arguments[2]||"";break;case"object":if(a.title===n)return f.logStr('Missing "title" argument!'),!1;r.title=a.title;for(var s in b.default)r[s]=o(s);r.confirmButtonText=r.showCancelButton?"Confirm":b.default.confirmButtonText,r.confirmButtonText=o("confirmButtonText"),r.doneFunction=arguments[1]||null;break;default:return f.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof a),!1}w.default(r),p.fixVerticalPosition(),p.openModal(arguments[1]);for(var u=p.getModal(),v=u.querySelectorAll("button"),h=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],g=function(e){return m.handleButton(e,r,u)},C=0;C<v.length;C++)for(var S=0;S<h.length;S++){var x=h[S];v[C][x]=g}p.getOverlay().onclick=g,l=e.onkeydown;var k=function(e){return y.default(e,r,u)};e.onkeydown=k,e.onfocus=function(){setTimeout(function(){i!==n&&(i.focus(),i=n)},0)},c.enableButtons()},u.setDefaults=c.setDefaults=function(e){if(!e)throw new Error("userParams is required");
if("object"!=typeof e)throw new Error("userParams has to be a object");f.extend(b.default,e)},u.close=c.close=function(){var o=p.getModal();d.fadeOut(p.getOverlay(),5),d.fadeOut(o,5),d.removeClass(o,"showSweetAlert"),d.addClass(o,"hideSweetAlert"),d.removeClass(o,"visible");var a=o.querySelector(".sa-icon.sa-success");d.removeClass(a,"animate"),d.removeClass(a.querySelector(".sa-tip"),"animateSuccessTip"),d.removeClass(a.querySelector(".sa-long"),"animateSuccessLong");var r=o.querySelector(".sa-icon.sa-error");d.removeClass(r,"animateErrorIcon"),d.removeClass(r.querySelector(".sa-x-mark"),"animateXMark");var s=o.querySelector(".sa-icon.sa-warning");return d.removeClass(s,"pulseWarning"),d.removeClass(s.querySelector(".sa-body"),"pulseWarningIns"),d.removeClass(s.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var e=o.getAttribute("data-custom-class");d.removeClass(o,e)},300),d.removeClass(t.body,"stop-scrolling"),e.onkeydown=l,e.previousActiveElement&&e.previousActiveElement.focus(),i=n,clearTimeout(o.timeout),!0},u.showInputError=c.showInputError=function(e){var t=p.getModal(),n=t.querySelector(".sa-input-error");d.addClass(n,"show");var o=t.querySelector(".sa-error-container");d.addClass(o,"show"),o.querySelector("p").innerHTML=e,setTimeout(function(){u.enableButtons()},1),t.querySelector("input").focus()},u.resetInputError=c.resetInputError=function(e){if(e&&13===e.keyCode)return!1;var t=p.getModal(),n=t.querySelector(".sa-input-error");d.removeClass(n,"show");var o=t.querySelector(".sa-error-container");d.removeClass(o,"show")},u.disableButtons=c.disableButtons=function(){var e=p.getModal(),t=e.querySelector("button.confirm"),n=e.querySelector("button.cancel");t.disabled=!0,n.disabled=!0},u.enableButtons=c.enableButtons=function(){var e=p.getModal(),t=e.querySelector("button.confirm"),n=e.querySelector("button.cancel");t.disabled=!1,n.disabled=!1},"undefined"!=typeof e?e.sweetAlert=e.swal=u:f.logStr("SweetAlert is a frontend module!"),a.exports=r.default},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#8CD4F5",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:"",showLoaderOnConfirm:!1};n.default=o,t.exports=n.default},{}],3:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var a=t("./utils"),r=(t("./handle-swal-dom"),t("./handle-dom")),s=function(t,n,o){function s(e){m&&n.confirmButtonColor&&(p.style.backgroundColor=e)}var u,c,d,f=t||e.event,p=f.target||f.srcElement,m=-1!==p.className.indexOf("confirm"),v=-1!==p.className.indexOf("sweet-overlay"),y=r.hasClass(o,"visible"),h=n.doneFunction&&"true"===o.getAttribute("data-has-done-function");switch(m&&n.confirmButtonColor&&(u=n.confirmButtonColor,c=a.colorLuminance(u,-.04),d=a.colorLuminance(u,-.14)),f.type){case"mouseover":s(c);break;case"mouseout":s(u);break;case"mousedown":s(d);break;case"mouseup":s(c);break;case"focus":var b=o.querySelector("button.confirm"),g=o.querySelector("button.cancel");m?g.style.boxShadow="none":b.style.boxShadow="none";break;case"click":var w=o===p,C=r.isDescendant(o,p);if(!w&&!C&&y&&!n.allowOutsideClick)break;m&&h&&y?l(o,n):h&&y||v?i(o,n):r.isDescendant(o,p)&&"BUTTON"===p.tagName&&sweetAlert.close()}},l=function(e,t){var n=!0;r.hasClass(e,"show-input")&&(n=e.querySelector("input").value,n||(n="")),t.doneFunction(n),t.closeOnConfirm&&sweetAlert.close(),t.showLoaderOnConfirm&&sweetAlert.disableButtons()},i=function(e,t){var n=String(t.doneFunction).replace(/\s/g,""),o="function("===n.substring(0,9)&&")"!==n.substring(9,10);o&&t.doneFunction(!1),t.closeOnCancel&&sweetAlert.close()};o.default={handleButton:s,handleConfirm:l,handleCancel:i},n.exports=o.default},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(n,o,a){Object.defineProperty(a,"__esModule",{value:!0});var r=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},s=function(e,t){r(e,t)||(e.className+=" "+t)},l=function(e,t){var n=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(r(e,t)){for(;n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}},i=function(e){var n=t.createElement("div");return n.appendChild(t.createTextNode(e)),n.innerHTML},u=function(e){e.style.opacity="",e.style.display="block"},c=function(e){if(e&&!e.length)return u(e);for(var t=0;t<e.length;++t)u(e[t])},d=function(e){e.style.opacity="",e.style.display="none"},f=function(e){if(e&&!e.length)return d(e);for(var t=0;t<e.length;++t)d(e[t])},p=function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1},m=function(e){e.style.left="-9999px",e.style.display="block";var t,n=e.clientHeight;return t="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(e).getPropertyValue("padding-top"),10):parseInt(e.currentStyle.padding),e.style.left="",e.style.display="none","-"+parseInt((n+t)/2)+"px"},v=function(e,t){if(+e.style.opacity<1){t=t||16,e.style.opacity=0,e.style.display="block";var n=+new Date,o=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e.style.opacity=+e.style.opacity+(new Date-n)/100,n=+new Date,+e.style.opacity<1&&setTimeout(o,t)});o()}e.style.display="block"},y=function(e,t){t=t||16,e.style.opacity=1;var n=+new Date,o=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e.style.opacity=+e.style.opacity-(new Date-n)/100,n=+new Date,+e.style.opacity>0?setTimeout(o,t):e.style.display="none"});o()},h=function(n){if("function"==typeof MouseEvent){var o=new MouseEvent("click",{view:e,bubbles:!1,cancelable:!0});n.dispatchEvent(o)}else if(t.createEvent){var a=t.createEvent("MouseEvents");a.initEvent("click",!1,!1),n.dispatchEvent(a)}else t.createEventObject?n.fireEvent("onclick"):"function"==typeof n.onclick&&n.onclick()},b=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):e.event&&e.event.hasOwnProperty("cancelBubble")&&(e.event.cancelBubble=!0)};a.hasClass=r,a.addClass=s,a.removeClass=l,a.escapeHtml=i,a._show=u,a.show=c,a._hide=d,a.hide=f,a.isDescendant=p,a.getTopMargin=m,a.fadeIn=v,a.fadeOut=y,a.fireClick=h,a.stopEventPropagation=b},{}],5:[function(t,o,a){Object.defineProperty(a,"__esModule",{value:!0});var r=t("./handle-dom"),s=t("./handle-swal-dom"),l=function(t,o,a){var l=t||e.event,i=l.keyCode||l.which,u=a.querySelector("button.confirm"),c=a.querySelector("button.cancel"),d=a.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(i)){for(var f=l.target||l.srcElement,p=-1,m=0;m<d.length;m++)if(f===d[m]){p=m;break}9===i?(f=-1===p?u:p===d.length-1?d[0]:d[p+1],r.stopEventPropagation(l),f.focus(),o.confirmButtonColor&&s.setFocusStyle(f,o.confirmButtonColor)):13===i?("INPUT"===f.tagName&&(f=u,u.focus()),f=-1===p?u:n):27===i&&o.allowEscapeKey===!0?(f=c,r.fireClick(f,l)):f=n}};a.default=l,o.exports=a.default},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(n,o,a){var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});var s=n("./utils"),l=n("./handle-dom"),i=n("./default-params"),u=r(i),c=n("./injected-html"),d=r(c),f=".sweet-alert",p=".sweet-overlay",m=function(){var e=t.createElement("div");for(e.innerHTML=d.default;e.firstChild;)t.body.appendChild(e.firstChild)},v=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=t.querySelector(f);return e||(m(),e=v()),e}),y=function(){var e=v();return e?e.querySelector("input"):void 0},h=function(){return t.querySelector(p)},b=function(e,t){var n=s.hexToRgb(t);e.style.boxShadow="0 0 2px rgba("+n+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},g=function(n){var o=v();l.fadeIn(h(),10),l.show(o),l.addClass(o,"showSweetAlert"),l.removeClass(o,"hideSweetAlert"),e.previousActiveElement=t.activeElement;var a=o.querySelector("button.confirm");a.focus(),setTimeout(function(){l.addClass(o,"visible")},500);var r=o.getAttribute("data-timer");if("null"!==r&&""!==r){var s=n;o.timeout=setTimeout(function(){var e=(s||null)&&"true"===o.getAttribute("data-has-done-function");e?s(null):sweetAlert.close()},r)}},w=function(){var e=v(),t=y();l.removeClass(e,"show-input"),t.value=u.default.inputValue,t.setAttribute("type",u.default.inputType),t.setAttribute("placeholder",u.default.inputPlaceholder),C()},C=function(e){if(e&&13===e.keyCode)return!1;var t=v(),n=t.querySelector(".sa-input-error");l.removeClass(n,"show");var o=t.querySelector(".sa-error-container");l.removeClass(o,"show")},S=function(){var e=v();e.style.marginTop=l.getTopMargin(v())};a.sweetAlertInitialize=m,a.getModal=v,a.getOverlay=h,a.getInput=y,a.setFocusStyle=b,a.openModal=g,a.resetInput=w,a.resetInputError=C,a.fixVerticalPosition=S},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <div class="sa-confirm-button-container">\n        <button class="confirm" tabIndex="1">OK</button><div class="la-ball-fall">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div></div>';n.default=o,t.exports=n.default},{}],8:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var a=e("./utils"),r=e("./handle-swal-dom"),s=e("./handle-dom"),l=["error","warning","info","success","input","prompt"],i=function(e){var t=r.getModal(),o=t.querySelector("h2"),i=t.querySelector("p"),u=t.querySelector("button.cancel"),c=t.querySelector("button.confirm");if(o.innerHTML=e.html?e.title:s.escapeHtml(e.title).split("\n").join("<br>"),i.innerHTML=e.html?e.text:s.escapeHtml(e.text||"").split("\n").join("<br>"),e.text&&s.show(i),e.customClass)s.addClass(t,e.customClass),t.setAttribute("data-custom-class",e.customClass);else{var d=t.getAttribute("data-custom-class");s.removeClass(t,d),t.setAttribute("data-custom-class","")}if(s.hide(t.querySelectorAll(".sa-icon")),e.type&&!a.isIE8()){var f=function(){for(var o=!1,a=0;a<l.length;a++)if(e.type===l[a]){o=!0;break}if(!o)return logStr("Unknown alert type: "+e.type),{v:!1};var i=["success","error","warning","info"],u=n;-1!==i.indexOf(e.type)&&(u=t.querySelector(".sa-icon.sa-"+e.type),s.show(u));var c=r.getInput();switch(e.type){case"success":s.addClass(u,"animate"),s.addClass(u.querySelector(".sa-tip"),"animateSuccessTip"),s.addClass(u.querySelector(".sa-long"),"animateSuccessLong");break;case"error":s.addClass(u,"animateErrorIcon"),s.addClass(u.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":s.addClass(u,"pulseWarning"),s.addClass(u.querySelector(".sa-body"),"pulseWarningIns"),s.addClass(u.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":c.setAttribute("type",e.inputType),c.value=e.inputValue,c.setAttribute("placeholder",e.inputPlaceholder),s.addClass(t,"show-input"),setTimeout(function(){c.focus(),c.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof f)return f.v}if(e.imageUrl){var p=t.querySelector(".sa-icon.sa-custom");p.style.backgroundImage="url("+e.imageUrl+")",s.show(p);var m=80,v=80;if(e.imageSize){var y=e.imageSize.toString().split("x"),h=y[0],b=y[1];h&&b?(m=h,v=b):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+e.imageSize)}p.setAttribute("style",p.getAttribute("style")+"width:"+m+"px; height:"+v+"px")}t.setAttribute("data-has-cancel-button",e.showCancelButton),e.showCancelButton?u.style.display="inline-block":s.hide(u),t.setAttribute("data-has-confirm-button",e.showConfirmButton),e.showConfirmButton?c.style.display="inline-block":s.hide(c),e.cancelButtonText&&(u.innerHTML=s.escapeHtml(e.cancelButtonText)),e.confirmButtonText&&(c.innerHTML=s.escapeHtml(e.confirmButtonText)),e.confirmButtonColor&&(c.style.backgroundColor=e.confirmButtonColor,c.style.borderLeftColor=e.confirmLoadingButtonColor,c.style.borderRightColor=e.confirmLoadingButtonColor,r.setFocusStyle(c,e.confirmButtonColor)),t.setAttribute("data-allow-outside-click",e.allowOutsideClick);var g=!!e.doneFunction;t.setAttribute("data-has-done-function",g),e.animation?"string"==typeof e.animation?t.setAttribute("data-animation",e.animation):t.setAttribute("data-animation","pop"):t.setAttribute("data-animation","none"),t.setAttribute("data-timer",e.timer)};o.default=i,t.exports=o.default},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var a=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},r=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null},s=function(){return e.attachEvent&&!e.addEventListener},l=function(t){e.console&&e.console.log("SweetAlert: "+t)},i=function(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var n,o,a="#";for(o=0;3>o;o++)n=parseInt(e.substr(2*o,2),16),n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16),a+=("00"+n).substr(n.length);return a};o.extend=a,o.hexToRgb=r,o.isIE8=s,o.logStr=l,o.colorLuminance=i},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document);var core37Page={pageID:0,pageSlug:"",pageContent:{},pageSettings:{webFonts:[],modelsJSON:{},flipCountdown:{},simpleCountdown:{},elementsActions:{},jsCodes:{},compiledCSS:""}},modelsList={};jQuery(function(){var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag),jQuery("#elements-list").tabs();var sectionZero=new Section({model:new SectionModel});sectionZero.render(),jQuery(".c37-lp").html(sectionZero.$el.html()),makeFormDroppable(jQuery),makeC37BoxDroppable(jQuery),makeC37SectionDroppable(jQuery),makeC37StepDroppable(jQuery)});var defaultValues={},popupOptions=[];jQuery.post(ajaxurl,{action:"core37_lp_get_all_menus"},function(response){core37Page.menus=JSON.parse(response)}),jQuery.post(ajaxurl,{action:"core37_lp_get_default_parameters"},function(response){Object.assign(defaultValues,JSON.parse(response))}),jQuery.post(ajaxurl,{action:"core37_lp_load_all_popup_options",title:"text"},function(response){console.log("all poups",decodeURIComponent(response)),popupOptions=JSON.parse(decodeURIComponent(response))});var validation={},C37ElementModel=Backbone.Model.extend({initialize:function(){"undefined"!=typeof this.get("editingElementID")&&this.get("editingElementID")||this.changeElementID(),console.log("new element created with id is: ",this.get("editingElementID")),this.updateJSON(),this.on("change",function(){console.log("model for element ",this.get("editingElementID")," is changing"),this.updateJSON()})},changeElementID:function(){this.set("editingElementID","c37-"+this.get("etype")+"-"+Math.round(1e6*Math.random()))},getElementID:function(){return this.get("editingElementID")},updateJSON:function(){var elementID=this.get("editingElementID");console.log("changing model for element id: ",elementID),core37Page.pageSettings.modelsJSON[elementID]=this.toJSON(),modelsList[elementID]=this},defaults:function(){return getModelDefaults()}}),PageModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{width:700,codes:{trackingCode:"",experimentCode:"",beforeBodyClosing:"",afterBodyOpening:"",metaCode:"",customCSSCode:""},pageTitle:"",pageSlug:"",cssID:jQuery(".c37-lp").attr("id"),editingElementID:"page",etype:"page"})}}),ButtonModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{preset:{style:"c37-button-glow",shape:"",color:"c37-button-primary",size:"c37-button-normal"},action:{},text:"My Button",icon:"fa-paper-plane",etype:"button",type:"",buttonImage:""})}}),SubmitButtonModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{preset:{style:"c37-button-glow",shape:"",color:"c37-button-primary",size:"c37-button-normal"},action:{},size:12,text:"Submit Button",icon:"fa-paper-plane",etype:"button",type:"submit",buttonImage:""})}}),ParagraphModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{content:"This is a paragraph",etype:"paragraph"})}}),TextInputModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{placeholder:"enter text here",icon:"fa-user",type:"text",label:"",required:!1,name:"textinput-"+Math.floor(1e5*Math.random()),id:"c37-text-"+Math.floor(1e5*Math.random()),value:"",etype:"text_input"})}}),YouTubeVideoModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{videoURL:"https://www.youtube.com/embed/Rb0UmrCXxVA",width:560,height:315,hideInfo:!1,hideControls:!1,autoPlay:!1,etype:"youtube"})}}),UnorderedListModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{items:["first item","second item"],icon:"fa-check",listPadding:5,iconBgColor:"#ffffff",iconSize:14,leftPadding:20,iconColor:"#000000",align:"",etype:"ul"})}}),IconModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{icon:"fa-heart-o",align:"c37-left",color:"#000",size:"14px",etype:"icon"})}}),ImageLinkModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{src:"https://wpleadplus.com/wp-content/uploads/2018/03/sample-button.png",alignmentClass:"c37-left",target:"_self",url:"#",etype:"image_link"})}}),ImageModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{src:"https://wpleadplus.com/wp-content/uploads/2018/03/image-placeholder.jpg",alignmentClass:"c37-left",action:{},etype:"image"})}}),TextAreaModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{placeholder:"enter text here",icon:"",label:"",required:!1,name:"textarea-"+Math.floor(1e5*Math.random()),id:"c37-text-area-"+Math.floor(1e5*Math.random()),value:"",etype:"textarea"})}}),FormContainerModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{rawCode:"%3Cform%20action%3D%22https%3A%2F%2Fbinarycarpenter.us17.list-manage.com%2Fsubscribe%2Fpost%3Fu%3Df64172d4d7d98201cc0b0d402%26amp%3Bid%3D35fb4ed9b2%22%20method%3D%22post%22%20%3E%3Cinput%20type%3D%22email%22%20value%3D%22%22%20name%3D%22EMAIL%22%20class%3D%22required%20email%22%20id%3D%22mce-EMAIL%22%3E%3Cinput%20type%3D%22submit%22%20value%3D%22Subscribe%22%20name%3D%22subscribe%22%20id%3D%22mc-embedded-subscribe%22%20class%3D%22button%22%3E%3C%2Fform%3E",code:"",method:"post",action:"",etype:"form_container",styleClass:"c37-form-style-1"})}}),CodeModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{code:"your code here(shortcode, html...)",etype:"code"})}}),LineModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{lineClass:"c37-hr-1",etype:"line"})}}),SimpleCountdownModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{days:0,hours:0,minutes:4,seconds:58,language:"en",type:"countAmount",clockDisplay:"HourlyCounter",daysLabel:"Days",hoursLabel:"Hours",minutesLabel:"Minutes",secondsLabel:"Seconds",action:"do-nothing",actionValue:"",etype:"simple_countdown"})}}),OtherVideosModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{source:"%3Ciframe%20src%3D%22https%3A%2F%2Fplayer.vimeo.com%2Fvideo%2F253135841%22%20width%3D%22640%22%20height%3D%22360%22%20frameborder%3D%220%22%20webkitallowfullscreen%20mozallowfullscreen%20allowfullscreen%3E%3C%2Fiframe%3E",etype:"other_videos"})}}),MenuModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{style:"c37-lp-menu-1",title:"Menu",iconUrl:"",menu:"",itemColor:"#000000",itemSize:"1rem",uppercase:!1,etype:"menu"})}}),SelfHostedVideoModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{mp4:"http://clips.vorwaerts-gmbh.de/VfE_html5.mp4",ogv:"http://clips.vorwaerts-gmbh.de/VfE.ogv",webm:"http://clips.vorwaerts-gmbh.de/VfE.webm",autoplay:!1,poster:"",controls:!0,loop:!1,muted:!1,etype:"self_hosted_video"})}}),BoxModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{horizontal:"",vertical:"",size:{desktop:12,tablet:12,phone:12},direction:"flex-column",etype:"box"})}}),RowModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{horizontal:"",vertical:"",layout:"12",etype:"row"})}}),SectionModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{layout:12,containerClass:"",etype:"section"})}}),WallModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{horizontal:"",vertical:"",layout:"12",etype:"wall"})}}),CheckBoxModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{icon:"",label:"",required:!1,name:"cbox-"+Math.floor(1e5*Math.random()),id:"c37-cbox-"+Math.floor(1e5*Math.random()),options:[{value:"option 1",checked:!1},{value:"option 2",checked:!1}],alignment:"c37-vertical",etype:"checkbox"})}}),RadioModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{icon:"",label:"",required:!1,name:"radio-"+Math.floor(1e5*Math.random()),id:"c37-radio-"+Math.floor(1e5*Math.random()),options:[{value:"option 1",id:"cbox-id-"+Math.floor(1e5*Math.random()),checked:!1},{value:"option 2",checked:!1}],alignment:"c37-vertical",etype:"radio"})}}),SelectModel=C37ElementModel.extend({defaults:function(){return jQuery.extend(!0,{},getModelDefaults(),{placeholder:"enter text here",icon:"",label:"",required:!1,name:"textarea-"+Math.floor(1e5*Math.random()),id:"c37-text-area-"+Math.floor(1e5*Math.random()),value:"",etype:"select",options:[{value:"option 1",selected:!1},{value:"option 2",selected:!1}]})}}),ModelTemplates={checkbox:CheckBoxModel,radio:RadioModel,textarea:TextAreaModel,text:TextInputModel,select:SelectModel,box:BoxModel,button:ButtonModel,row:RowModel,section:SectionModel,paragraph:ParagraphModel,image:ImageModel,youtube:YouTubeVideoModel,self_hosted_video:SelfHostedVideoModel,ul:UnorderedListModel,form_container:FormContainerModel,code:CodeModel,wall:WallModel,menu:MenuModel,line:LineModel,simple_countdown:SimpleCountdownModel,other_videos:OtherVideosModel,page:PageModel,icon:IconModel,image_link:ImageLinkModel};toastr.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-left",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var isActivated=!0;jQuery.post(ajaxurl,{action:"core37_lp_check_activation"},function(response){var data=JSON.parse(response);data.result||(isActivated=!1)});var C37BackendValidation={makeValidationArea:function(code){return'<div class="validation">'+code+"</div>"},validationHTML:{common:jQuery("#wplx-edit-validation-common").html(),min_length:"<label>Min length (characters)</label>",max_length:"<label>Max length (characters)</label>",textInput:"",textarea:"",file:'<label>File type</label><select <% var value=this.model.get(\'file_type\');console.log(value); %> data-for="file-type"><option <%= value==""? "selected" : "" %> value="">Any</option><option <%= value=="image/*"? "selected" : "" %> value="image/*">Images</option><option <%= value=="audio/*"? "selected" : "" %> value="audio/*">Audios</option><option <%= value=="video/*"? "selected" : "" %> value="video/*">Videos</option><option <%= value=="text/html"? "selected" : "" %> value="text/html">HTML Files</option><option <%= value==".doc,.docx,.pdf"? "selected" : "" %> value=".doc,.docx,.pdf">Documents</option></select>'},textValidation:function(){return this.makeValidationArea(this.validationHTML.common+this.validationHTML.textInput)},textAreaValidation:function(){return this.makeValidationArea(this.validationHTML.common)},fileValidation:function(){return this.makeValidationArea(this.validationHTML.common+this.validationHTML.file)}},elementStyle={textColor:jQuery("#wplx-edit-text-color").html(),background:jQuery("#wplx-edit-background").html(),elementSize:jQuery("#wplx-edit-element-width").html(),border:jQuery("#wplx-edit-border").html(),margin:jQuery("#wplx-edit-margin").html(),actionArea:jQuery("#wplx-edit-action-area").html(),boxShadow:jQuery("#wplx-edit-boxshadow").html(),dimensions:jQuery("#wplx-edit-dimensions").html()},advancedArea=jQuery("#advanced-area").html(),textEditOptions={general:jQuery("#wplx-edit-text-input-general").html(),advanced:jQuery("#wplx-edit-text-advanced").html()+advancedArea,action:"",style:elementStyle.background+elementStyle.border+elementStyle.margin+elementStyle.elementSize},iconOptions={general:jQuery("#wplx-edit-icon").html(),style:elementStyle.background+elementStyle.border+elementStyle.margin+elementStyle.elementSize,advanced:""},fileEditOptions={general:'<label>Upload multiple files?</label><input <%= this.model.get(\'multiple\')? "checked" : "" %> type="checkbox" data-for="multiple" /><label>Text</label><input data-for="text" type="text" value="<%= this.model.get(\'text\') %>" placeholder="upload text" /><label>Icon</label><div class="fa-icon"><i class="fa <%= this.model.get(\'icon\') ? this.model.get(\'icon\'): \'\' %>"></i><input <%= versionNangCap ? ""  : "disabled" %> data-for="icon" value="<%= this.model.get(\'icon\')? this.model.get(\'icon\'): \'\' %> " type="text" id="fa-icon-input" /> </div>',advanced:"<label>Field name: </label><input type=\"text\" data-for=\"name\" value=\"<%= this.model.get('name').replace('[','').replace(']','') %>\" />"+C37BackendValidation.fileValidation(this.model),style:"",action:""},checkboxEditOptions={general:jQuery("#wplx-edit-checkbox-general").html(),advanced:jQuery("#wplx-edit-cb-radio-alignment").html()+advancedArea,style:elementStyle.textColor+elementStyle.elementSize,action:""},radioEditOptions={general:jQuery("#wplx-edit-radio-general").html(),advanced:jQuery("#wplx-edit-cb-radio-alignment").html()+advancedArea,style:elementStyle.textColor+elementStyle.elementSize,action:""},labelEditOptions={general:'<label>Content: </label><input type="text" data-for="label" placeholder="enter your label" value="<%= this.model.get(\'content\') %>" /> <input type="checkbox" <%= this.model.get("required") ? "checked" : "" %> data-for="required"> Field is required',advanced:advancedArea,style:elementStyle.background+elementStyle.elementSize,action:null},headingEditOptions={general:'<label>Content: </label><input type="text" data-for="heading" placeholder="enter text content" value="<%= this.model.get(\'content\') %>" /> <label>Type: </label><select <% var tagName = this.model.get(\'tagName\'); %> data-for="tagName"><option <%= tagName=="h1"? "selected" : ""  %> value="h1">h1</option><option <%= tagName=="h2"? "selected" : ""  %>  value="h2">h2</option><option <%= tagName=="h3"? "selected" : ""  %>  value="h3">h3</option><option <%= tagName=="h4"? "selected" : ""  %>  value="h4">h4</option><option <%= tagName=="h5"? "selected" : ""  %>  value="h5">h5</option><option <%= tagName=="h6"? "selected" : ""  %>  value="h6">h6</option></select>',advanced:advancedArea,style:elementStyle.background+elementStyle.elementSize,action:null},paragraphEditOptions={general:jQuery("#wplx-edit-paragraph").html(),advanced:advancedArea,style:elementStyle.textColor+elementStyle.background+elementStyle.border+elementStyle.margin,action:""},textAreaEditOptions={general:'<label>Placeholder: </label><input type="text" data-for="placeholder" placeholder="enter placeholder" value="<%= this.model.get(\'placeholder\') %>" /> <label>Label</label><input value="<%= this.model.get(\'label\') %>" type="text" data-for="input-label" placeholder="enter label" />',advanced:'<label>Field name: </label><input type="text" data-for="name" placeholder="enter field name" value="<%= this.model.get(\'name\') %>" /> '+C37BackendValidation.textAreaValidation(),style:elementStyle.background+elementStyle.elementSize,action:elementStyle.actionArea},buttonEditOptions={general:jQuery("#wplx-edit-button-general").html(),advanced:advancedArea,style:jQuery("#wplx-edit-button-preset").html()+elementStyle.textColor+elementStyle.background+elementStyle.margin+elementStyle.border+elementStyle.elementSize,action:elementStyle.actionArea},dateEditOptions={general:'<label <% var type = this.model.get(\'type\'); %> >Default value: </label><input type="<%= type %>" data-for="default-value" value="<%= this.model.get(\'value\') %>" /><label>Type:</label><select data-for="date-type"><option <%= type=="date"? "selected" : "" %> value="date">Date</option></select>',advanced:'<label>Field name:</label><input type="text" data-for="name" value="<%= this.model.get(\'name\') %>" />',style:elementStyle.background+elementStyle.elementSize,action:elementStyle.actionArea},selectEditOptions={general:jQuery("#wplx-edit-select-general").html(),advanced:'<label>Name</label><input data-for="name" type="text" value="<%= name %>" placeholder="enter a name for your field" />',style:elementStyle.background+elementStyle.elementSize,action:elementStyle.actionArea},acceptanceEditOptions={general:'<label>Text: </label><input type="text" data-for="text" placeholder="enter acceptance text" value="<%= this.model.get(\'text\') %>" /><label>Error message(<small>When not checked</small>)</label><input type="text" data-for="error" placeholder="enter error message" value="<%= this.model.get(\'error_message\') %>" /> ',advanced:'<label>Field name:</label><input disabled type="text" data-for="name" value="<%= this.model.get(\'name\') %>" />',style:elementStyle.background,action:elementStyle.actionArea},rowEditOptions={general:jQuery("#wplx-edit-row").html()+elementStyle.dimensions,advanced:advancedArea,style:elementStyle.background+elementStyle.border+elementStyle.margin+elementStyle.boxShadow,action:elementStyle.actionArea},boxEditOptions={general:jQuery("#wplx-edit-box").html(),style:elementStyle.background+elementStyle.border+elementStyle.margin+elementStyle.boxShadow,advanced:advancedArea,action:""},codeEditOptions={general:'<label>Custom code</label><textarea class="full" placeholder="paste your shortcode here" data-for="code"><%= decodeURIComponent(code) %></textarea>',
style:"",advanced:advancedArea,action:""},pageEditOptions={general:jQuery("#wplx-edit-page-general").html(),advanced:jQuery("#wplx-edit-page-advanced").html(),style:elementStyle.background+elementStyle.margin,action:""},imageEditOptions={general:jQuery("#wplx-edit-image-general").html()+elementStyle.dimensions,advanced:advancedArea,style:elementStyle.background+elementStyle.border+elementStyle.margin+elementStyle.boxShadow,action:elementStyle.actionArea},imageLinkEditOptions={general:jQuery("#wplx-edit-image-link-general").html()+elementStyle.dimensions,advanced:advancedArea,style:elementStyle.background+elementStyle.border+elementStyle.margin+elementStyle.boxShadow,action:""},starsEditOptions={general:'<% var initialRating = this.model.get("initialRating"); var theme = this.model.get("theme"); var id = this.model.get("id"); var optionsString = ""; var options = this.model.get("options"); _.each(options, function(option){ optionsString += option.value + "\\n"; }) %><label>Select style</label><select data-for="theme"><option <%= theme == "fontawesome-stars" ? "selected" : ""  %> value="fontawesome-stars">Round-edges Stars</option><option <%= theme == "css-stars" ? "selected" : ""  %> value="css-stars">Sharp-edges Stars</option><option <%= theme == "bars-1to10" ? "selected" : ""  %> value="bars-1to10">Bars</option><option <%= theme == "bars-horizontal" ? "selected" : ""  %> value="bars-horizontal">Stack bars</option><option <%= theme == "bars-movie" ? "selected" : ""  %> value="bars-movie">Flat bar</option><option <%= theme == "bars-pill" ? "selected" : ""  %> value="bars-pill">Pills</option><option <%= theme == "bars-square" ? "selected" : ""  %> value="bars-square">Blue boxes</option></select><label>Values</label><textarea data-for="options"><%= jQuery.trim(optionsString) %></textarea><label>Initial value</label><select data-for="initial-rating"><% _.each(options, function(option) {  %><option <%= option.value == initialRating ? "selected" : "" %>  value="<%= option.value %>"> <%= option.text %> </option><% }) %></select><label>Show values</label><input <%= this.model.get("showValues")? "checked" : ""%> type="checkbox" data-for="show-labels" /> Show values for each rating<label>Show selected value</label><input <%= this.model.get("showSelectedRating")? "checked" : ""%>  type="checkbox" data-for="show-selected" /> Show currently selected value',advanced:'<label>Field name</label><input data-for="name" type="text" placeholder="set a name for your field" value="<%= this.model.get(\'name\') %>" />'+advancedArea,style:'<label>Stars color</label><input type="color" data-for="star-color" />',action:""},videoEditOptions={general:jQuery("#wplx-edit-youtube").html(),advanced:advancedArea,style:elementStyle.background+elementStyle.border+elementStyle.margin,action:""},hostedVideoOptions={general:jQuery("#wplx-edit-self-hosted-video").html(),advanced:advancedArea,style:elementStyle.background+elementStyle.border+elementStyle.margin,action:""},menuEditOptions={general:jQuery("#wplx-edit-menu-general").html(),style:jQuery("#wplx-edit-menu-item-style").html()+elementStyle.background+elementStyle.margin+elementStyle.boxShadow,advanced:advancedArea,action:""},ulEditOptions={general:'<textarea id="ul-editor"></textarea>',style:elementStyle.background+elementStyle.border+elementStyle.margin+jQuery("#wplx-edit-ul-list-items-style").html(),advanced:advancedArea,action:""},formContainerOptions={general:'<label>Put your form code here</label><textarea data-for="form-code" class="full"><%= decodeURIComponent(rawCode) %></textarea>',style:jQuery("#wplx-edit-form-style").html()+elementStyle.background+elementStyle.border+elementStyle.margin,advanced:advancedArea,action:""},otherVideosContainerOptions={general:jQuery("#wplx-edit-other-video").html(),style:elementStyle.background+elementStyle.border+elementStyle.margin},sectionEdit={style:elementStyle.background+elementStyle.border+elementStyle.margin},lineOptions={general:jQuery("#wplx-edit-line").html()},simpleCountdownOptions={general:jQuery("#wplx-edit-simple-countdown").html(),style:elementStyle.textColor+elementStyle.background+elementStyle.textColor+elementStyle.border+elementStyle.margin,advanced:advancedArea,action:jQuery("#wplx-edit-simple-countdown-action").html()},Forms={textEdit:{general:textEditOptions.general,advanced:textEditOptions.advanced,style:textEditOptions.style,action:textEditOptions.action,parentClass:"for-text"},checkboxEdit:{general:checkboxEditOptions.general,advanced:checkboxEditOptions.advanced,style:checkboxEditOptions.style,action:checkboxEditOptions.action,parentClass:"for-checkbox"},radioEdit:{general:radioEditOptions.general,advanced:radioEditOptions.advanced,style:radioEditOptions.style,action:radioEditOptions.action,parentClass:"for-radio"},labelEdit:{general:labelEditOptions.general,advanced:labelEditOptions.advanced,style:labelEditOptions.style,action:labelEditOptions.action,parentClass:"for-label"},headingEdit:{general:headingEditOptions.general,advanced:headingEditOptions.advanced,style:headingEditOptions.style,action:headingEditOptions.action,parentClass:"for-heading"},paragraphEdit:{general:paragraphEditOptions.general,advanced:paragraphEditOptions.advanced,style:paragraphEditOptions.style,action:paragraphEditOptions.action,parentClass:"for-paragraph"},textAreaEdit:{general:textAreaEditOptions.general,advanced:textAreaEditOptions.advanced,style:textAreaEditOptions.style,action:textAreaEditOptions.action,parentClass:"for-textarea"},buttonEdit:{general:buttonEditOptions.general,advanced:buttonEditOptions.advanced,style:buttonEditOptions.style,action:buttonEditOptions.action,parentClass:"for-button"},dateEdit:{general:dateEditOptions.general,advanced:dateEditOptions.advanced,style:dateEditOptions.style,action:dateEditOptions.action,parentClass:"for-date"},selectEdit:{general:selectEditOptions.general,advanced:selectEditOptions.advanced,style:selectEditOptions.style,action:selectEditOptions.action,parentClass:"for-select"},acceptanceEdit:{general:acceptanceEditOptions.general,advanced:acceptanceEditOptions.advanced,style:acceptanceEditOptions.style,action:acceptanceEditOptions.action,parentClass:"for-acceptance"},pageEdit:{general:pageEditOptions.general,advanced:pageEditOptions.advanced,style:pageEditOptions.style,action:pageEditOptions.action,parentClass:"for-page"},rowEdit:{general:rowEditOptions.general,advanced:rowEditOptions.advanced,style:rowEditOptions.style,action:"",parentClass:"for-row"},fileEdit:{general:fileEditOptions.general,advanced:fileEditOptions.advanced,style:fileEditOptions.style,action:fileEditOptions.action,parentClass:"for-file"},imageEdit:{general:imageEditOptions.general,advanced:imageEditOptions.advanced,style:imageEditOptions.style,action:imageEditOptions.action,parentClass:"for-image"},starsEdit:{general:starsEditOptions.general,advanced:starsEditOptions.advanced,style:"",action:starsEditOptions.action,parentClass:"for-stars"},videoEdit:{general:videoEditOptions.general,advanced:videoEditOptions.advanced,style:videoEditOptions.style,action:videoEditOptions.action,parentClass:"for-video"},selfHostedVideoEdit:{general:hostedVideoOptions.general,advanced:hostedVideoOptions.advanced,style:hostedVideoOptions.style,action:hostedVideoOptions.action,parentClass:"for-self-hosted-video"},ulEdit:{general:ulEditOptions.general,advanced:ulEditOptions.advanced,style:ulEditOptions.style,action:"",parentClass:"for-ul"},menuEdit:{general:menuEditOptions.general,advanced:menuEditOptions.advanced,style:menuEditOptions.style,action:"",parentClass:"for-menu"},formContainerEdit:{general:formContainerOptions.general,advanced:formContainerOptions.advanced,style:formContainerOptions.style,action:formContainerOptions.action,parentClass:"for-form-container"},boxEdit:{general:boxEditOptions.general,style:boxEditOptions.style,advanced:boxEditOptions.advanced,action:boxEditOptions.action,parentClass:"for-box"},codeEdit:{general:codeEditOptions.general,style:codeEditOptions.style,advanced:codeEditOptions.advanced,action:codeEditOptions.action,parentClass:"for-custom-code"},lineEdit:{general:lineOptions.general,style:"",advanced:"",action:"",parentClass:"for-line"},simpleCountdownEdit:{general:simpleCountdownOptions.general,style:simpleCountdownOptions.style,advanced:"",action:simpleCountdownOptions.action,parentClass:"for-simple-countdown"},otherVideosEdit:{general:otherVideosContainerOptions.general,style:otherVideosContainerOptions.style,parentClass:"for-other-videos"},sectionEdit:{general:"",style:sectionEdit.style,parentClass:"for-section"},iconEdit:{general:iconOptions.general,style:iconOptions.style,advanced:iconOptions.advanced,parentClass:"for-icon"},imageLinkEdit:{general:imageLinkEditOptions.general,style:imageLinkEditOptions.style,advanced:imageLinkEditOptions.advanced,parentClass:"for-image-link"}},C37FormElement=Backbone.View.extend({initialize:function(){_.bindAll(this,"render"),"undefined"!=typeof this.model&&this.model.on("change",function(){this.render()},this)},renderSize:function(){if(this.model&&this.model.get("size")){var sizeClass="c37-col-md-"+this.model.get("size").size;this.model.get("size").expand&&(sizeClass+=" c37-col-xs-12");for(var i=1;i<=12;i++)this.$el.removeClass("c37-col-md-"+i);this.$el.addClass(sizeClass)}}}),Heading=C37FormElement.extend({initialize:function(){this.render()},render:function(){}}),Page=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){}}),Paragraph=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-paragraph").html())(this.model.toJSON());return this.$el.html(content),this}}),Icon=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-icon").html())(this.model.toJSON());return this.$el.html(content),this}}),Row=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-row").html())(this.model.toJSON()),innerBox=new Box({model:new BoxModel});innerBox.render();var boxHTML=innerBox.$el.html();content=content.replace("boxPlaceholder",boxHTML),this.$el.html(content)}}),Section=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-section").html())(this.model.toJSON()),innerRowModel=new RowModel,innerRow=new Row({model:innerRowModel});innerRow.render();var rowHTML=innerRow.$el.html();content=content.replace("rowPlaceholder",rowHTML),this.$el.html(content)}}),Box=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-box").html())(this.model.toJSON());this.$el.html(content)}}),Wall=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-wall").html())(this.model.toJSON()),innerBox=new Box({model:new BoxModel});innerBox.render();var boxHTML=innerBox.$el.html();content=content.replace("boxPlaceholder",boxHTML),this.$el.html(content)}}),Step=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},template:_.template('<div class="c37-step c37-style-1 c37-container"><div class="c37-row" id="c37-row-0" data-c37-layout="12"><div id="c37-box'+Math.floor(1e4*Math.random())+'" class="c37-box d-flex flex-column c37-col-md-12"></div></div></div>'),render:function(){this.setElement(this.template({}))}}),CheckBox=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-checkbox").html())(this.model.toJSON());return this.$el.html(content),this}}),Radio=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-radio").html())(this.model.toJSON());return this.$el.html(content),this}}),Menu=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var that=this;if("undefined"==typeof this.model.get("name"))return void console.log("no menu selected");toastr.info("loading menu...");var data=this.model.toJSON();data.action="core37_lp_get_menu_html",jQuery.post(ajaxurl,data,function(response){var data=JSON.parse(response);that.$el.html('<div class="c37-child wplpx-menu '+that.model.get("style")+'">'+decodeURIComponent(data.content)+"</div>"),toastr.remove(),toastr.success("menu loaded!")})},template:_.template("")}),TextInput=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-text-input").html())(this.model.toJSON());return this.$el.html(content),this}}),DateInput=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<i class="fa fa-calendar c37-suggest-icon"></i><input class="c37-child" name="<%= name %>" type="date"/>'),render:function(){if(this.model){var dateElement='<i class="fa fa-calendar c37-suggest-icon"></i><input name="'+this.model.get("name")+'" type="'+this.model.get("type")+'" value="'+this.model.get("value")+'"/>';this.$el.html(dateElement)}else this.$el.html(this.template({name:"date_input_"+Math.floor(1e3*Math.random())}))}}),Select=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-select").html())(this.model.toJSON());return this.$el.html(content),this}}),Label=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<label for="<%= forID %>"><%= content %></label>'),render:function(){if(this.model)if(this.model.get("required"))this.$el.html("<label>"+this.model.get("content")+'<sup class="required">*</sup></label>');else{var content=this.model.get("content");this.$el.html(this.template({forID:"input_"+Math.floor(1e3*Math.random()),content:content}))}else this.$el.html(this.template({forID:"input_"+Math.floor(1e3*Math.random()),content:"Label"}));this.renderSize()}}),Button=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-button").html())(this.model.toJSON());return this.$el.html(content),this}}),InputSubmit=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-input-submit").html())(this.model.toJSON());return this.$el.html(content),this}}),TextArea=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<i class="fa fa-edit c37-suggest-icon"></i><textarea id="<%= id %>" class="c37-child" name="<%= name %>" placeholder="enter something"></textarea>'),render:function(){if(this.model){var required=this.model.get("required")?"required":"",content="";"undefined"!=typeof this.model.get("label")&&""!=this.model.get("label")&&(content+='<label for="'+this.model.get("cssID")+'">'+this.model.get("label")+"</label>"),content+='<i class="fa fa-edit c37-suggest-icon"></i><textarea id="'+this.model.get("cssID")+'" class="c37-child" '+required+' name="'+this.model.get("name")+'" placeholder="'+this.model.get("placeholder")+'"></textarea>',this.$el.html(content),this.renderSize()}else this.$el.html(this.template({name:"textarea_"+Math.floor(1e3*Math.random()),id:"textarea_"+Math.floor(1e3*Math.random())}))}}),File=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<div class="c37-child"></label><input id="<%= field_id %>" class="c37-child" name="<%= name %>" type="file" /><label class="c37-file-label" for="<%= field_id %>"><i class="fa fa-cloud-upload"></i> <%= text %> </div>'),render:function(){if(this.model){var multiple=this.model.get("multiple")?"multiple":"",name=this.model.get("multiple")?this.model.get("name"):this.model.get("name"),required=this.model.get("required")?"required":"",accept=this.model.get("file_type")?'accept="'+this.model.get("file_type")+'"':"",icon=this.model.get("icon"),text=this.model.get("text"),content='<div class="c37-child"><label class="c37-file-label" for="'+this.model.get("field_id")+'"><i class="fa '+icon+'"></i>'+text+"</label><input "+required+' type="file" id="'+this.model.get("field_id")+'" name="'+name+'" '+multiple+" "+accept+" /></div>";this.$el.html(content)}else this.$el.html(this.template({name:"attachment_"+Math.floor(1e3*Math.random()),field_id:"c37_attachment_"+Math.floor(1e4*Math.random()),text:"Select file..."}))}}),Acceptance=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<input class="c37-acceptance" id="<%= id %>" data-error="Please accept this" name="<%= name %>" type="checkbox" /><label for="<%= id %>" class="c37-acceptangvcd-label"></label> <span class="c37-child">I agree with terms of service</span>'),render:function(){if(this.model){console.log(this.model);var content='<input id="'+this.model.get("id")+'" data-error="'+this.model.get("error_message")+'" class="c37-acceptance" name="'+this.model.get("name")+'" type="checkbox" /><label for="'+this.model.get("id")+'" class="c37-acceptangvcd-label"></label> <span class="c37-child">'+this.model.get("text")+"</span>";this.$el.html(content)}else this.$el.html(this.template({name:"acceptance",id:"acceptance_id_"+Math.floor(1e4*Math.random())}))}}),ReCaptcha=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<div class="g-recaptcha" data-sitekey="<%= site_key %>"></div>'),render:function(){}}),Countdown=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<div id="<%= gvcdID %>" class="gvcd-countdown gvcd-countdown--theme-10"><div class="gvcd-unit-wrap  <%= displayDays? \'c37-hidden\' : \'\' %>"><div class="days"></div><span class="gvcd-days-label"></span></div><div class="gvcd-unit-wrap  <%= displayHours? \'c37-hidden\' : \'\' %>"><div class="hours"></div><span class="gvcd-hours-label"></span></div><div class="gvcd-unit-wrap  <%= displayMinutes? \'c37-hidden\' : \'\' %>"><div class="minutes"></div><span class="gvcd-minutes-label"></span></div><div class="gvcd-unit-wrap  <%= displaySeconds? \'c37-hidden\' : \'\' %>"><div class="seconds"></div><span class="gvcd-seconds-label"></span></div></div>'),render:function(){if("undefined"!=typeof this.model){var model=this.model;this.$el.html(this.template({displayDays:model.get("displayDays"),displayHours:model.get("displayHours"),displayMinutes:model.get("displayMinutes"),displaySeconds:model.get("displaySeconds"),gvcdID:model.get("editingElementID")}))}}}),FlipCountdown=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},template:_.template('<div class="c37-clock"></div>'),render:function(){return this.$el.html(this.template(this.model.toJSON())),this.renderClock(),this},renderClock:function(){var clock,clockDisplay=this.model.get("clockDisplay"),totalTime=3600*parseInt(this.model.get("days"))*24+3600*parseInt(this.model.get("hours"))+60*parseInt(this.model.get("minutes"))+parseInt(this.model.get("seconds")),language=this.model.get("language"),element=jQuery("#"+this.model.get("editingElementID")+" .c37-clock");clock=element.FlipClock({clockFace:clockDisplay,autoStart:!1,language:language,callbacks:{stop:function(){}}}),clock.setTime(totalTime),clock.setCountdown(!0),clock.start()}}),SimpleCountdown=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},template:_.template(jQuery("#wplx-simple-countdown").html()),render:function(){console.log("rendering countdown");var model;model=this.model,console.log("model is: ",model.toJSON()),this.$el.html(this.template(model.toJSON()));var second=1e3,minute=60*second,hour=60*minute,day=24*hour,distance=0;distance="countAmount"===this.model.get("type")?1e3*(3600*parseInt(this.model.get("days"))*24+3600*parseInt(this.model.get("hours"))+60*parseInt(this.model.get("minutes"))+parseInt(this.model.get("seconds"))):new Date(this.model.get("date")).getTime()-(new Date).getTime(),console.log("distance is: ",this.model),jQuery("#"+model.get("editingElementID")+" .simple-countdown-days .cd-number").html(Math.floor(distance/day)<10?"0"+Math.floor(distance/day):Math.floor(distance/day)),jQuery("#"+model.get("editingElementID")+" .simple-countdown-hours .cd-number").html(Math.floor(distance%day/hour)<10?"0"+Math.floor(distance%day/hour):Math.floor(distance%day/hour)),jQuery("#"+model.get("editingElementID")+" .simple-countdown-minutes .cd-number").html(Math.floor(distance%hour/minute)<10?"0"+Math.floor(distance%hour/minute):Math.floor(distance%hour/minute)),jQuery("#"+model.get("editingElementID")+" .simple-countdown-seconds .cd-number").html(Math.floor(distance%minute/second)<10?"0"+Math.floor(distance%minute/second):Math.floor(distance%minute/second))}}),FieldSet=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<fieldset class="c37-box"><legend>Fieldset legend:</legend></fieldset>'),render:function(){this.setElement(this.template({}))}}),Image=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-image").html())(this.model.toJSON());return this.$el.html(content),this}}),ImageLink=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-image-link").html())(this.model.toJSON());return this.$el.html(content),this}}),FormContainer=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},template:_.template(jQuery("#wplx-form-container").html()),render:function(){var parsedForm=c37CleanForm(this.model.get("rawCode"));this.$el.html(this.template({method:parsedForm.method,code:parsedForm.code,action:parsedForm.action,styleClass:this.model.get("styleClass")})),makeFormSortable(jQuery),makeC37BoxDroppable(jQuery)}}),Stars=C37FormElement.extend({initialize:function(){this.render()},template:_.template('<select name="<%= name %>" data-show-selected="false" data-show-values="false" data-initial-rating="1" data-theme="<%= theme %>" class="c37-star-rating" id="<%= id %>"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select>'),render:function(){var id="";if(this.model){var optionHTML="",model=this.model;_.each(this.model.get("options"),function(singleStar){optionHTML+='<option value="'+singleStar.value+'">'+singleStar.text+"</option>"}),this.$el.html('<select data-theme="'+model.get("theme")+'" class="c37-star-rating" id="'+model.get("id")+'"data-initial-rating="'+model.get("initialRating")+'"data-show-selected="'+model.get("showSelectedRating")+'"data-show-values="'+model.get("showValues")+'"name="'+model.get("name")+'"">'+optionHTML+"</select>"),id=model.get("id"),console.log("render with model")}else id="star-id-"+Math.floor(1e4*Math.random()),this.$el.html(this.template({id:id,theme:defaultValues.starsRatingOptions.theme,name:"star-"+Math.round(1e4*Math.random())}));this.renderRating(id)},renderRating:function(id){var self=this;jQuery(function(){id="#"+id,self.model&&(console.log("rendering with theme: "+self.model.get("theme")),defaultValues.starsRatingOptions.theme=self.model.get("theme"),defaultValues.starsRatingOptions.showValues=self.model.get("showValues"),defaultValues.starsRatingOptions.initialRating=self.model.get("initialRating"),defaultValues.starsRatingOptions.showSelectedRating=self.model.get("showSelectedRating")),setTimeout(function(){jQuery(id).barrating(defaultValues.starsRatingOptions)},0)})}}),YouTubeVideo=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-youtube").html())(this.model.toJSON());return this.$el.html(content),this}}),OtherVideos=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){return console.log("modeol: ",this.model.toJSON()),this.$el.html(_.template(jQuery("#wplx-other-video").html())(this.model.toJSON())),this}}),SelfHostedVideo=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){this.$el.html(this.template(this.model.toJSON()))},template:_.template(jQuery("#wplx-self-hosted").html())}),UnorderedList=C37FormElement.extend({initialize:function(){_.bindAll(this,"render"),this.model.bind("change",this.render),this.render()},render:function(){"undefined"==typeof this.model.get("items")&&this.model.set("items",["first item","second item"]);var content=_.template(jQuery("#wplx-ul").html())(this.model.toJSON());this.$el.html(content)}}),Code=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-code").html())(this.model.toJSON());return this.$el.html(content),this}}),Line=C37FormElement.extend({initialize:function(){C37FormElement.prototype.initialize.apply(this,arguments)},render:function(){var content=_.template(jQuery("#wplx-line").html())(this.model.toJSON());return this.$el.html(content),this}}),Templates={checkbox:CheckBox,radio:Radio,textarea:TextArea,text:TextInput,date:DateInput,select:Select,label:Label,file:File,button:Button,input_submit:InputSubmit,acceptance:Acceptance,row:Row,section:Section,box:Box,heading:Heading,paragraph:Paragraph,step:Step,fieldset:FieldSet,recaptcha:ReCaptcha,image:Image,stars:Stars,youtube:YouTubeVideo,self_hosted_video:SelfHostedVideo,ul:UnorderedList,form_container:FormContainer,code:Code,wall:Wall,menu:Menu,line:Line,countdown:Countdown,simple_countdown:SimpleCountdown,other_videos:OtherVideos,icon:Icon,image_link:ImageLink},ElementEditView=Backbone.View.extend({el:"#element-settings",originalEvents:{"change .validation input":"renderValidation","change .element-action select":"renderAction","input .element-action input":"renderAction","change .element-action input[type=checkbox]":"renderAction","input .css-styles input":"renderStyle","change .css-styles select":"renderStyle","click .css-styles input[type=checkbox]":"renderStyle","click .css-styles input[type=radio]":"renderStyle","blur [data-for=custom-css]":"applyCustomCSS","blur [data-for=inner-selector]":"renderStyle","blur [data-for=extra-classes]":"applyExtraClass","blur [data-for=background-video-youtube]":"renderBackgroundVideo","click #change-background-image":"changeImageBg","click #remove-background-image":"removeImageBg","click [data-for=clear-bg-color]":"clearBgColor","click [data-for=background-color] .reset-hover-color":"clearHoverBgColor","focus [data-for=border-width]":"showBorderOptions","focus [data-for=border-radius]":"showBorderRadiusOptions","click [data-for=clear-text-color]":"clearTextColor","click [data-for=visibility] input":"visibilityManager"},renderBackgroundVideo:function(){var YTID=getYouTubeID(this.$el.find("[data-for=background-video-youtube]").val()),element=jQuery("#"+this.model.get("editingElementID"));if(this.model.get("cssStyle").videoBg.src.yt=YTID,element.find(".c37-yt-bg").remove(),element.remove("c37-has-yt-bg"),""!==YTID){var insertContent='<div class="c37-video-bg-overlay c37-hide-in-editor"></div><div class="c37-yt-bg c37-hide-in-editor"><iframe src="https://www.youtube.com/embed/'+YTID+'?controls=0&&mute=1&showinfo=0&modestbranding=0&rel=0&autoplay=1&loop=1" frameborder="0" allowfullscreen></iframe>';element.addClass("c37-has-yt-bg"),element.prepend(insertContent)}},visibilityManager:function(){var hidePhone=this.$el.find("[data-for=phone]").first().is(":checked"),hideDesktop=this.$el.find("[data-for=desktop]").first().is(":checked"),hideTablet=this.$el.find("[data-for=tablet]").first().is(":checked"),element=jQuery("#"+this.model.get("editingElementID"));element.removeClass("c37-d-none c37-d-sm-block c37-d-md-none c37-d-sm-none c37-d-md-block"),hidePhone&&hideTablet&&hideDesktop?element.addClass("c37-d-none"):!hidePhone||hideTablet||hideDesktop?hidePhone||hideTablet||!hideDesktop?hidePhone||!hideTablet||hideDesktop?!hidePhone&&hideTablet&&hideDesktop?element.addClass("c37-d-sm-none"):hidePhone&&hideTablet&&!hideDesktop?element.addClass("c37-d-none c37-d-md-block"):hidePhone&&!hideTablet&&hideDesktop&&element.addClass("c37-d-none c37-d-sm-block c37-d-md-none"):element.addClass("c37-d-sm-none c37-d-md-block"):element.addClass("c37-d-md-none"):element.addClass("c37-d-none c37-d-sm-block"),this.model.set("hidden",{phone:hidePhone,tablet:hideTablet,desktop:hideDesktop})},applyCustomCSS:function(){console.log("entering custom code");var customCSS=this.$el.find("[data-for=custom-css]").length?this.$el.find("[data-for=custom-css]").val():"";this.model.get("cssStyle").customCSS=encodeURIComponent(customCSS),jQuery("[data-custom-css="+this.model.get("editingElementID")+"]").remove(),jQuery("head").append('<style class="c37-custom-css" data-custom-css="'+this.model.get("editingElementID")+'"> '+customCSS+" </style>")},showBorderRadiusOptions:function(){this.$el.find("#c37-border-width-settings").hide(),this.$el.find("#c37-border-radius-settings").show()},showBorderOptions:function(){this.$el.find("#c37-border-radius-settings").hide(),this.$el.find("#c37-border-width-settings").show()},additionalEvents:{},events:function(){return _.extend({},this.originalEvents,this.additionalEvents)},clearTextColor:function(){this.$el.find("[data-for=text-color] input").first().val("#fffffa"),console.log("clearing text color"),this.renderStyle()},clearBgColor:function(){this.$el.find("[data-for=background-color]").first().val("#fffffa"),this.renderStyle()},clearHoverBgColor:function(){this.$el.find("[data-for=background-color] input.element-hover-bg-color").first().val("#fffffa"),this.renderStyle()},removeImageBg:function(){this.$el.find(".c37-image-preview").first().attr("src",""),this.$el.find("[data-for=background-image] input").first().val(""),this.renderStyle()},renderSizeObject:function(){},renderValidation:function(){console.log("render in parent, change event");var validationDiv=this.$el.find(".validation").first(),required=jQuery(validationDiv).find("input[data-for=required]").first().is(":checked")?"required":"",elementID=this.model.get("editingElementID"),elementName=this.$el.find("[data-for=name]").val();"required"===required&&this.model.set({required:!0}),validation[elementID]={name:elementName,rules:{required:required}}},renderAction:function(){var currentElement=this,$el=currentElement.$el,editingElementID=currentElement.model.get("editingElementID");if("undefined"==typeof editingElementID)return void console.log("no element ID");var triggerDiv=$el.find(".element-action [data-for=trigger]").first(),actionDiv=$el.find(".element-action [data-for=action]").first(),targetURLDiv=$el.find(".element-action [data-for=target-url]").first(),targetPopupDiv=$el.find(".element-action [data-for=target-popup]").first(),trigger=triggerDiv.find("select").first().val(),action=actionDiv.find("select").first().val();if(console.log("trigger: ",trigger),console.log("action: ",action),"no-trigger"===trigger)return delete core37Page.pageSettings.elementsActions[editingElementID],jQuery(actionDiv).hide(),void jQuery(targetURLDiv).hide();"click"===trigger&&(actionDiv.show(),"open-link"===action?(console.log("open some link"),targetURLDiv.show(),targetPopupDiv.hide()):"open-popup"===action?(targetURLDiv.hide(),targetPopupDiv.show()):(targetPopupDiv.hide(),targetURLDiv.hide()));
var actionObject={},editingElement=jQuery("#"+editingElementID);actionObject["element-type"]=editingElement.attr("data-c37-type"),actionObject.trigger=trigger,actionObject.action=action,actionObject["element-id"]=editingElementID,actionObject["new-tab"]=targetURLDiv.find("input[type=checkbox]").is(":checked"),"open-link"===action?actionObject.target=encodeURI(targetURLDiv.find("input").first().val()):"open-popup"===action&&(actionObject["popup-id"]=targetPopupDiv.find("select").first().val()),core37Page.pageSettings.elementsActions[editingElementID]=actionObject},getUnitValue:function(input){return"undefined"==typeof input?"":input.indexOf("em")!==-1||input.indexOf("%")!==-1||input.indexOf("pt")!==-1||input.indexOf("px")!==-1||input.indexOf("vh")!==-1||input.indexOf("vw")!==-1||input.indexOf("rem")!==-1?input:isNaN(parseInt(input))?"":input+"px"},renderStyle:function(){var textColor=(this.model.get("editingElementID"),this.$el.find("[data-for=text-color]").length?this.$el.find("[data-for=text-color]").first().val():""),fontSize=this.$el.find("[data-for=font-size]").length?this.$el.find("[data-for=font-size]").first().val():"",fontWeight=this.$el.find("[data-for=font-bold]").length&&this.$el.find("[data-for=font-bold]").first().is(":checked")?"bold":"",lineHeight=this.$el.find("[data-for=line-height]").length?this.$el.find("[data-for=line-height]").val():"",fontItalic=this.$el.find("[data-for=font-italic]").length&&this.$el.find("[data-for=font-italic]").first().is(":checked")?"italic":"",backgroundAttachment=this.$el.find("[data-for=background-attachment]").first().val(),backgroundImage=this.$el.find("#background-image-preview").first().attr("src");console.log("bg image is: ",backgroundImage);var backgroundColor=this.$el.find("[data-for=background-color]").first().val(),backgroundColorOpacity=this.$el.find("[data-for=background-opacity]").first().val();console.log("opacity is: ",backgroundColorOpacity);var backgroundImageRepeat=this.$el.find("[data-for=background-repeat]").first().val(),backgroundSize=this.$el.find("[data-for=background-size]").first().val(),backgroundImagePositionX=this.$el.find("[data-for=background-position-x]").first().val(),backgroundImagePositionY=this.$el.find("[data-for=background-position-y]").first().val(),width=this.$el.find("[data-for=width]").length?this.$el.find("[data-for=width]").first().val():"",height=this.$el.find("[data-for=height]").length?this.$el.find("[data-for=height]").first().val():"",maxWidth=this.$el.find("[data-for=max-width]").length?this.$el.find("[data-for=max-width]").first().val():"",maxHeight=this.$el.find("[data-for=max-height]").length?this.$el.find("[data-for=max-height]").first().val():"",boxShadowInset=this.$el.find("[data-for=box-shadow-inset]").first().is(":checked"),boxShadowColor=this.$el.find("[data-for=box-shadow-color]").first().val(),boxShadowOpacity=this.$el.find("[data-for=box-shadow-opacity]").first().val(),boxShadowOffsetX=this.$el.find("[data-for=box-shadow-offset-x]").first().val(),boxShadowOffsetY=this.$el.find("[data-for=box-shadow-offset-y]").first().val(),boxShadowBlurRadius=this.$el.find("[data-for=box-shadow-blur-radius]").first().val(),boxShadowSpreadRadius=this.$el.find("[data-for=box-shadow-spread-radius]").first().val(),backgroundOverlayColor=this.$el.find("[data-for=background-overlay-color]").first().val(),backgroundOverlayOpacity=this.$el.find("[data-for=background-overlay-opacity]").first().val(),borderWidth=this.$el.find("#c37-border-settings [data-for=border-width]").first().val(),borderColor=this.$el.find("#c37-border-settings [data-for=border-color]").first().val(),borderRadius=this.$el.find("#c37-border-settings [data-for=border-radius]").first().val(),borderStyle=this.$el.find("#c37-border-settings [data-for=border-style]").first().val(),brDimension={topLeft:this.$el.find("#c37-border-radius-settings [data-for=border-top-left-radius]").first().val(),topRight:this.$el.find("#c37-border-radius-settings [data-for=border-top-right-radius]").first().val(),bottomLeft:this.$el.find("#c37-border-radius-settings [data-for=border-bottom-left-radius]").first().val(),bottomRight:this.$el.find("#c37-border-radius-settings [data-for=border-bottom-right-radius]").first().val()},singleBorderWidth={top:this.$el.find("#c37-border-width-settings [data-for=border-top-width]").first().val(),bottom:this.$el.find("#c37-border-width-settings [data-for=border-bottom-width]").first().val(),right:this.$el.find("#c37-border-width-settings [data-for=border-right-width]").first().val(),left:this.$el.find("#c37-border-width-settings [data-for=border-left-width]").first().val()},marginTop=this.$el.find("#c37-margin-desktop-settings .top").first().val(),marginRight=this.$el.find("#c37-margin-desktop-settings .right").first().val(),marginBottom=this.$el.find("#c37-margin-desktop-settings .bottom").first().val(),marginLeft=this.$el.find("#c37-margin-desktop-settings .left").first().val(),tabletMargin={top:this.$el.find("#c37-margin-tablet-settings .top").first().val(),right:this.$el.find("#c37-margin-tablet-settings .right").first().val(),left:this.$el.find("#c37-margin-tablet-settings .left").first().val(),bottom:this.$el.find("#c37-margin-tablet-settings .bottom").first().val()},phoneMargin={top:this.$el.find("#c37-margin-phone-settings .top").first().val(),right:this.$el.find("#c37-margin-phone-settings .right").first().val(),left:this.$el.find("#c37-margin-phone-settings .left").first().val(),bottom:this.$el.find("#c37-margin-phone-settings .bottom").first().val()},paddingTop=this.$el.find("#c37-padding-desktop-settings .top").first().val(),paddingRight=this.$el.find("#c37-padding-desktop-settings .right").first().val(),paddingBottom=this.$el.find("#c37-padding-desktop-settings .bottom").first().val(),paddingLeft=this.$el.find("#c37-padding-desktop-settings .left").first().val(),tabletPadding={top:this.$el.find("#c37-padding-tablet-settings .top").first().val(),right:this.$el.find("#c37-padding-tablet-settings .right").first().val(),left:this.$el.find("#c37-padding-tablet-settings .left").first().val(),bottom:this.$el.find("#c37-padding-tablet-settings .bottom").first().val()},phonePadding={top:this.$el.find("#c37-padding-phone-settings .top").first().val(),right:this.$el.find("#c37-padding-phone-settings .right").first().val(),left:this.$el.find("#c37-padding-phone-settings .left").first().val(),bottom:this.$el.find("#c37-padding-phone-settings .bottom").first().val()},fontSizeTablet=this.$el.find("#text-size-tablet input").first().val(),fontSizePhone=this.$el.find("#text-size-phone input").first().val();"#fffffa"===borderColor&&(borderColor=""),"#fffffa"===textColor&&(textColor=""),"#fffffa"===backgroundColor&&(backgroundColor="");var styles={desktop:{"border-radius":this.getUnitValue(borderRadius),"border-top-width":this.getUnitValue(singleBorderWidth.top),"border-bottom-width":this.getUnitValue(singleBorderWidth.bottom),"border-left-width":this.getUnitValue(singleBorderWidth.left),"border-right-width":this.getUnitValue(singleBorderWidth.right),height:this.getUnitValue(height),width:this.getUnitValue(width),"max-width":this.getUnitValue(maxWidth),"max-height":this.getUnitValue(maxHeight),"line-height":this.getUnitValue(lineHeight),"border-top-left-radius":this.getUnitValue(brDimension.topLeft),"border-top-right-radius":this.getUnitValue(brDimension.topRight),"border-bottom-left-radius":this.getUnitValue(brDimension.bottomLeft),"border-bottom-right-radius":this.getUnitValue(brDimension.bottomRight),"box-shadow":{color:boxShadowColor,inset:boxShadowInset,opacity:boxShadowOpacity,offsetX:this.getUnitValue(boxShadowOffsetX),offsetY:this.getUnitValue(boxShadowOffsetY),blurRadius:this.getUnitValue(boxShadowBlurRadius),spreadRadius:this.getUnitValue(boxShadowSpreadRadius)},"background-attachment":backgroundAttachment,color:textColor,"background-image":backgroundImage,"background-color":{color:backgroundColor,opacity:backgroundColorOpacity},"background-overlay":{color:backgroundOverlayColor,opacity:backgroundOverlayOpacity},"background-repeat":backgroundImageRepeat,"background-size":backgroundSize,"background-position-x":backgroundImagePositionX,"background-position-y":backgroundImagePositionY,"border-width":this.getUnitValue(borderWidth),"border-color":borderColor,"border-style":borderStyle,"font-weight":fontWeight,"font-style":fontItalic,"margin-top":this.getUnitValue(marginTop),"margin-right":this.getUnitValue(marginRight),"margin-bottom":this.getUnitValue(marginBottom),"margin-left":this.getUnitValue(marginLeft),"padding-top":this.getUnitValue(paddingTop),"padding-right":this.getUnitValue(paddingRight),"padding-bottom":this.getUnitValue(paddingBottom),"padding-left":this.getUnitValue(paddingLeft),"element-type":this.model.get("etype"),"font-size":this.getUnitValue(fontSize)},phone:{"padding-top":this.getUnitValue(phonePadding.top),"padding-left":this.getUnitValue(phonePadding.left),"padding-right":this.getUnitValue(phonePadding.right),"padding-bottom":this.getUnitValue(phonePadding.bottom),"margin-top":this.getUnitValue(phoneMargin.top),"margin-left":this.getUnitValue(phoneMargin.left),"margin-right":this.getUnitValue(phoneMargin.right),"margin-bottom":this.getUnitValue(phoneMargin.bottom),"font-size":this.getUnitValue(fontSizePhone)},tablet:{"padding-top":this.getUnitValue(tabletPadding.top),"padding-left":this.getUnitValue(tabletPadding.left),"padding-right":this.getUnitValue(tabletPadding.right),"padding-bottom":this.getUnitValue(tabletPadding.bottom),"margin-top":this.getUnitValue(tabletMargin.top),"margin-left":this.getUnitValue(tabletMargin.left),"margin-right":this.getUnitValue(tabletMargin.right),"margin-bottom":this.getUnitValue(tabletMargin.bottom),"font-size":this.getUnitValue(fontSizeTablet)}},cssStyle=this.model.get("cssStyle");cssStyle.desktop=styles.desktop,cssStyle.tablet=styles.tablet,cssStyle.phone=styles.phone,cssStyle.innerSelector=this.$el.find("[data-for=inner-selector]").first().val(),this.model.set("cssStyle",cssStyle),console.log("updating style for element: ",this.model.get("editingElementID")),this.applyStyle()},applyExtraClass:function(){var elementID=this.model.get("editingElementID"),editingElement=jQuery("#"+elementID);editingElement.removeClass(this.model.get("cssStyle").extraClasses),this.model.get("cssStyle").extraClasses=this.$el.find("[data-for=extra-classes]").val(),editingElement.addClass(this.model.get("cssStyle").extraClasses)},changeImageBg:function(){if(!versionNangCap||!isActivated)return void showUpgradeDialog();var model=this.model;if(console.log("image"),this.frame)return void this.frame.open();var el=this.$el,frame=this.frame,that=this;frame=wp.media({title:"select an image",button:{text:"Use this image"},multiple:!1}),frame.on("select",function(){var attachment=frame.state().get("selection").first().toJSON();console.log(attachment.url),el.find(".c37-image-preview").first().attr("src",attachment.url),model.get("cssStyle").desktop["background-image"]=attachment.url,that.renderStyle()}),frame.open()},applyStyle:function(){var model=this.model,desktop="",tablet="",phone="",cssStyle=model.get("cssStyle");_.each(_.keys(cssStyle.desktop),function(key){if("undefined"!=typeof cssStyle.desktop[key]&&""!==cssStyle.desktop[key])if("background-image"===key){var bgOverlay=cssStyle.desktop["background-overlay"],overlayString="";""!==bgOverlay.color&&"#fffffa"!==bgOverlay.color&!isNaN(bgOverlay.opacity)&&(overlayString+="linear-gradient("+c37Hex2rgba(bgOverlay.color,bgOverlay.opacity)+","+c37Hex2rgba(bgOverlay.color,bgOverlay.opacity)+"),"),desktop+=key+":"+overlayString+" url("+cssStyle.desktop[key]+");"}else if("background-color"===key){var bg=cssStyle.desktop[key];""===bg.color||"#fffffa"===bg.color?desktop+=key+": transparent;":"undefined"==typeof bg.opacity||""===bg.opacity?desktop+=key+":"+bg.color+";":(desktop+=key+":"+c37Hex2rgba(bg.color,bg.opacity)+";",console.log("rendering rgba"))}else if("box-shadow"===key){var boxShadow=cssStyle.desktop[key];"undefined"!=typeof boxShadow.color&&""!==boxShadow.color&&"#fffffa"!==boxShadow.color&&(desktop+=boxShadow.inset?key+": inset "+boxShadow.offsetX+" "+boxShadow.offsetY+" "+c37Hex2rgba(boxShadow.color,boxShadow.opacity)+";":key+": "+boxShadow.offsetX+" "+boxShadow.offsetY+" "+boxShadow.blurRadius+" "+boxShadow.spreadRadius+" "+c37Hex2rgba(boxShadow.color,boxShadow.opacity)+";")}else"background-overlay"!==key&&(desktop+=key+":"+cssStyle.desktop[key]+";")}),_.each(_.keys(cssStyle.tablet),function(key){""!==cssStyle.tablet[key]&&(tablet+=key+":"+cssStyle.tablet[key]+";")}),_.each(_.keys(cssStyle.phone),function(key){""!==cssStyle.phone[key]&&(phone+=key+":"+cssStyle.phone[key]+";")});var selector="";selector="page"===this.model.get("etype")?".c37-page-container#page-"+c37GetPageCSSID()+", .c37-widget-container#widget-"+c37GetPageCSSID():"#"+c37GetPageCSSID()+" #"+model.get("editingElementID")+" "+("undefined"!=typeof cssStyle.innerSelector?cssStyle.innerSelector:"")+" ";var cssRules="";cssRules+=selector+"{"+desktop.replace(/\n/g," ")+"}",cssRules+="@media only screen and (min-width : 320px) { "+selector+"{"+phone.replace(/\n/g," ")+" } }",cssRules+="@media only screen and (min-width : 768px) { "+selector+"{"+tablet.replace(/\n/g," ")+" } }",cssRules+="@media only screen and (min-width : 992px) { "+selector+"{"+desktop.replace(/\n/g," ")+" } }",jQuery("[data-css="+this.model.get("editingElementID")+"]").remove(),jQuery("head").append('<style class="c37-custom-css" data-css="'+this.model.get("editingElementID")+'"> '+cssRules+" </style>")}}),SimpleCountdownEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render(),this.selectCountType()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("simpleCountdownEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},additionalEvents:{"input .for-simple-countdown input[type=number]":"updateModel","input .for-simple-countdown input[type=text]":"updateModel","click .for-simple-countdown input[type=checkbox]":"updateModel","click .for-simple-countdown input[type=radio]":"updateModel","input .for-simple-countdown input[type=datetime-local]":"updateModel","change .for-simple-countdown select":"updateModel","input .for-simple-countdown textarea":"updateModel"},selectCountType:function(){var countTo=this.$el.find("#count-to").is(":checked"),countAmount=this.$el.find("#count-amount").is(":checked"),countToOptions=this.$el.find("[data-for=count-to]"),countAmountOptions=this.$el.find("[data-for=count-amount]");return(countTo||countAmount)&&countTo?(countToOptions.show(),countAmountOptions.hide()):(countAmountOptions.show(),countToOptions.hide()),countTo?"countTo":"countAmount"},updateModel:function(){var type=this.selectCountType(),days=this.$el.find("[data-for=days]").first().val(),hours=this.$el.find("[data-for=hours]").first().val(),minutes=this.$el.find("[data-for=minutes]").first().val(),seconds=this.$el.find("[data-for=seconds]").first().val(),language=this.$el.find("[data-for=language]").first().val(),clockDisplay=this.$el.find("[data-for=clock-display]").val(),toDate=this.$el.find("[data-for=datetime-local]").first().val(),daysLabel=this.$el.find("[data-for=days-label]").first().val(),hoursLabel=this.$el.find("[data-for=hours-label]").first().val(),minutesLabel=this.$el.find("[data-for=minutes-label]").first().val(),secondsLabel=this.$el.find("[data-for=seconds-label]").first().val(),action=this.$el.find("[data-for=action]").first().val(),actionValue=encodeURIComponent(this.$el.find("[data-for=action-value]").first().val()),elementID=this.model.get("editingElementID"),data={days:days,hours:hours,minutes:minutes,seconds:seconds,editingElementID:elementID,language:language,clockDisplay:clockDisplay,type:type,date:toDate,action:action,actionValue:actionValue,daysLabel:daysLabel,hoursLabel:hoursLabel,minutesLabel:minutesLabel,secondsLabel:secondsLabel};this.model.set(data),core37Page.pageSettings.simpleCountdown[elementID]=data}}),OtherVideosEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("otherVideosEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},additionalEvents:{"input .for-other-videos [data-for=source]":"updateModel"},updateModel:function(){var source=encodeURIComponent(this.$el.find("[data-for=source]").first().val()),elementID=this.model.get("editingElementID");this.model.set({source:source,editingElementID:elementID})}}),TextInputEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("textEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},additionalEvents:{"input .for-text [data-for=placeholder]":"updateModel","input .for-text [data-for=name]":"updateModel","blur .for-text [data-for=icon]":"updateModel","input .for-text [data-for=input-label]":"updateModel","input .for-text [data-for=input-value]":"updateModel","change .for-text select[data-for=input-type]":"updateModel","change .for-text select[data-for=element-width]":"updateModel","change .for-text input[data-for=expand]":"updateModel"},updateModel:function(){ElementEditView.prototype.renderValidation.apply(this);var placeholder=this.$el.find("[data-for=placeholder]").first().val(),label=this.$el.find("[data-for=input-label]").first().val(),type=this.$el.find("select[data-for=input-type]").first().find(":selected").val(),name=this.$el.find("[data-for=name]").first().val(),required=this.$el.find(".validation input[type=checkbox]").first().is(":checked"),icon=this.$el.find("[data-for=icon]").first().val(),value=this.$el.find("[data-for=input-value]").first().val();console.log("icon is: "+icon),this.renderSizeObject(),this.model.set({name:name,required:required,type:type,placeholder:placeholder,label:label,icon:icon,value:value}),this.model.set("name",name),this.model.set("icon",icon),this.model.set("required",required),this.model.set("type",type),this.model.set("value",value)}}),CheckBoxEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("checkboxEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},events:{"click .for-checkbox .add-option":"addOption","input .for-checkbox .options input":"updateModel","change .for-checkbox .options input[type=checkbox]":"updateModel","input .for-checkbox [data-for=name]":"updateModel","change .for-checkbox select[data-for=alignment]":"updateModel","change .for-checkbox select[data-for=element-width]":"updateModel","change .for-checkbox input[data-for=expand]":"updateModel"},addOption:function(){this.$el.find(".options").append('<div  class="c37-row single-option"><div class="c37-col-7"><input class="full" type="text" data-for="value" placeholder="new option"  /></div><div class="c37-col-5"><label class="control control--checkbox">Checked<input type="radio" data-for="checked" name="checkbox-settings" /><div class="control__indicator"></div></div></div>')},updateModel:function(){var name=this.$el.find("[data-for=name]").first().val(),alignment=this.$el.find("[data-for=alignment]").first().val(),options=[];this.$el.find(".single-option").each(function(){var valueInput=jQuery(this).find("[data-for=value]").first(),checked=jQuery(this).find("[data-for=checked]").first().is(":checked"),id=jQuery(this).find("[data-for=id]").first();if(console.log(valueInput.val()),""!=valueInput.val()){var single={value:encodeURIComponent(valueInput.val()),checked:checked,id:id.val()};options.push(single)}}),this.renderSizeObject(),this.model.set({name:name,options:options,alignment:alignment})}}),RadioEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("radioEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},events:{"click .for-radio .add-option":"addOption","input .for-radio .options input":"updateModel","change .for-radio .options input[type=radio]":"updateModel","input .for-radio [data-for=name]":"updateModel","change .for-radio select[data-for=alignment]":"updateModel"},removeElement:removeElement,addOption:function(){this.$el.find(".options").append('<div  class="c37-row single-option"><div class="c37-col-7"><input class="full" type="text" data-for="value" placeholder="new option"  /></div><div class="c37-col-5"><label class="control control--checkbox">Checked<input type="radio" data-for="checked" name="radio-settings" /><div class="control__indicator"></div></div></div>')},updateModel:function(){var name=this.$el.find("[data-for=name]").first().val(),alignment=this.$el.find("[data-for=alignment]").first().val(),options=[];this.$el.find(".single-option").each(function(){var valueInput=jQuery(this).find("[data-for=value]").first(),checked=jQuery(this).find("[data-for=checked]").first().is(":checked");if(""!==valueInput.val()){var single={value:encodeURIComponent(valueInput.val()),checked:checked};options.push(single)}}),this.model.set("options",options),this.model.set("name",name),this.model.set("alignment",alignment)}}),LabelEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("labelEdit")),render:function(){this.$el.html(this.template())},events:{"input .for-label [data-for=label]":"updateModel","change .for-label [data-for=required]":"updateModel","change .for-label select[data-for=element-width]":"updateModel","change .for-label input[data-for=expand]":"updateModel","input [data-for=text-color] input":renderCSS,"input [data-for=background-color] input":renderCSS},updateModel:function(){var content=this.$el.find("input[data-for=label]").first().val(),required=this.$el.find("input[data-for=required]").first().is(":checked");console.log(required),console.log("label update"),this.renderSizeObject(),this.model.set({content:content,required:required})}}),HeadingEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("headingEdit")),render:function(){this.$el.html(this.template())},events:{"input .for-heading [data-for=heading]":"updateModel","change .for-heading [data-for=tagName]":"updateModel","change .for-heading select[data-for=element-width]":"updateModel","change .for-heading input[data-for=expand]":"updateModel","input [data-for=text-color] input":"renderStyle","input [data-for=background-color] input":"renderStyle"},updateModel:function(){var content=this.$el.find("input[data-for=heading]").first().val(),tagName=this.$el.find("[data-for=tagName]").val();console.log(tagName),this.model.set({content:content,tagName:tagName}),this.renderSizeObject()}}),ParagraphEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("paragraphEdit")),render:function(){var that=this;that.$el.html(this.template(this.model.toJSON()));var textEditor=textEditor||CKEDITOR.replace("c37-text-edit"),model=this.model;textEditor.on("instanceReady",function(e){textEditor.setData(decodeURIComponent(model.get("content"))),c37ApplyFontsToEditor(textEditor)}),textEditor.on("change",function(){var paragraphHTML=jQuery.parseHTML(textEditor.getData()),content="";_.each(paragraphHTML,function(el){jQuery(el).is("link")?(c37RenderWebFonts(jQuery(el).get(0).outerHTML),jQuery(el).remove()):"undefined"!=typeof jQuery(el).html()&&(content+=jQuery(el).get(0).outerHTML)}),model.set("content",encodeURIComponent(content))})},additionalEvents:{"input .for-paragraph textarea[data-for=paragraph]":"updateModel","change .for-paragraph select[data-for=element-width]":"updateModel","change .for-paragraph input[data-for=expand]":"updateModel","click .for-paragraph [data-for=text-color] .reset-color":"clearTextColor"},updateModel:function(){var content=this.$el.find("textarea[data-for=paragraph]").first().val();this.model.set("content",content)}}),IconEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},template:_.template(getEditForm("iconEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},additionalEvents:{"blur .for-icon input[data-for=icon]":"updateModel","input .for-icon input[data-for=size]":"updateModel","input .for-icon input[data-for=color]":"updateModel","change .for-icon select[data-for=icon-alignment]":"updateModel"},updateModel:function(){var color=this.$el.find("[data-for=color]").first().val(),icon=this.$el.find("[data-for=icon]").first().val(),size=this.$el.find("[data-for=size]").first().val(),align=this.$el.find("[data-for=icon-alignment]").first().val();this.model.set("color",color),this.model.set("icon",icon),this.model.set("size",size),this.model.set("align",align)}}),TextAreaEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("textAreaEdit")),render:function(){this.$el.html(this.template())},additionalEvents:{"input .for-textarea input[type=text]":"updateModel","change .for-textarea input[type=checkbox]":"updateModel","change .for-textarea input[data-for=required]":"updateModel","input .for-textarea [data-for=input-label]":"updateModel","change .for-textarea select[data-for=element-width]":"updateModel","change .for-textarea input[data-for=expand]":"updateModel"},updateModel:function(){var placeholder=this.$el.find("input[data-for=placeholder]").first().val(),name=this.$el.find("input[data-for=name]").first().val(),required=this.$el.find("input[data-for=required]").first().is(":checked"),label=this.$el.find("[data-for=input-label]").first().val();this.model.set({name:name,required:required,placeholder:placeholder,label:label}),this.renderSizeObject()}}),DateEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("dateEdit")),render:function(){this.$el.html(this.template())},events:{"input .for-date [data-for=default-value]":"renderDateElement","input .for-date [data-for=name]":"renderDateElement","change .for-date select[data-for=element-width]":"renderDateElement","change .for-date input[data-for=expand]":"renderDateElement","click .for-date .remove-element":"removeElement","change .for-date [data-for=date-type]":"renderDateElement","input [data-for=text-color] input":renderCSS,"input [data-for=background-color] input":renderCSS},renderDateElement:function(){var value=(this.editingElement(),this.$el.find("[data-for=default-value]").first().val()),type=this.$el.find("select[data-for=date-type]").first().find(":selected").val(),name=this.$el.find("[data-for=name]").first().val();this.model.set({value:value,type:type,name:name}),this.renderSizeObject(),this.$el.find("[data-for=default-value]").attr("type",type)}}),ButtonEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("buttonEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},additionalEvents:{"input .for-button input[data-for=text]":"updateModel","blur .for-button input[data-for=icon]":"updateModel","input .for-button input[data-for=url]":"updateModel","input .for-button input[data-for=name]":"updateModel","change .for-button select[data-for=element-width]":"updateModel","change .for-button input[data-for=expand]":"updateModel","change .for-button #button-presets select":"renderPresetStyles","click .for-button .c37-image-picker":"openImageSelector","click .for-button .c37-remove-image":"removeImage"},removeImage:function(){this.model.set("buttonImage","")},renderPresetStyles:function(){var style=this.$el.find("#button-presets [data-for=style]").first().val(),shape=this.$el.find("#button-presets [data-for=shape]").first().val(),color=this.$el.find("#button-presets [data-for=color]").first().val(),size=this.$el.find("#button-presets [data-for=size]").first().val();this.model.set("preset",{style:style,shape:shape,color:color,size:size})},openImageSelector:function(){if(!versionNangCap)return void showUpgradeDialog();if(this.frame)return void this.frame.open();var el=this.$el,frame=this.frame,model=this.model;frame=wp.media({title:"select an image",button:{text:"Use this image"},multiple:!1}),frame.on("select",function(){var attachment=frame.state().get("selection").first().toJSON();el.find(".c37-button-image-preview").first().attr("src",attachment.url),model.set("buttonImage",attachment.url)}),frame.open()},updateModel:function(){var text=this.$el.find("input[data-for=text]").first().val(),name=this.$el.find("input[data-for=name]").first().val(),icon=this.$el.find("input[data-for=icon]").first().val();console.log("icon is: ",icon),this.model.set("text",text),this.model.set("name",name),this.model.set("icon",icon)}}),InputSubmitEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("buttonEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},additionalEvents:{"input .for-button input[data-for=text]":"updateModel","input .for-button input[data-for=url]":"updateModel","input .for-button input[data-for=name]":"updateModel","change .for-button select[data-for=element-width]":"updateModel","change .for-button input[data-for=expand]":"updateModel","change #button-presets select":"renderPresetStyles"},renderPresetStyles:function(){var style=this.$el.find("#button-presets [data-for=style]").first().val(),shape=this.$el.find("#button-presets [data-for=shape]").first().val(),color=this.$el.find("#button-presets [data-for=color]").first().val(),size=this.$el.find("#button-presets [data-for=size]").first().val();this.model.set("preset",{style:style,shape:shape,color:color,size:size})},updateModel:function(){var text=this.$el.find("input[data-for=text]").first().val(),name=this.$el.find("input[data-for=name]").first().val(),icon=this.$el.find("input[data-for=icon]").first().val();console.log("setting text, ",text),this.model.set("text",text),this.model.set("name",name),this.model.set("icon",icon)}}),SelectEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("selectEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},events:{"click .for-select .add-option":"addOption","input .for-select .options input":"updateModel","change .for-select .options input[type=radio]":"updateModel","input .for-select [data-for=name]":"updateModel"},removeElement:removeElement,addOption:function(){this.$el.find(".options").append('<div  class="row single-option"><div class="c37-col-7"><input class="full" type="text" data-for="value" placeholder="new option"  /></div><div class="c37-col-5"><label class="control control--radio">Selected<input type="radio" data-for="checked" name="select-settings" /><div class="control__indicator"></div></div></div>')},updateModel:function(){var name=this.$el.find("[data-for=name]").first().val(),options=[];this.$el.find(".single-option").each(function(){
var valueInput=jQuery(this).find("[data-for=value]").first(),selected=jQuery(this).find("[data-for=checked]").first().is(":checked");if(""!==valueInput.val()){var single={value:encodeURIComponent(valueInput.val()),selected:selected};options.push(single)}}),this.model.set("options",options),this.model.set("name",name)}}),AcceptanceEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("acceptanceEdit")),render:function(){this.$el.html(this.template())},events:{"input .for-acceptance [data-for=text]":"updateModel","input .for-acceptance [data-for=error]":"updateModel","change .for-acceptance input[data-for=expand]":"updateModel","change .for-acceptance select[data-for=element-width]":"updateModel","input [data-for=text-color] input":"renderStyle","input [data-for=background-color] input":"renderStyle"},updateModel:function(){var text=this.$el.find("input[data-for=text]").first().val(),name=this.$el.find("[data-for=name]").first().val(),error_message=this.$el.find("[data-for=error]").first().val();this.model.set({name:name,text:text,error_message:error_message}),this.renderSizeObject()}}),FileEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},template:_.template(getEditForm("fileEdit")),render:function(){this.$el.html(this.template())},events:{"input .for-file [data-for=name]":"updateModel","change .for-file input[data-for=multiple]":"updateModel","blur .for-file [data-for=icon]":"updateModel","input .for-file [data-for=text]":"updateModel","change .for-file .validation select[data-for=file-type]":"renderValidation","input [data-for=text-color] input":"renderStyle","input [data-for=background-color] input":"renderStyle"},renderValidation:function(){ElementEditView.prototype.renderValidation.apply(this);var fileType=this.$el.find(".validation select[data-for=file-type]").first().val();this.model.set({file_type:fileType})},updateModel:function(){var name=this.$el.find("[data-for=name]").first().val(),multiple=this.$el.find("[data-for=multiple]").is(":checked"),text=this.$el.find("[data-for=text]").first().val(),icon=this.$el.find("[data-for=icon]").first().val(),file_type={type:this.$el.find("[data-for=file-type]").first().find(":selected").val(),details:""};this.model.set({name:name,multiple:multiple,file_type:file_type,text:text,icon:icon}),this.renderSizeObject()}}),ImageEdit=ElementEditView.extend({el:"#element-settings",frame:null,initialize:function(){this.render()},template:_.template(getEditForm("imageEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},getParent:function(){return jQuery("#"+this.model.get("editingElementID"))},additionalEvents:{"click .for-image .c37-image-changer":"openImageSelector","change [data-for=image-alignment]":"updateModel"},openImageSelector:function(){if(this.frame)return void this.frame.open();var el=this.$el,frame=this.frame,model=this.model;frame=wp.media({title:"select an image",button:{text:"Use this image"},multiple:!1}),frame.on("select",function(){var attachment=frame.state().get("selection").first().toJSON();console.log(attachment.url),el.find(".c37-image-preview").first().attr("src",attachment.url),model.set("src",attachment.url)}),frame.open()},updateModel:function(){var alignmentClass=this.$el.find("select[data-for=image-alignment]").val();console.log("alignment: ",alignmentClass);var parent=this.getParent();parent.removeClass("c37-left"),parent.removeClass("c37-right"),parent.removeClass("c37-center"),parent.addClass(alignmentClass),this.model.set("alignmentClass",alignmentClass)}}),ImageLinkEdit=ElementEditView.extend({el:"#element-settings",frame:null,initialize:function(){this.render()},template:_.template(getEditForm("imageLinkEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},getParent:function(){return jQuery("#"+this.model.get("editingElementID"))},additionalEvents:{"click .for-image-link .c37-image-changer":"openImageSelector","change .for-image-link [data-for=image-alignment]":"updateModel","blur .for-image-link [data-for=url]":"updateModel","change .for-image-link [data-for=url-target]":"updateModel"},openImageSelector:function(){if(this.frame)return void this.frame.open();var el=this.$el,frame=this.frame,model=this.model;frame=wp.media({title:"select an image",button:{text:"Use this image"},multiple:!1}),frame.on("select",function(){var attachment=frame.state().get("selection").first().toJSON();console.log(attachment.url),el.find(".c37-image-preview").first().attr("src",attachment.url),model.set("src",attachment.url)}),frame.open()},updateModel:function(){var imageAlignment=this.$el.find("select[data-for=image-alignment]").val(),parent=this.getParent(),url=this.$el.find("[data-for=url]").first().val(),target=this.$el.find("[data-for=url-target]").first().val();this.model.set("url",url),this.model.set("target",target),this.model.set("alignmentClass",imageAlignment),parent.removeClass("c37-left"),parent.removeClass("c37-right"),parent.removeClass("c37-center"),parent.addClass(imageAlignment)}}),StarsEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},template:_.template(getEditForm("starsEdit")),render:function(){this.$el.html(this.template())},events:{"change .for-stars [data-for=theme]":"updateModel","input .for-stars [data-for=options]":"updateModel","change .for-stars [data-for=initial-rating]":"updateInitialValue","change .for-stars [data-for=show-labels]":"updateModel","change .for-stars [data-for=show-selected]":"updateModel","change .for-stars [data-for=name]":"updateModel"},updateInitialValue:function(){return versionNangCap?void this.model.set({initialRating:this.$el.find("[data-for=initial-rating]").first().val()}):void showUpgradeDialog()},updateModel:function(){if(!versionNangCap)return void showUpgradeDialog();var model=this.model,theme=this.$el.find("[data-for=theme]").first().val(),name=this.$el.find("[data-for=name]").first().val(),showValues=this.$el.find("[data-for=show-labels]").first().is(":checked"),showSelectedRating=this.$el.find("[data-for=show-selected]").first().is(":checked"),options=[],optionsString=jQuery.trim(this.$el.find("[data-for=options]").first().val());_.each(optionsString.split("\n"),function(option){options.push({value:option,text:option})});var initialSelectHTML="";_.each(options,function(option){var selected=option.value==model.get("initialRating")?"selected":"";initialSelectHTML+="<option "+selected+' value="'+option.value+'"  >'+option.text+"</option>"}),this.$el.find("select[data-for=initial-rating]").first().html(initialSelectHTML);var initialRating=this.$el.find("[data-for=initial-rating]").first().val();this.model.set({showValues:showValues,options:options,theme:theme,initialRating:initialRating,showSelectedRating:showSelectedRating,name:name})}}),YouTubeVideoEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},additionalEvents:{"input .for-video [data-for=video-code]":"updateModel","change .for-video [data-for=hide-info]":"updateModel","change .for-video [data-for=hide-controls]":"updateModel","change .for-video [data-for=auto-play]":"updateModel","input .for-video [data-for=width]":"updateModel","input .for-video [data-for=height]":"updateModel"},template:_.template(getEditForm("videoEdit")),updateModel:function(){var videoURL="https://www.youtube.com/embed/"+getYouTubeID(this.$el.find("[data-for=video-code]").first().val()),hideInfo=this.$el.find("[data-for=hide-info]").first().is(":checked"),hideControls=this.$el.find("[data-for=hide-controls]").first().is(":checked"),autoPlay=this.$el.find("[data-for=auto-play]").first().is(":checked"),width=this.$el.find("[data-for=width]").first().val(),height=this.$el.find("[data-for=height]").first().val();this.model.set({videoURL:videoURL,hideInfo:hideInfo,hideControls:hideControls,autoPlay:autoPlay,width:width,height:height})},render:function(){this.$el.html(this.template(this.model.toJSON()))}}),SelfHostedVideoEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},additionalEvents:{"input .for-self-hosted-video input[type=url]":"updateModel","change .for-self-hosted-video input[type=checkbox]":"updateModel"},template:_.template(getEditForm("selfHostedVideoEdit")),updateModel:function(){var autoplay=this.$el.find("#autoplay").is(":checked"),muted=this.$el.find("#muted").is(":checked"),controls=this.$el.find("#controls").is(":checked"),loop=this.$el.find("#loop").is(":checked"),poster=this.$el.find("#video-poster").val(),mp4=this.$el.find("#mp4").val(),webm=this.$el.find("#webm").val(),ogv=this.$el.find("#ogv").val(),data={autoplay:autoplay,muted:muted,controls:controls,loop:loop,poster:poster,mp4:mp4,webm:webm,ogv:ogv};data.editingElementID=this.model.get("editingElementID"),this.model.set(data)},render:function(){this.$el.html(this.template(this.model.toJSON()))}}),MenuEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},titleEditor:null,editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("menuEdit")),render:function(){var that=this;that.$el.html(this.template(this.model.toJSON())),that.titleEditor=that.titleEditor||CKEDITOR.replace("menu-title",{removeButtons:"Superscript,SpecialChar,NumberedList,CreateDiv,-,JustifyLeft,JustifyCenter,JustifyRight,JustifyBlock,Link,Unlink,Anchor"});var model=this.model;that.titleEditor.on("instanceReady",function(e){"undefined"!=typeof model.get("title")&&(that.titleEditor.setData(decodeURIComponent(model.get("title"))),c37ApplyFontsToEditor(that.titleEditor))})},additionalEvents:{"change .for-menu [data-for=wp-menu]":"updateModel","change .for-menu [data-for=menu-styles]":"updateModel","click .for-menu .menu-icon-picker":"openImageSelector","click .for-menu .menu-icon-remover":"removeMenuIcon","input .for-menu [data-for=item-color]":"updateModel","blur .for-menu [data-for=item-size]":"updateModel","change .for-menu [data-for=uppercase]":"updateModel"},updateModel:function(){var titleHTML=jQuery.parseHTML(this.titleEditor.getData()),title="";_.each(titleHTML,function(el){jQuery(el).is("link")?(c37RenderWebFonts(jQuery(el).get(0).outerHTML),jQuery(el).remove()):"undefined"!=typeof jQuery(el).html()&&(title+=jQuery(el).get(0).outerHTML)}),title=encodeURIComponent(title.trim());var menuName=this.$el.find("[data-for=wp-menu]").first().val(),style=this.$el.find("[data-for=menu-styles]").first().val(),iconUrl=this.$el.find(".c37-menu-icon").first().attr("src"),itemSize=this.$el.find("[data-for=item-size]").first().val(),itemColor=this.$el.find("[data-for=item-color]").first().val(),uppercase=this.$el.find("[data-for=uppercase]").first().is(":checked");this.model.set("name",menuName),this.model.set("style",style),this.model.set("title",title),this.model.set("iconUrl",iconUrl),this.model.set("uppercase",uppercase),this.model.set("itemColor",itemColor),this.model.set("itemSize",itemSize)},openImageSelector:function(){var that=this;if(!versionNangCap||!isActivated)return void showUpgradeDialog();if(this.frame)return void this.frame.open();var el=this.$el,frame=this.frame;frame=wp.media({frame:"select",title:"Select an image",button:{text:"Use this image"},library:{type:"image"},multiple:!1,editing:!1}),frame.on("select",function(){var attachment=frame.state().get("selection").first().toJSON();attachment&&(console.log(attachment.url),el.find(".c37-menu-icon").first().attr("src",attachment.url),that.updateModel())}),frame.open()},removeMenuIcon:function(){this.$el.find(".c37-menu-icon").first().attr("src",""),this.updateModel()}}),LineEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},render:function(){this.$el.html(this.template(this.model.toJSON()))},template:_.template(getEditForm("lineEdit")),additionalEvents:{"change .for-line [data-for=hr-line-style]":"updateModel"},updateModel:function(){var lineClass=this.$el.find("[data-for=hr-line-style]").first().val();this.model.set({lineClass:lineClass})}}),ULEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},template:_.template(getEditForm("ulEdit")),render:function(){var that=this;that.$el.html(this.template(this.model.toJSON()));var ulEditor=ulEditor||CKEDITOR.replace("ul-editor"),model=this.model,content="";_.each(this.model.get("items"),function(i){content+="<li>"+decodeURIComponent(i)+"</li>"}),content="<ul>"+content+"</ul>",ulEditor.on("instanceReady",function(e){c37ApplyFontsToEditor(ulEditor),ulEditor.setData(content)}),ulEditor.on("change",function(){var content=jQuery.parseHTML(ulEditor.getData()),items=[];_.each(content,function(pi){"undefined"!=typeof jQuery(pi).html()&&""!=jQuery(pi).html()?items.push(encodeURIComponent(jQuery(pi).html())):jQuery(pi).is("link")&&c37RenderWebFonts(jQuery(pi).get(0).outerHTML)}),model.set({items:items}),that.updateModel()})},additionalEvents:{"blur .for-ul [data-for=icon]":"updateModel","input .for-ul [data-for=icon-color]":"updateModel","input .for-ul [data-for=icon-size]":"updateModel","input .for-ul [data-for=list-padding]":"updateModel","input .for-ul [data-for=left-padding]":"updateModel","change .for-ul [data-for=icon-bg-color]":"updateModel","change .for-ul [data-for=ul-text-align]":"updateModel","click .for-ul [data-for=reset-icon-color]":"resetIconColor","click .for-ul [data-for=reset-icon-bg-color]":"resetIconBgColor"},resetIconColor:function(e){this.$el.find("[data-for=icon-color]").first().val("#fffffa"),this.updateModel()},resetIconBgColor:function(e){this.$el.find("[data-for=icon-bg-color]").first().val("#fffffa"),this.updateModel()},updateModel:function(){var icon=this.$el.find("[data-for=icon]").first().val(),iconColor=this.$el.find("[data-for=icon-color]").first().val(),iconBgColor=this.$el.find("[data-for=icon-bg-color]").first().val(),textAlign=this.$el.find("[data-for=ul-text-align]").first().val(),iconSize=this.$el.find("[data-for=icon-size]").first().val(),listPadding=this.$el.find("[data-for=list-padding]").first().val(),leftPadding=this.$el.find("[data-for=left-padding]").first().val();console.log("icon size: ",iconSize),iconColor="#fffffa"===iconColor?"":iconColor,iconBgColor="#fffffa"===iconBgColor?"":iconBgColor,this.model.set("icon",icon),this.model.set("iconColor",iconColor),this.model.set("iconBgColor",iconBgColor),this.model.set("iconSize",iconSize),this.model.set("align",textAlign),this.model.set("listPadding",listPadding),this.model.set("leftPadding",leftPadding)}}),FormContainerEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},template:_.template(getEditForm("formContainerEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},additionalEvents:{"blur .for-form-container [data-for=form-code]":"updateModel","change .for-form-container [data-for=form-style]":"updateStyle"},updateStyle:function(){var form=jQuery("#"+this.model.get("editingElementID")).find("form"),presetCSSStyle=this.$el.find("[data-for=form-style]").first().val();_.each(this.$el.find("[data-for=form-style] option"),function(option){form.removeClass(jQuery(option).val())}),"no-style"!==presetCSSStyle&&form.addClass(presetCSSStyle)},updateModel:function(){var formCode=this.$el.find("[data-for=form-code]").first().val().trim();if(encodeURIComponent(formCode)===this.model.get("rawCode"))return void console.log("no data change");console.log("form code changed");var pattern=/<form[\s\S]*\/form>/i,reg=new RegExp(pattern),result=reg.exec(formCode);null!=result?this.model.set("rawCode",encodeURIComponent(result[0])):toastr.error("your code is not valid. Please check it again")}}),CodeEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},editingElement:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("codeEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},events:{"blur .for-custom-code [data-for=code]":"updateModel"},updateModel:function(){var code=this.$el.find("textarea[data-for=code]").first().val();this.model.set({code:encodeURIComponent(code.replace(/(\r\n|\n|\r)/gm," "))})}}),RowEdit=ElementEditView.extend({el:"#row-settings",initialize:function(){this.render()},editingRow:function(){return jQuery("#"+this.model.get("editingElementID"))},template:_.template(getEditForm("rowEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},additionalEvents:{"change .for-row select[data-for=layout]":"renderRow","click .for-row .remove-element":"removeRow"},removeRow:function(){var currentStep=this.editingRow().parent(".c37-step");currentStep.find(".c37-row").length>1?this.editingRow().remove():(this.editingRow().find("*").remove(),this.editingRow().append('<div class="c37-box c37-col-md-12"></div>'),makeC37BoxDroppable(jQuery))},renderRow:function(){function getLayoutClass(element){var classArray=element.attr("class").split(/\s+/),layoutClass="";return _.each(classArray,function(c){c.indexOf("c37-col-md-")!=-1&&(layoutClass=c)}),layoutClass}function getBlankColumns(row){var blankColumns=[],boxes=row.children("div");return _.each(boxes,function(box){0===jQuery(box).find(".c37-item-element").length&&blankColumns.push(box)}),blankColumns}function applyRowLayout(row,layoutArray){row.children("div").each(function(index){var box=jQuery(this).find(".c37-box"),boxID=box.attr("id");console.log("layout array: ",layoutArray),modelsList[boxID].get("size").desktop=layoutArray[index];var newClass="c37-col-md-"+layoutArray[index];jQuery(this).removeClass(getLayoutClass(jQuery(this))).addClass(newClass),jQuery(this).addClass("d-flex"),jQuery(this).addClass("flex-column")})}console.log("calling render row");var editingRow=this.editingRow();console.log("row model: ",this.model.toJSON());var currentLayout=this.model.get("layout"),newLayout=this.$el.find("select[data-for=layout]").first().val();if(this.model.set("layout",newLayout),currentLayout!==newLayout){var currentLayoutArray=currentLayout.split("-"),newLayoutArray=newLayout.split("-");if(currentLayoutArray.length===newLayoutArray.length)applyRowLayout(editingRow,newLayoutArray);else if(currentLayoutArray.length>newLayoutArray.length){var columnToRemove=currentLayoutArray.length-newLayoutArray.length,blankColumns=getBlankColumns(editingRow);if(columnToRemove>blankColumns.length)return void alert("You do not have enough blank box"+columnToRemove+"---"+blankColumns.length);for(var i=columnToRemove;i>0;i--){var column=blankColumns[blankColumns.length-i];delete modelsList[jQuery(column).attr("id")],delete core37Page.pageSettings.modelsJSON[jQuery(column).attr("id")],console.log("removing box: ",jQuery(column).attr("id")),jQuery(column).remove()}applyRowLayout(editingRow,newLayoutArray)}else if(currentLayoutArray.length<newLayoutArray.length){for(var columnToAdd=newLayoutArray.length-currentLayoutArray.length,i=0;i<columnToAdd;i++){console.log("columns to add is: ",columnToAdd);var boxModel=new BoxModel,newBox=new Box({model:boxModel});console.log("creating new box with id",boxModel.getElementID()),newBox.render(),editingRow.append(newBox.$el.html())}applyRowLayout(editingRow,newLayoutArray),makeC37BoxDroppable(jQuery)}}}}),WallEdit=RowEdit.extend({el:"#wall-settings"}),PageEdit=ElementEditView.extend({el:"#form-settings",initialize:function(){this.render()},template:_.template(getEditForm("pageEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},additionalEvents:{"input .for-page [data-for=page-width]":"updateModel","input .for-page [data-for=page-title]":"updateModel","input .for-page [data-for=page-slug]":"updateModel","input .for-page #page-codes textarea":"updateCodes"},updateCodes:function(){var trackingCode=this.$el.find("[data-for=tracking-code]").val(),experimentCode=this.$el.find("[data-for=experiment-code]").val(),afterBodyOpening=this.$el.find("[data-for=after-body-opening-code]").val(),beforeBodyClosing=this.$el.find("[data-for=before-body-closing-code]").val(),customCSS=this.$el.find("[data-for=page-css-code]").val(),metaCode=this.$el.find("[data-for=meta-code]").val();this.model.set("codes",{trackingCode:encodeURIComponent(trackingCode),experimentCode:encodeURIComponent(experimentCode),beforeBodyClosing:encodeURIComponent(beforeBodyClosing),afterBodyOpening:encodeURIComponent(afterBodyOpening),metaCode:encodeURIComponent(metaCode),customCSSCode:encodeURIComponent(customCSS)})},updateModel:function(){var title=this.$el.find("[data-for=page-title]").first().val(),width=this.$el.find("[data-for=page-width]").first().val(),slug=this.$el.find("[data-for=page-slug]").first().val();console.log("Slug is: ",slug),this.model.set("pageTitle",title),this.model.set("width",width),this.model.set("pageSlug",slug);var pageElement=jQuery("#"+c37GetPageCSSID());!isNaN(width)&&width>0?pageElement.css("width",width+"px"):pageElement.attr("style","")}}),SectionEdit=ElementEditView.extend({el:"#section-settings",initialize:function(){this.render()},template:_.template(getEditForm("sectionEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))}}),BoxEdit=ElementEditView.extend({el:"#element-settings",initialize:function(){this.render()},template:_.template(getEditForm("boxEdit")),render:function(){this.$el.html(this.template(this.model.toJSON()))},additionalEvents:{"input .for-box .box-size":"updateModel","change .for-box [data-for=vertical]":"renderVerticalAlignment","change .for-box [data-for=horizontal]":"renderHorizontalAlignment","change .for-box [name=direction]":"updateDirection"},updateDirection:function(){console.log("changing direction");var directionClass=this.$el.find("[name=direction]:checked").val(),box=this.getBox();_.each(this.$el.find("[name=direction]"),function(op){box.removeClass(jQuery(op).val())}),box.addClass(directionClass),this.model.set("direction",directionClass)},getBox:function(){return jQuery("#"+this.model.get("editingElementID"))},renderHorizontalAlignment:function(){var horizontal=this.$el.find("[data-for=horizontal]").val();this.model.set("horizontal",horizontal);var box=this.getBox();_.each(this.$el.find("[data-for=horizontal] option"),function(op){box.removeClass(jQuery(op).val()),console.log(jQuery(op).val())}),box.addClass(horizontal)},renderVerticalAlignment:function(){var vertical=this.$el.find("[data-for=vertical]").val();this.model.set("vertical",vertical);var box=this.getBox();_.each(this.$el.find("[data-for=vertical] option"),function(op){box.removeClass(jQuery(op).val()),console.log(jQuery(op).val())}),box.addClass(vertical)},updateModel:function(){var sizePhone=this.$el.find("[data-for=size-phone]").val(),sizeTablet=this.$el.find("[data-for=size-tablet]").val(),sizeDesktop=this.$el.find("[data-for=size-desktop]").val(),boxSize={desktop:sizeDesktop,phone:sizePhone,tablet:sizeTablet};this.model.set("size",boxSize);for(var editingBox=jQuery("#"+this.model.get("editingElementID")),i=1;i<=12;i++)editingBox.removeClass("c37-col-md-"+i),editingBox.removeClass("c37-col-lg-"+i),editingBox.removeClass("c37-col-"+i);editingBox.addClass("c37-col-lg-"+sizeDesktop),editingBox.addClass("c37-col-md-"+sizeTablet),editingBox.addClass("c37-col-"+sizePhone)}}),PageList=Backbone.View.extend({default:{forms:{}},el:"#forms-list",initialize:function(){this.render()},template:_.template('<i id="close-edit-panel" class="fa fa-close"></i> <label class="big">All pages</label><ul><% _.each(forms, function(form) { %><li class="form-edit" form-id="<%= form.id %>"> <i title="Edit page" class="fa fa-pencil"></i> <a class="page-url" title="Open page" target="_blank" href="<%= form.url %>"><i class="fa fa-external-link"></i></a> <i class="fa fa-download"></i> <i class="fa fa-gear"></i> <i  title="Delete page" class="fa fa-trash"></i> <%= form.title %><div class="edit-page-url" data-balloon="click to copy the URL"><input  type="url" value="<%= form.url %>" /></div></li><% }) %></ul>'),render:function(){this.$el.html(this.template({forms:this.model.get("forms")}))}}),TemplateList=Backbone.View.extend({default:{forms:{}},el:"#templates-list",initialize:function(){console.log("loading template"),this.render()},template:_.template('<i id="close-edit-panel" class="fa fa-close"></i> <label class="big">All templates</label><ul id="all-templates"><% var templates = this.model.get("templates"); _.each(templates, function(template) { %><li class="template-edit" template-id="<%= template.id %>"> <i class="fa fa-pencil"></i> <a data-lity href="<%= template.url %>" class="fa fa-eye"></a> <i class="fa fa-trash"></i> <%= template.title %></li><% }) %></ul>'),render:function(){this.$el.html(this.template({forms:this.model.get("forms")}))}}),eMAP={text:{el:TextInput,ed:TextInputEdit},input_submit:{el:InputSubmit,ed:InputSubmitEdit},checkbox:{el:CheckBox,ed:CheckBoxEdit},radio:{el:Radio,ed:RadioEdit},heading:{el:Heading,ed:HeadingEdit},paragraph:{el:Paragraph,ed:ParagraphEdit},ul:{el:UnorderedList,ed:ULEdit},form_container:{el:FormContainer,ed:FormContainerEdit},date:{el:DateInput,ed:DateEdit},textarea:{el:TextArea,ed:TextAreaEdit},button:{el:Button,ed:ButtonEdit},select:{el:Select,ed:SelectEdit},acceptance:{el:Acceptance,ed:AcceptanceEdit},file:{el:File,ed:FileEdit},image:{el:Image,ed:ImageEdit},stars:{el:Stars,ed:StarsEdit},youtube:{el:YouTubeVideo,ed:YouTubeVideoEdit},self_hosted_video:{el:SelfHostedVideo,ed:SelfHostedVideoEdit},code:{el:Code,ed:CodeEdit},menu:{el:Menu,ed:MenuEdit},line:{el:Line,ed:LineEdit},simple_countdown:{el:SimpleCountdown,ed:SimpleCountdownEdit},other_videos:{el:OtherVideos,ed:OtherVideosEdit},section:{el:Section,ed:SectionEdit},page:{el:Page,ed:PageEdit},icon:{el:Icon,ed:IconEdit},image_link:{el:ImageLink,ed:ImageLinkEdit}};!function(jQuery){jQuery(function(){jQuery(document).on("mousedown",".c37-premium-element, .c37-premium-feature",function(){versionNangCap||showUpgradeDialog()}),versionNangCap?(jQuery("#c37-go-popup").show(),jQuery("#c37-go-widget").show()):jQuery("#c37-go-pro").css("display","inline-block"),jQuery("#help-icon, #help-area-close-icon").on("click",function(){jQuery("#help-area").slideToggle()}),jQuery(document).on("click",".c37-step .c37-item-element",function(e){e.preventDefault()}),jQuery(".c37-container-element").draggable({connectToSortable:".c37-step",helper:"clone",revert:"invalid",addClasses:!1,iframeFix:!0,refreshPositions:!0}),jQuery(".c37-row-element").draggable({connectToSortable:".c37-section",helper:"clone",revert:"invalid",addClasses:!1,iframeFix:!0,refreshPositions:!0});var cancelClass="";versionNangCap||(cancelClass=".c37-premium-element"),jQuery(".c37-item-element").draggable({connectToSortable:".c37-box",cursor:"move",helper:"clone",classes:{"ui-draggable":"c37-brick"},start:function(event,ui){ui.helper.hasClass("c37-premium-element")&&!versionNangCap&&showUpgradeDialog()},revert:"invalid",cancel:cancelClass,iframeFix:!0,addClasses:!1,refreshPositions:!0}),jQuery(".c37-wall-element").draggable({connectToSortable:".c37-box",cursor:"move",helper:"clone",classes:{"ui-draggable":"c37-brick"},revert:"invalid",cancel:cancelClass,iframeFix:!0,addClasses:!1,refreshPositions:!0,drag:function(event,ui){ui.helper.width("100px")}}),jQuery(document).on("click","#close-edit-panel",function(){hideEditPanel()})})}(jQuery),function(jQuery){function loadElementEditForm(elementID){var selectedElement=jQuery("#"+elementID),elementType=selectedElement.attr("data-c37-type");if("wall"!==elementType){var model=c37GetElementModel(elementID,elementType);console.log("model: ",model.toJSON()),console.log("element type is: ",elementType),console.log("element type: ",elementType);var ElementView=eMAP[elementType].el,ElementEditView=eMAP[elementType].ed;new ElementView({model:model,el:"#"+elementID}),new ElementEditView({model:model}),renderFontAwesome(),elementSettingsTab(),enableAccordionStyleTab(),backgroundTabs(),responsiveTabs(),textSizeTabs();var popupSelectBox=jQuery("[data-for=target-popup] select");if(popupSelectBox.length>0){var selectedPopupID="",tempAction=core37Page.pageSettings.elementsActions[elementID];"undefined"!=typeof tempAction&&"open-popup"===tempAction.action&&(selectedPopupID=tempAction["popup-id"]),populateDataList(popupSelectBox,popupOptions,selectedPopupID)}}}function loadPageEditForm(){var pageModel=c37GetElementModel("page","page");new PageEdit({model:pageModel}),console.log("Page model: ",pageModel);var editors=preparePageCodeEditor();elementSettingsTab(editors),jQuery("#page-codes").accordion({header:".section-header",heightStyle:"content",collapsible:!0}),backgroundTabs(),responsiveTabs(),textSizeTabs()}function loadSectionEditForm(sectionID){var sectionModel=c37GetElementModel(sectionID,"section");new SectionEdit({model:sectionModel}),backgroundTabs(),responsiveTabs()}function loadRowEditPanel(rowID){var rowModel=c37GetElementModel(rowID,"row");new RowEdit({model:rowModel}),elementSettingsTab(),backgroundTabs(),responsiveTabs(),textSizeTabs()}function loadWallEditPanel(wallID){console.log("load wall edit form");var wallModel=c37GetElementModel(wallID,"wall");new WallEdit({model:wallModel}),elementSettingsTab(),backgroundTabs(),responsiveTabs()}function loadBoxSettings(boxID){var boxModel=c37GetElementModel(boxID,"box");new BoxEdit({model:boxModel}),elementSettingsTab(),enableAccordionStyleTab(),backgroundTabs(),responsiveTabs(),boxSizeTab(),textSizeTabs()}function preparePageCodeEditor(){}var elementContextMenu=jQuery("#wplx-edit-element-context-menu").html(),sectionContextMenu=jQuery("#wplx-edit-section-context-menu").html(),wallContextMenu=jQuery("#wplx-edit-wall-context-menu").html();jQuery(document).on("click","#close-panel",function(){hideEditPanel()}),jQuery(document).on("click","#maximize-panel",function(){toggleOptionsWindowSize()}),jQuery(document).on("mouseover",".c37-step .c37-item-element",function(){var title=jQuery(this).attr("data-c37-type");if("undefined"!=typeof title&&(title=title.replace("/_/g"," ").toLowerCase()),0===jQuery(this).find(".c37-element-cm").length){jQuery(this).append(elementContextMenu.replace("element_title",title));jQuery(this).find(".c37-element-cm")}}),jQuery(document).on("mouseleave",".c37-step .c37-item-element",function(){jQuery(this).find(".c37-element-cm").remove()}),jQuery(document).on("mouseover",".c37-wall",function(){0===jQuery(this).find(".c37-wall-cm").length&&jQuery(this).append(wallContextMenu)}),jQuery(document).on("mouseleave",".c37-step .c37-wall",function(){jQuery(this).find(".c37-wall-cm").remove()}),jQuery(document).on("mouseover",".c37-step .c37-row > div > .c37-box",function(){if(0===jQuery(this).find(".c37-section-cm").length){var hideSectionMenu=jQuery("#hide-section-menu").is(":checked");hideSectionMenu||jQuery(this).append(sectionContextMenu)}}),jQuery("#dark-theme").on("click",function(){var optionsWindow=jQuery("#options-window"),elementPanel=jQuery("#elements-panel"),topBar=jQuery("#form-general-settings");optionsWindow.toggleClass("theme-dark"),elementPanel.toggleClass("theme-dark"),topBar.toggleClass("theme-dark")}),jQuery(document).on("mouseleave",".c37-step .c37-row",function(){jQuery(this).find(".c37-section-cm").remove()}),jQuery(document).on("click",".cm-del",function(){var parentElement=jQuery(this).closest(".c37-item-element");swal({title:"Delete this element?",text:"This action cannot be undone. Be very careful",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},function(){parentElement.remove();var elementID=parentElement.attr("id");delete core37Page.pageSettings.modelsJSON[elementID],delete modelsList[elementID],delete core37Page.pageSettings.simpleCountdown[elementID],jQuery("[data-css="+elementID+"]").remove(),jQuery("[data-custom-css="+elementID+"]").remove()})}),jQuery(document).on("click",".cm-clone",function(){
var sourceElement=jQuery(this).closest(".c37-item-element"),sourceElementID=sourceElement.attr("id"),sourceElementType=sourceElement.attr("data-c37-type"),elementModel=ModelTemplates[sourceElementType],sourceModel=c37GetElementModel(sourceElementID,sourceElementType),sourceModelJSON=JSON.parse(JSON.stringify(sourceModel)),newElementID="c37-"+sourceElementType+"-"+Math.round(1e6*Math.random());console.log("new ID: ",newElementID),sourceModelJSON.editingElementID=newElementID,sourceModelJSON.cid="c"+Math.round(1e6*Math.random());var cloneModel=new elementModel(sourceModelJSON),cloneElement=sourceElement.clone();cloneElement.attr("id",cloneModel.getElementID()),cloneElement.insertAfter(sourceElement)}),jQuery(document).on("click",".cm-clone-row",function(){var sourceRow=jQuery(this).closest(".c37-row"),sourceRowModel=c37GetElementModel(sourceRow.attr("id"),"row"),cloneRow=sourceRow.clone();_.each(cloneRow.find(".c37-item-element, .c37-wall-element"),function(e){var elementType=jQuery(e).attr("data-c37-type"),elementID=jQuery(e).attr("id"),elementModel=ModelTemplates[elementType];console.log("e type: ",elementType),console.log("e model: ",elementModel);var sourceModel=c37GetElementModel(elementID,elementType),sourceModelJSON=sourceModel.toJSON();sourceModelJSON.editingElementID="c37-"+elementType+"-"+Math.round(1e6*Math.random());var cloneModel=new elementModel(sourceModelJSON);jQuery(e).attr("id",cloneModel.getElementID())});var cloneRowModelJSON=sourceRowModel.toJSON();cloneRowModelJSON.editingElementID="c37-row-"+Math.round(1e6*Math.random()),console.log("model templates: ",ModelTemplates.row);var cloneRowModel=new ModelTemplates.row(cloneRowModelJSON);cloneRow.attr("id",cloneRowModel.getElementID()),cloneRow.insertAfter(sourceRow)}),jQuery(document).on("click",".c37-element-cm .cm-edit",function(){var optionsWindow=jQuery("#options-window");optionsWindow.html(""),optionsWindow.append('<div id="element-settings"></div>');var id=jQuery(this).closest(".c37-item-element").attr("id");loadElementEditForm(id),prepareOptionWindows(optionsWindow)}),jQuery(document).on("click",".c37-section-cm .cm-row-edit",function(e){var optionsWindow=jQuery("#options-window"),currentRow=jQuery(this).closest(".c37-row");optionsWindow.html(""),optionsWindow.append('<div id="row-settings"></div>');var rowID=currentRow.attr("id");loadRowEditPanel(rowID),enableAccordionStyleTab(),prepareOptionWindows(optionsWindow)}),jQuery(document).on("click",".c37-section-cm .cm-section-edit",function(e){var optionsWindow=jQuery("#options-window"),currentSection=jQuery(this).closest(".c37-section");optionsWindow.html(""),optionsWindow.append('<div id="section-settings"></div>');var sectionID=currentSection.attr("id");loadSectionEditForm(sectionID),enableAccordionStyleTab(),prepareOptionWindows(optionsWindow)}),jQuery(document).on("click",".c37-section-cm .cm-box-edit",function(e){var optionsWindow=jQuery("#options-window");optionsWindow.html(""),optionsWindow.append('<div id="element-settings"></div>');var box=jQuery(this).closest(".c37-box"),boxID=box.attr("id");loadBoxSettings(boxID),prepareOptionWindows(optionsWindow)}),jQuery(document).on("click",".c37-section-cm .cm-row-del",function(){var rowToDelete=jQuery(this).closest(".c37-row");swal({title:"Delete this row?",text:"This action cannot be undone. Be very careful",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},function(){rowToDelete.remove()})}),jQuery(document).on("click",".c37-section-cm .cm-section-del",function(){var sectionToDelete=jQuery(this).closest(".c37-section");swal({title:"Delete this section?",text:"This action cannot be undone. Be very careful",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},function(){sectionToDelete.remove()})}),jQuery(document).on("click",".c37-wall-cm .cm-wall-edit",function(e){var optionsWindow=jQuery("#options-window");optionsWindow.html(""),optionsWindow.append('<div id="wall-settings"></div>');var wall=jQuery(this).closest(".c37-wall"),wallID=wall.attr("id");loadWallEditPanel(wallID),prepareOptionWindows(optionsWindow)}),jQuery(document).on("click",".c37-section-cm .cm-row-del",function(){var rowToDelete=jQuery(this).closest(".c37-row");swal({title:"Delete this row?",text:"This action cannot be undone. Be very careful",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},function(){rowToDelete.remove()})}),jQuery(document).on("click","#open-page-settings",function(){var optionsWindow=jQuery("#options-window");optionsWindow.html(""),optionsWindow.append('<div id="form-settings"></div>'),loadPageEditForm(),prepareOptionWindows(optionsWindow),c37MakeTabs(jQuery(".c37-tabs"))})}(jQuery),function(jQuery){jQuery(document).on("click",".c37-drop-down-button",function(){jQuery(this).siblings(".c37-drop-down-menu").toggle("slide",{direction:"up"},500)}),jQuery(document).on("click",".c37-drop-down-menu li",function(){hideTopDropDownMenu()}),jQuery(document).on("blur",".c37-drop-down-button",function(){hideTopDropDownMenu()}),jQuery(document).on("click","#save-page-options a",function(){var isPage=!1,saveOption=jQuery(this).attr("id");if("save-as-page"===saveOption&&(isPage=!0),"save-as-new-custom-post"!==saveOption&&"save-as-new-page"!==saveOption||(core37Page.pageID=0,"save-as-new-page"===saveOption&&(isPage=!0)),""===jQuery.trim(modelsList.page.get("pageTitle")))return void toastr.error(ERROR_MISSING_PAGE_NAME);var pageContent=encodeURIComponent(jQuery("#construction-site").html());showLoadingScreen();var cssInHead="";_.each(jQuery(".c37-custom-css"),function(style){cssInHead+=encodeURIComponent(jQuery(style).text().replace(/\n/g," "))}),core37Page.pageSettings.compiledCSS=cssInHead,jQuery.post(ajaxurl,{pageContent:pageContent,pageID:core37Page.pageID,pageSlug:core37Page.pageSettings.modelsJSON.page.pageSlug,pageSettings:JSON.stringify(core37Page.pageSettings),pageTitle:core37Page.pageSettings.modelsJSON.page.pageTitle,action:"core37_lp_save_page",isPage:isPage},function(response){hideLoadingScreen(),core37Page.pageID=JSON.parse(response).pageID,console.log("page slug is: ",JSON.parse(response).pageSlug),modelsList.page.set("pageSlug",JSON.parse(response).pageSlug),jQuery("#preview-landing-page a").attr("href",JSON.parse(response).pageURL),jQuery("#preview-landing-page").css("display","inline-block"),toastr.success(SUCCESS_FORM_SAVED),jQuery("#save-page-options").hide()})}),jQuery(document).on("click",".edit-page-url",function(){var input=jQuery(this).find("input").first();console.log(input.length),console.log("url",input.val()),input.val(input.val()).select(),document.execCommand("copy"),toastr.info("URL copied to clipboard")}),jQuery(document).on("click",".form-edit .fa-gear",function(){jQuery(this).siblings(".edit-page-url").toggle()}),jQuery(document).on("click","#get-pages",function(response){showLoadingScreen(),jQuery.post(ajaxurl,{action:"core37_lp_list_pages"},function(response){hideLoadingScreen();var optionsWindow=jQuery("#options-window");optionsWindow.html(""),optionsWindow.append('<div id="forms-list"></div>');var model=new C37ElementModel;model.set("forms",JSON.parse(response)),new PageList({model:model}),optionsWindow.removeClass("c37-hidden"),optionsWindow.addClass("options-window-big")})}),jQuery(document).on("click","#get-templates",function(response){return versionNangCap&&isActivated?(showLoadingScreen(),void jQuery.post(ajaxurl,{action:"core37_lp_list_templates"},function(response){hideLoadingScreen();var optionsWindow=jQuery("#options-window");optionsWindow.html(""),optionsWindow.append('<div id="templates-list"></div>');var model=new C37ElementModel({}),data=JSON.parse(response);return 1===data.error?void toastr.info(data.message):(model.set("templates",JSON.parse(response)),new TemplateList({model:model}),optionsWindow.removeClass("c37-hidden"),void toastr.remove())})):void showUpgradeDialog()}),jQuery(document).on("click",".form-edit i.fa-pencil",function(){var pageID=jQuery(this).closest("li").attr("form-id"),pageURL=jQuery(this).closest("li").find(".page-url").first().attr("href");jQuery("#preview-landing-page a").attr("href",pageURL),jQuery("#preview-landing-page").css("display","inline-block"),jQuery.post(ajaxurl,{action:"core37_lp_load_page",pageID:pageID},function(response){var data=JSON.parse(response);try{core37Page.pageSettings=JSON.parse(data.pageSettings)}catch(ex){toastr.info("there was an error parsing page settings"),console.error(ex),core37Page.pageSettings={}}modelsList=[],_.each(core37Page.pageSettings.modelsJSON,function(object){var elementType=object.etype;if(console.log("element type is: ",elementType),console.log("element ",object),"hr"===elementType?elementType="line":"cd"===elementType?elementType="simple_countdown":"form"===elementType?elementType="form_container":"input"===elementType?(console.log("hello"),elementType="text"):"text_input"===elementType&&(console.log("hello"),elementType="text"),"undefined"!=typeof elementType){console.log("type is: ",elementType);var elementModelObject=ModelTemplates[elementType];new elementModelObject(object)}});var editedPageCSSID=modelsList.page.get("cssID");c37LoadWebFontsForPage();var elements=_.keys(core37Page.pageSettings.modelsJSON);_.each(elements,function(elID){var cssStyle=core37Page.pageSettings.modelsJSON[elID].cssStyle;if(jQuery("head").append('<style class="c37-custom-css" data-custom-css="'+elID+'"> '+decodeURIComponent(cssStyle.customCSS)+" </style>"),console.log("el id is: ",elID),elID!==!1&&"undefined"!==elID){var innerSelector="undefined"==typeof cssStyle.innerSelector?"":cssStyle.innerSelector,selector="";"page"===elID?selector=".c37-page-container#page-"+editedPageCSSID+", .c37-widget-container#widget-"+editedPageCSSID:(console.log("element id: ",elID," inner selector: ",innerSelector),selector="#"+editedPageCSSID+" #"+elID+" "+innerSelector+" ");var cssRules="",desktop="",tablet="",phone="";_.each(_.keys(cssStyle.desktop),function(key){if(""!==cssStyle.desktop[key])if("background-image"===key)desktop+=key+":url("+cssStyle.desktop[key]+");";else if("background-color"===key){var bg=cssStyle.desktop[key];desktop+=""===bg.color||"#fffffa"===bg.color?key+": transparent;":"undefined"==typeof bg.opacity||""===bg.opacity?key+":"+bg.color+";":key+":"+c37Hex2rgba(bg.color,bg.opacity)+";"}else if("box-shadow"===key){var boxShadow=cssStyle.desktop[key];"undefined"!=typeof boxShadow.color&&""!==boxShadow.color&&"#fffffa"!==boxShadow.color&&(desktop+=boxShadow.inset?key+": inset "+boxShadow.offsetX+" "+boxShadow.offsetY+" "+c37Hex2rgba(boxShadow.color,boxShadow.opacity)+";":key+": "+boxShadow.offsetX+" "+boxShadow.offsetY+" "+boxShadow.blurRadius+" "+boxShadow.spreadRadius+" "+c37Hex2rgba(boxShadow.color,boxShadow.opacity)+";")}else desktop+=key+":"+cssStyle.desktop[key]+";"}),_.each(_.keys(cssStyle.tablet),function(key){""!==cssStyle.tablet[key]&&(tablet+=key+":"+cssStyle.tablet[key]+";")}),_.each(_.keys(cssStyle.phone),function(key){""!==cssStyle.phone[key]&&(phone+=key+":"+cssStyle.phone[key]+";")}),cssRules+=selector+"{"+desktop.replace(/\n/g," ")+"}",cssRules+="@media only screen and (min-width : 320px) { "+selector+"{"+phone.replace(/\n/g," ")+" } }",cssRules+="@media only screen and (min-width : 768px) { "+selector+"{"+tablet.replace(/\n/g," ")+" } }",cssRules+="@media only screen and (min-width : 992px) { "+selector+"{"+desktop.replace(/\n/g," ")+" } }",jQuery("[data-css="+elID+"]").remove(),jQuery("head").append('<style class="c37-custom-css" data-css="'+elID+'"> '+cssRules+" </style>")}});var pageHTML=decodeURIComponent(data.pageData.post_content);jQuery("#construction-site").html(pageHTML),core37Page.pageID=pageID,jQuery(".c37-step.c37-lp").attr("id",editedPageCSSID),makeFormDroppable(jQuery),makeC37BoxDroppable(jQuery),makeC37SectionDroppable(jQuery),makeC37StepDroppable(jQuery),makeFormSortable(jQuery),hideEditPanel()})}),jQuery(document).on("click",".form-edit i.fa-trash",function(){var pageID=jQuery(this).closest("li").attr("form-id"),that=jQuery(this);swal({title:"Are you sure?",text:"You will not be able to recover this form!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0,html:!1},function(){jQuery.post(ajaxurl,{action:"core37_lp_delete_page",pageID:pageID},function(){that.closest(".form-edit").hide("slide",{direction:"up"},200)})})}),jQuery(document).on("click",".form-edit i.fa-code",function(){if(!versionNangCap||!isActivated)return void showUpgradeDialog();var formID=jQuery(this).closest("li").attr("form-id");swal("Here is your shortcode","[core37_lp id="+formID+"]","success")}),jQuery(document).on("click",".form-edit i.fa-download",function(){var pageID=jQuery(this).closest("li").attr("form-id");jQuery.post(ajaxurl,{pageID:pageID,action:"core37_lp_export_template"},function(response){toastr.info("export complete");var data=JSON.parse(response),linkElement=document.createElement("a");linkElement.setAttribute("download",data.file_name),linkElement.setAttribute("href",data.url),linkElement.click(),linkElement.remove()})}),jQuery(document).on("click",".template-edit i.fa-pencil",function(){var templateID=jQuery(this).closest("li").attr("template-id");jQuery.post(ajaxurl,{action:"core37_lp_load_template",templateID:templateID},function(response){var data=JSON.parse(response);core37Page.pageSettings=JSON.parse(data.pageSettings);var elementStylesDiv=jQuery("#element-styles");elementStylesDiv.remove(),jQuery("head").append('<style id="element-styles"></style>'),elementStylesDiv.text(decodeURIComponent(data.pageCSSCode)),console.log("tnet ",data.pageData.post_content);var pageHTML=decodeURIComponent(data.pageData.post_content);jQuery("#construction-site").html(pageHTML),core37Page.pageTitle=data.pageData.post_title,core37Page.pageID=0,makeFormDroppable(jQuery),makeC37BoxDroppable(jQuery),makeC37SectionDroppable(jQuery),makeC37StepDroppable(jQuery),makeFormSortable(jQuery),hideEditPanel()})}),jQuery(document).on("click",".template-edit i.fa-trash",function(){var templateID=jQuery(this).closest("li").attr("template-id"),that=jQuery(this);swal({title:"Are you sure?",text:"You will not be able to recover this form!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0,html:!1},function(){jQuery.post(ajaxurl,{action:"core37_lp_delete_template",templateID:templateID},function(){that.closest(".template-edit").hide("slide",{direction:"up"},200)})})})}(jQuery);